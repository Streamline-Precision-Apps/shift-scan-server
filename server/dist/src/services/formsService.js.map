{"version":3,"file":"formsService.js","sources":["src/services/formsService.ts"],"sourceRoot":"/","sourcesContent":["import prisma from \"../lib/prisma.js\";\r\nimport { FormStatus } from \"../../generated/prisma/client.js\";\r\n\r\n// --- Types ---\r\n// Params for ServiceGetEmployeeRequests\r\nexport interface GetEmployeeRequestsParams {\r\n  filter: string;\r\n  skip: number;\r\n  take: number;\r\n  managerId: string;\r\n}\r\n\r\nexport interface CreateFormSubmissionParams {\r\n  formTemplateId: string;\r\n  userId: string;\r\n}\r\n\r\nexport interface SaveDraftParams {\r\n  formData: Record<string, string>;\r\n  formTemplateId: string;\r\n  userId: string;\r\n  formType?: string;\r\n  submissionId?: number;\r\n  title?: string;\r\n}\r\n\r\nexport interface SaveDraftToPendingParams {\r\n  formData: Record<string, string>;\r\n  isApprovalRequired: boolean;\r\n  formTemplateId: string;\r\n  userId: string;\r\n  formType?: string;\r\n  submissionId?: number;\r\n  title?: string;\r\n}\r\n\r\nexport interface SavePendingParams {\r\n  formData: Record<string, string>;\r\n  formTemplateId: string;\r\n  userId: string;\r\n  formType?: string;\r\n  submissionId?: number;\r\n  title?: string;\r\n}\r\n\r\nexport interface CreateFormApprovalParams {\r\n  formSubmissionId: number;\r\n  signedBy: string;\r\n  signature: string;\r\n  comment: string;\r\n  approval: string;\r\n}\r\n\r\nexport interface UpdateFormApprovalParams {\r\n  id: string;\r\n  formSubmissionId: number;\r\n  comment: string;\r\n  isApproved: boolean;\r\n}\r\n\r\n/**\r\n * Get all forms\r\n * @returns {\r\n *   id: string;\r\n *   name: string;\r\n * }[]\r\n */\r\nexport const ServiceGetForms = async () => {\r\n  return await prisma.formTemplate.findMany({\r\n    where: {\r\n      isActive: \"ACTIVE\",\r\n    },\r\n    select: {\r\n      id: true,\r\n      name: true,\r\n    },\r\n  });\r\n};\r\n/**\r\n * Create a form submission\r\n * @param {Object} params\r\n * @param {string} params.formTemplateId\r\n * @param {string} params.userId\r\n */\r\nexport const ServiceCreateFormSubmission = async ({\r\n  formTemplateId,\r\n  userId,\r\n}: CreateFormSubmissionParams) => {\r\n  // Fetch the form template to get the field names\r\n  const formTemplate = await prisma.formTemplate.findUnique({\r\n    where: { id: formTemplateId },\r\n    include: {\r\n      FormGrouping: {\r\n        include: {\r\n          Fields: true,\r\n        },\r\n      },\r\n    },\r\n  });\r\n  if (!formTemplate) throw new Error(\"Form template not found\");\r\n  // Initialize the data object with field.id as keys and field.content as default value\r\n  const initialData: Record<string, string> = {};\r\n  for (const group of formTemplate.FormGrouping) {\r\n    for (const field of group.Fields) {\r\n      initialData[String(field.id)] = field.content || \"\";\r\n    }\r\n  }\r\n  // Create the form submission with the initialized data\r\n  const submission = await prisma.formSubmission.create({\r\n    data: {\r\n      formTemplateId,\r\n      userId,\r\n      title: \"\",\r\n      data: initialData,\r\n    },\r\n  });\r\n  return submission;\r\n};\r\n\r\n/**\r\n * Delete a form submission\r\n * @param {number} id\r\n */\r\nexport const ServiceDeleteFormSubmission = async (id: number) => {\r\n  await prisma.formSubmission.delete({ where: { id } });\r\n  return true;\r\n};\r\n\r\n/**\r\n * Save a draft form submission\r\n * @param {Object} params\r\n * @param {Record<string, string>} params.formData\r\n * @param {string} params.formTemplateId\r\n * @param {string} params.userId\r\n * @param {string} [params.formType]\r\n * @param {number} [params.submissionId]\r\n * @param {string} [params.title]\r\n */\r\nexport const ServiceSaveDraft = async (params: SaveDraftParams) => {\r\n  const { formData, formTemplateId, userId, formType, submissionId, title } =\r\n    params;\r\n  if (submissionId) {\r\n    const existingSubmission = await prisma.formSubmission.findUnique({\r\n      where: { id: submissionId },\r\n    });\r\n    if (!existingSubmission) throw new Error(\"Submission not found\");\r\n    let existingData: Record<string, string> = {};\r\n    if (\r\n      typeof existingSubmission.data === \"object\" &&\r\n      existingSubmission.data !== null &&\r\n      !Array.isArray(existingSubmission.data)\r\n    ) {\r\n      existingData = existingSubmission.data as Record<string, string>;\r\n    }\r\n    const existingTitle = existingSubmission.title;\r\n    // Only update changed fields\r\n    const changedFields: Record<string, string> = {};\r\n    for (const key in formData) {\r\n      if (formData[key] !== existingData[key]) {\r\n        changedFields[key] = formData[key] ?? \"\";\r\n      }\r\n    }\r\n    const updatedSubmission = await prisma.formSubmission.update({\r\n      where: { id: submissionId },\r\n      data: {\r\n        title: title || existingTitle,\r\n        data: { ...existingData, ...changedFields },\r\n      },\r\n    });\r\n    return updatedSubmission;\r\n  } else {\r\n    const newSubmission = await prisma.formSubmission.create({\r\n      data: {\r\n        title: title || \"\",\r\n        formTemplateId,\r\n        userId,\r\n        formType: formType ?? null,\r\n        data: formData,\r\n        status: FormStatus.DRAFT,\r\n        submittedAt: new Date().toISOString(),\r\n      },\r\n    });\r\n    return newSubmission;\r\n  }\r\n};\r\n\r\n/**\r\n * Save a draft and move to pending/approved\r\n * @param {Object} params\r\n * @param {Record<string, string>} params.formData\r\n * @param {boolean} params.isApprovalRequired\r\n * @param {string} params.formTemplateId\r\n * @param {string} params.userId\r\n * @param {string} [params.formType]\r\n * @param {number} [params.submissionId]\r\n * @param {string} [params.title]\r\n */\r\nexport const ServiceSaveDraftToPending = async (\r\n  params: SaveDraftToPendingParams\r\n) => {\r\n  const {\r\n    formData,\r\n    isApprovalRequired,\r\n    formTemplateId,\r\n    userId,\r\n    formType,\r\n    submissionId,\r\n    title,\r\n  } = params;\r\n  if (submissionId) {\r\n    const existingSubmission = await prisma.formSubmission.findUnique({\r\n      where: { id: submissionId },\r\n    });\r\n    if (!existingSubmission) throw new Error(\"Submission not found\");\r\n    let existingData: Record<string, string> = {};\r\n    if (\r\n      typeof existingSubmission.data === \"object\" &&\r\n      existingSubmission.data !== null &&\r\n      !Array.isArray(existingSubmission.data)\r\n    ) {\r\n      existingData = existingSubmission.data as Record<string, string>;\r\n    }\r\n    const existingTitle = existingSubmission.title;\r\n    const changedFields: Record<string, string> = {};\r\n    for (const key in formData) {\r\n      if (formData[key] !== existingData[key]) {\r\n        changedFields[key] = formData[key] ?? \"\";\r\n      }\r\n    }\r\n    const updatedSubmission = await prisma.formSubmission.update({\r\n      where: { id: submissionId },\r\n      data: {\r\n        title: title || existingTitle,\r\n        data: { ...existingData, ...changedFields },\r\n        submittedAt: new Date().toISOString(),\r\n        status: isApprovalRequired ? FormStatus.PENDING : FormStatus.APPROVED,\r\n      },\r\n      include: {\r\n        User: { select: { firstName: true, lastName: true } },\r\n      },\r\n    });\r\n    return updatedSubmission;\r\n  } else {\r\n    const newSubmission = await prisma.formSubmission.create({\r\n      data: {\r\n        title: title || \"\",\r\n        formTemplateId,\r\n        userId,\r\n        formType: formType ?? null,\r\n        data: formData,\r\n        status: isApprovalRequired ? FormStatus.PENDING : FormStatus.APPROVED,\r\n        submittedAt: new Date().toISOString(),\r\n      },\r\n      include: {\r\n        User: { select: { firstName: true, lastName: true } },\r\n      },\r\n    });\r\n    return newSubmission;\r\n  }\r\n};\r\n\r\n/**\r\n * Save a pending form submission\r\n * @param {Object} params\r\n * @param {Record<string, string>} params.formData\r\n * @param {string} params.formTemplateId\r\n * @param {string} params.userId\r\n * @param {string} [params.formType]\r\n * @param {number} [params.submissionId]\r\n * @param {string} [params.title]\r\n */\r\nexport const ServiceSavePending = async (params: SavePendingParams) => {\r\n  const { formData, formTemplateId, userId, formType, submissionId, title } =\r\n    params;\r\n  if (submissionId) {\r\n    const existingSubmission = await prisma.formSubmission.findUnique({\r\n      where: { id: submissionId },\r\n    });\r\n    if (!existingSubmission) throw new Error(\"Submission not found\");\r\n    let existingData: Record<string, string> = {};\r\n    if (\r\n      typeof existingSubmission.data === \"object\" &&\r\n      existingSubmission.data !== null &&\r\n      !Array.isArray(existingSubmission.data)\r\n    ) {\r\n      existingData = existingSubmission.data as Record<string, string>;\r\n    }\r\n    const existingTitle = existingSubmission.title;\r\n    const changedFields: Record<string, string> = {};\r\n    for (const key in formData) {\r\n      if (formData[key] !== existingData[key]) {\r\n        changedFields[key] = formData[key] ?? \"\";\r\n      }\r\n    }\r\n    const updatedSubmission = await prisma.formSubmission.update({\r\n      where: { id: submissionId },\r\n      data: {\r\n        title: title || existingTitle,\r\n        data: { ...existingData, ...changedFields },\r\n        status: FormStatus.PENDING,\r\n      },\r\n    });\r\n    return updatedSubmission;\r\n  } else {\r\n    const newSubmission = await prisma.formSubmission.create({\r\n      data: {\r\n        title: title || \"\",\r\n        formTemplateId,\r\n        userId,\r\n        formType: formType ?? null,\r\n        data: formData,\r\n        status: FormStatus.PENDING,\r\n      },\r\n    });\r\n    return newSubmission;\r\n  }\r\n};\r\n\r\nexport const ServiceGetFormsWithRequests = async () => {\r\n  const forms = await prisma.formSubmission.findMany({\r\n    where: { status: FormStatus.PENDING },\r\n    include: {\r\n      User: { select: { firstName: true, lastName: true } },\r\n    },\r\n  });\r\n  return forms;\r\n};\r\n\r\n/**\r\n * Create a form approval\r\n * @param {Object} params\r\n * @param {number} params.formSubmissionId\r\n * @param {string} params.signedBy\r\n * @param {string} params.signature\r\n * @param {string} params.comment\r\n * @param {string} params.approval\r\n */\r\nexport const ServiceCreateFormApproval = async (\r\n  params: CreateFormApprovalParams\r\n) => {\r\n  const { formSubmissionId, signedBy, signature, comment, approval } = params;\r\n  const create = await prisma.formApproval.create({\r\n    data: {\r\n      formSubmissionId,\r\n      signedBy,\r\n      signature,\r\n      comment,\r\n    },\r\n  });\r\n  if (create) {\r\n    await prisma.formSubmission.update({\r\n      where: { id: formSubmissionId },\r\n      data: { status: approval as FormStatus },\r\n    });\r\n  }\r\n  return true;\r\n};\r\n\r\n/**\r\n * Update a form approval\r\n * @param {Object} params\r\n * @param {string} params.id\r\n * @param {number} params.formSubmissionId\r\n * @param {string} params.comment\r\n * @param {boolean} params.isApproved\r\n */\r\nexport const ServiceUpdateFormApproval = async (\r\n  params: UpdateFormApprovalParams\r\n) => {\r\n  const { id, formSubmissionId, comment, isApproved } = params;\r\n  // Use a transaction to ensure atomicity\r\n  const [approval, updatedSubmission] = await prisma.$transaction([\r\n    prisma.formApproval.update({\r\n      where: { id },\r\n      data: { comment },\r\n    }),\r\n    prisma.formSubmission.update({\r\n      where: { id: formSubmissionId },\r\n      data: { status: isApproved ? FormStatus.APPROVED : FormStatus.DENIED },\r\n    }),\r\n  ]);\r\n  return { approval, updatedSubmission };\r\n};\r\n\r\n/**\r\n * Fetch employee requests for a manager, with filter, skip, take\r\n */\r\nexport const ServiceGetEmployeeRequests = async ({\r\n  filter,\r\n  skip,\r\n  take,\r\n  managerId,\r\n}: GetEmployeeRequestsParams) => {\r\n  // 'all' = all pending requests for employees in manager's team (not self),\r\n  // 'approved' = all approved/denied (not pending/draft) for employees in manager's team (not self),\r\n  // else: pending requests for a specific userId (employee), in manager's team (not self)\r\n  if (filter === \"all\") {\r\n    return await prisma.formSubmission.findMany({\r\n      where: {\r\n        status: \"PENDING\",\r\n        User: {\r\n          NOT: { id: managerId },\r\n          Crews: { some: { leadId: managerId } },\r\n        },\r\n        Approvals: { none: {} },\r\n      },\r\n      include: {\r\n        FormTemplate: { select: { formType: true } },\r\n        User: { select: { id: true, firstName: true, lastName: true } },\r\n        Approvals: { select: { signedBy: true } },\r\n      },\r\n      skip,\r\n      take,\r\n      orderBy: { createdAt: \"desc\" },\r\n    });\r\n  } else if (filter === \"approved\") {\r\n    return await prisma.formSubmission.findMany({\r\n      where: {\r\n        status: { not: { in: [\"PENDING\", \"DRAFT\"] } },\r\n        User: {\r\n          NOT: { id: managerId },\r\n          Crews: { some: { leadId: managerId } },\r\n        },\r\n      },\r\n      include: {\r\n        FormTemplate: { select: { formType: true } },\r\n        User: { select: { firstName: true, lastName: true } },\r\n        Approvals: {\r\n          select: {\r\n            id: true,\r\n            Approver: { select: { firstName: true, lastName: true } },\r\n          },\r\n        },\r\n      },\r\n      skip,\r\n      take,\r\n      orderBy: { createdAt: \"desc\" },\r\n    });\r\n  } else {\r\n    // filter is a userId\r\n    return await prisma.formSubmission.findMany({\r\n      where: {\r\n        status: \"PENDING\",\r\n        userId: filter,\r\n        User: {\r\n          NOT: { id: managerId },\r\n          Crews: { some: { leadId: managerId } },\r\n        },\r\n        Approvals: { none: {} },\r\n      },\r\n      include: {\r\n        FormTemplate: { select: { formType: true } },\r\n        User: { select: { firstName: true, lastName: true } },\r\n        Approvals: { select: { signedBy: true } },\r\n      },\r\n      skip,\r\n      take,\r\n      orderBy: { createdAt: \"desc\" },\r\n    });\r\n  }\r\n};\r\n\r\nexport const ServiceGetUserSubmissions = async ({\r\n  userId,\r\n  filter,\r\n  startDate,\r\n  endDate,\r\n  skip,\r\n  take,\r\n}: {\r\n  userId: string;\r\n  filter: string;\r\n  startDate: Date | null;\r\n  endDate: Date | null;\r\n  skip: number;\r\n  take: number;\r\n}) => {\r\n  // Build where clause\r\n  let whereClause: any = { userId };\r\n  if (filter === \"pending\") {\r\n    whereClause = { ...whereClause, status: FormStatus.PENDING };\r\n  } else if (filter === \"approved\") {\r\n    whereClause = { ...whereClause, status: FormStatus.APPROVED };\r\n  } else if (filter === \"denied\") {\r\n    whereClause = { ...whereClause, status: FormStatus.DENIED };\r\n  } else if (filter === \"draft\") {\r\n    whereClause = { ...whereClause, status: FormStatus.DRAFT };\r\n  } else if (filter === \"all\") {\r\n    if (startDate && endDate) {\r\n      whereClause = {\r\n        ...whereClause,\r\n        createdAt: { gte: startDate, lte: endDate },\r\n      };\r\n    }\r\n  }\r\n\r\n  const forms = await prisma.formSubmission.findMany({\r\n    where: whereClause,\r\n    include: {\r\n      FormTemplate: { select: { name: true, formType: true } },\r\n      User: { select: { id: true, firstName: true, lastName: true } },\r\n    },\r\n    skip,\r\n    take,\r\n    orderBy: { createdAt: \"desc\" },\r\n  });\r\n\r\n  // Sort: drafts first, then by createdAt desc\r\n  forms.sort((a, b) => {\r\n    if (a.status === FormStatus.DRAFT && b.status !== FormStatus.DRAFT)\r\n      return -1;\r\n    if (a.status !== FormStatus.DRAFT && b.status === FormStatus.DRAFT)\r\n      return 1;\r\n    return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();\r\n  });\r\n  return forms;\r\n};\r\n\r\nexport const ServiceManagerFormApprovals = async (id: string) => {\r\n  const forms = await prisma.formSubmission.findFirst({\r\n    where: {\r\n      id: Number(id),\r\n    },\r\n    include: {\r\n      Approvals: {\r\n        include: {\r\n          Approver: {\r\n            select: {\r\n              firstName: true,\r\n              lastName: true,\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  });\r\n\r\n  return forms;\r\n};\r\n\r\nexport const ServiceFormSubmissions = async (id: string) => {\r\n  const forms = await prisma.formSubmission.findUnique({\r\n    where: {\r\n      id: Number(id),\r\n    },\r\n    include: {\r\n      FormTemplate: {\r\n        select: {\r\n          id: true,\r\n          name: true,\r\n        },\r\n      },\r\n      User: {\r\n        select: {\r\n          signature: true,\r\n        },\r\n      },\r\n      Approvals: {\r\n        select: {\r\n          id: true,\r\n          comment: true,\r\n          updatedAt: true,\r\n          Approver: {\r\n            select: {\r\n              firstName: true,\r\n              lastName: true,\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  });\r\n\r\n  return forms;\r\n};\r\n\r\nexport const ServiceTeamSubmissions = async (id: string) => {\r\n  const formSubmission = await prisma.formSubmission.findUnique({\r\n    where: {\r\n      id: Number(id),\r\n    },\r\n    include: {\r\n      User: {\r\n        select: {\r\n          firstName: true,\r\n          lastName: true,\r\n        },\r\n      },\r\n      Approvals: {\r\n        select: {\r\n          comment: true,\r\n          Approver: {\r\n            select: {\r\n              firstName: true,\r\n              lastName: true,\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  });\r\n\r\n  return formSubmission;\r\n};\r\n\r\nexport const ServiceFormDraft = async (id: string, userId: string) => {\r\n  const forms = await prisma.formSubmission.findUnique({\r\n    where: {\r\n      id: Number(id),\r\n      userId,\r\n      status: FormStatus.DRAFT,\r\n    },\r\n\r\n    select: {\r\n      data: true,\r\n      title: true,\r\n      FormTemplate: {\r\n        select: {\r\n          name: true,\r\n        },\r\n      },\r\n    },\r\n  });\r\n\r\n  return forms;\r\n};\r\n\r\nexport const ServiceForm = async (id: string, userId: string) => {\r\n  const formTemplate = await prisma.formTemplate.findUnique({\r\n    where: {\r\n      id,\r\n    },\r\n    include: {\r\n      FormGrouping: {\r\n        include: {\r\n          Fields: {\r\n            include: {\r\n              Options: true, // Include dropdown options if any\r\n            },\r\n            orderBy: {\r\n              order: \"asc\",\r\n            },\r\n          },\r\n        },\r\n        orderBy: {\r\n          order: \"asc\",\r\n        },\r\n      },\r\n    },\r\n  });\r\n\r\n  if (!formTemplate) throw new Error(\"Form template not found\");\r\n\r\n  const formattedForm = {\r\n    id: formTemplate.id,\r\n    name: formTemplate.name,\r\n    formType: formTemplate.formType,\r\n    isActive: formTemplate.isActive,\r\n    isSignatureRequired: formTemplate.isSignatureRequired,\r\n    groupings: formTemplate.FormGrouping.map((group) => ({\r\n      id: group.id,\r\n      title: group.title || \"\",\r\n      order: group.order,\r\n      fields: group.Fields.map((field) => ({\r\n        id: field.id,\r\n        label: field.label,\r\n        name: field.id, // Use field.id as the name since FormField doesn't have a name property\r\n        type: field.type,\r\n        required: field.required,\r\n        order: field.order,\r\n        defaultValue: undefined, // FormField doesn't have defaultValue\r\n        placeholder: field.placeholder,\r\n        helperText: field.content, // Use content as helperText\r\n        filter: field.filter, // Include the filter property for SEARCH_ASSET fields\r\n        multiple: field.multiple, // Include multiple property for multi-select fields\r\n        options: field.Options.map((option) => option.value), // Extract dropdown options\r\n      })),\r\n    })),\r\n  };\r\n\r\n  return formattedForm;\r\n};\r\n"],"names":[],"mappings":"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","debug_id":"350a5368-6097-54b7-ac45-e23eeaec90cd"}