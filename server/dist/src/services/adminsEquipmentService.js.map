{"version":3,"file":"adminsEquipmentService.js","sources":["src/services/adminsEquipmentService.ts"],"sourceRoot":"/","sourcesContent":["import type {\n  ApprovalStatus,\n  Condition,\n  EquipmentState,\n  EquipmentTags,\n  FormTemplateStatus,\n  OwnershipType,\n  Prisma,\n} from \"../../generated/prisma/index.js\";\nimport prisma from \"../lib/prisma.js\";\n\nexport async function createEquipmentService(\n  equipmentData: {\n    code: string;\n    name: string;\n    description?: string;\n    memo?: string;\n    ownershipType?: string | null;\n    make?: string | null;\n    model?: string | null;\n    year?: string | null;\n    color?: string | null;\n    serialNumber?: string | null;\n    acquiredDate?: Date | null;\n    acquiredCondition?: string | null;\n    licensePlate?: string | null;\n    licenseState?: string | null;\n    equipmentTag: string;\n    status?: string;\n    state?: string;\n    approvalStatus?: string;\n    isDisabledByAdmin?: boolean;\n    overWeight: boolean | null;\n    currentWeight: number | null;\n  },\n  createdById: string,\n  qrId: string\n) {\n  return await prisma.equipment.create({\n    data: {\n      qrId,\n      code: equipmentData.code || \"\",\n      name: equipmentData.name,\n      description: equipmentData.description || \"\",\n      memo: equipmentData.memo || \"\",\n      ownershipType: (equipmentData.ownershipType as OwnershipType) || null,\n      acquiredDate: equipmentData.acquiredDate ?? null,\n      acquiredCondition: (equipmentData.acquiredCondition as Condition) || null,\n      equipmentTag: equipmentData.equipmentTag as EquipmentTags,\n      state: (equipmentData.state as EquipmentState) || \"AVAILABLE\",\n      approvalStatus:\n        (equipmentData.approvalStatus as ApprovalStatus) || \"APPROVED\",\n      status: (equipmentData.status as FormTemplateStatus) || \"ACTIVE\",\n      overWeight: equipmentData.overWeight || false,\n      currentWeight: equipmentData.currentWeight || 0,\n      createdById,\n      // Add vehicle-specific fields directly to the equipment\n      make: equipmentData.make ?? null,\n      model: equipmentData.model ?? null,\n      year: equipmentData.year ?? null,\n      color: equipmentData.color ?? null,\n      serialNumber: equipmentData.serialNumber ?? null,\n      licensePlate: equipmentData.licensePlate ?? null,\n      licenseState: equipmentData.licenseState ?? null,\n    },\n  });\n}\n\nexport async function editEquipmentService(\n  id: string,\n  body: Prisma.EquipmentUpdateInput,\n  userId: string\n) {\n  const updateData: Prisma.EquipmentUpdateInput = {};\n\n  // Process all possible equipment fields from body\n  if (body.name !== undefined) updateData.name = body.name;\n  if (body.code !== undefined) updateData.code = body.code;\n  if (body.description !== undefined)\n    updateData.description = body.description || \"\";\n  if (body.memo !== undefined) updateData.memo = body.memo;\n  if (body.equipmentTag !== undefined)\n    updateData.equipmentTag = body.equipmentTag as EquipmentTags;\n  if (body.state !== undefined) updateData.state = body.state as EquipmentState;\n  if (body.status !== undefined)\n    updateData.status = body.status as FormTemplateStatus;\n  if (body.ownershipType !== undefined)\n    updateData.ownershipType = (body.ownershipType as OwnershipType) || null;\n  if (body.acquiredCondition !== undefined)\n    updateData.acquiredCondition =\n      (body.acquiredCondition as Condition) || null;\n  if (body.serialNumber !== undefined)\n    updateData.serialNumber = body.serialNumber;\n  if (body.color !== undefined) updateData.color = body.color;\n\n  // Vehicle/equipment specific fields\n  if (body.make !== undefined) updateData.make = body.make;\n  if (body.model !== undefined) updateData.model = body.model;\n  if (body.year !== undefined) updateData.year = body.year;\n  if (body.licensePlate !== undefined)\n    updateData.licensePlate = body.licensePlate;\n  if (body.licenseState !== undefined)\n    updateData.licenseState = body.licenseState;\n\n  // Handle date fields\n  if (body.acquiredDate !== undefined) {\n    if (\n      typeof body.acquiredDate === \"string\" ||\n      typeof body.acquiredDate === \"number\" ||\n      body.acquiredDate instanceof Date\n    ) {\n      updateData.acquiredDate = body.acquiredDate\n        ? new Date(body.acquiredDate)\n        : null;\n    } else {\n      updateData.acquiredDate = null;\n    }\n  }\n  if (body.registrationExpiration !== undefined) {\n    const regExpValue = body.registrationExpiration;\n    if (\n      regExpValue &&\n      regExpValue !== \"null\" &&\n      regExpValue !== \"undefined\" &&\n      (typeof regExpValue === \"string\" ||\n        typeof regExpValue === \"number\" ||\n        regExpValue instanceof Date)\n    ) {\n      updateData.registrationExpiration = new Date(regExpValue);\n    } else {\n      updateData.registrationExpiration = null;\n    }\n  }\n\n  // Handle numeric fields\n  if (body.currentWeight !== undefined) {\n    const weightValue = body.currentWeight;\n    if (typeof weightValue === \"string\") {\n      updateData.currentWeight = weightValue ? parseFloat(weightValue) || 0 : 0;\n    } else if (typeof weightValue === \"number\") {\n      updateData.currentWeight = weightValue;\n    } else {\n      // If it's an object (e.g., NullableFloatFieldUpdateOperationsInput), assign as is\n      updateData.currentWeight = weightValue;\n    }\n  }\n\n  // Handle boolean fields\n  if (body.overWeight !== undefined) {\n    if (typeof body.overWeight === \"boolean\") {\n      updateData.overWeight = body.overWeight;\n    } else if (typeof body.overWeight === \"string\") {\n      updateData.overWeight = body.overWeight === \"true\";\n    } else {\n      updateData.overWeight = null;\n    }\n  }\n\n  // Handle status fields\n  if (body.approvalStatus !== undefined)\n    updateData.approvalStatus = body.approvalStatus as ApprovalStatus;\n  if (body.creationReason !== undefined)\n    updateData.creationReason = body.creationReason;\n\n  // Always update the timestamp\n  updateData.updatedAt = new Date();\n\n  const updatedEquipment = await prisma.equipment.update({\n    where: { id },\n    data: updateData,\n  });\n\n  const notification = await prisma.notification.findMany({\n    where: {\n      topic: \"items\",\n      referenceId: id.toString(),\n      Response: {\n        is: null,\n      },\n    },\n  });\n  if (notification.length > 0) {\n    // Wrap notificationRead and notificationResponse createMany in a transaction\n    await prisma.$transaction([\n      prisma.notificationRead.createMany({\n        data: notification.map((n) => ({\n          notificationId: n.id,\n          userId,\n          readAt: new Date(),\n        })),\n      }),\n      prisma.notificationResponse.createMany({\n        data: notification.map((n) => ({\n          notificationId: n.id,\n          userId,\n          response: \"Approved\",\n          respondedAt: new Date(),\n        })),\n      }),\n    ]);\n  }\n  return updatedEquipment;\n}\n\nexport async function archiveEquipmentService(id: string) {\n  return await prisma.equipment.update({\n    where: { id },\n    data: {\n      status: \"ARCHIVED\",\n    },\n  });\n}\n\nexport async function restoreEquipmentService(id: string) {\n  return await prisma.equipment.update({\n    where: { id },\n    data: {\n      status: \"ACTIVE\",\n    },\n  });\n}\n\nexport async function deleteEquipmentService(id: string) {\n  return await prisma.equipment.delete({\n    where: { id },\n  });\n}\n\nexport interface GetAllEquipmentServiceParams {\n  status?: string;\n  filtersParam?: string;\n  searchTerm: string;\n  requestedPage: number;\n  requestedPageSize: number;\n}\n\nexport interface GetAllEquipmentServiceResult {\n  equipment: any[];\n  total: number;\n  pendingEquipment: number;\n  page: number;\n  pageSize: number;\n  totalPages: number;\n}\n\n// Common select fields for equipment queries\nconst equipmentSelectFields = {\n  id: true,\n  qrId: true,\n  code: true,\n  name: true,\n  description: true,\n  memo: true,\n  ownershipType: true,\n  equipmentTag: true,\n  status: true,\n  approvalStatus: true,\n  state: true,\n  createdAt: true,\n  updatedAt: true,\n  make: true,\n  model: true,\n  year: true,\n  color: true,\n  serialNumber: true,\n  acquiredDate: true,\n  acquiredCondition: true,\n  licensePlate: true,\n  licenseState: true,\n  _count: {\n    select: {\n      EmployeeEquipmentLogs: true,\n      TascoLogs: true,\n      HauledInLogs: true,\n      UsedAsTrailer: true,\n      UsedAsTruck: true,\n      Maintenance: true,\n    },\n  },\n};\n\nexport async function getAllEquipmentService({\n  status,\n  filtersParam,\n  searchTerm,\n  requestedPage,\n  requestedPageSize,\n}: GetAllEquipmentServiceParams): Promise<GetAllEquipmentServiceResult> {\n  // Base search condition that will be applied to all queries\n  const searchCondition = searchTerm\n    ? {\n        OR: [\n          { name: { contains: searchTerm, mode: \"insensitive\" } },\n          { code: { contains: searchTerm, mode: \"insensitive\" } },\n        ],\n      }\n    : {};\n\n  // Parse filters if provided\n  const whereClause: Record<string, unknown> = { ...searchCondition };\n\n  // Add status filter if specified\n  if (status === \"pending\") {\n    whereClause.approvalStatus = \"PENDING\";\n  }\n\n  // Add custom filters if provided\n  if (filtersParam) {\n    try {\n      const filters = JSON.parse(filtersParam);\n\n      // Add filter for equipment tags if provided\n      if (filters.equipmentTags && filters.equipmentTags.length > 0) {\n        whereClause.equipmentTag = {\n          in: filters.equipmentTags as EquipmentTags[],\n        };\n      }\n\n      // Add filter for ownership types if provided\n      if (filters.ownershipTypes && filters.ownershipTypes.length > 0) {\n        whereClause.ownershipType = {\n          in: filters.ownershipTypes as OwnershipType[],\n        };\n      }\n\n      // Add filter for conditions if provided\n      if (filters.conditions && filters.conditions.length > 0) {\n        whereClause.acquiredCondition = {\n          in: filters.conditions as Condition[],\n        };\n      }\n\n      // Add filter for statuses if provided\n      if (filters.statuses && filters.statuses.length > 0) {\n        whereClause.approvalStatus = {\n          in: filters.statuses as ApprovalStatus[],\n        };\n      }\n      // Add filter for activity status if provided\n      if (filters.activityStatuses && filters.activityStatuses.length > 0) {\n        whereClause.status = {\n          in: filters.activityStatuses as FormTemplateStatus[],\n        };\n      }\n    } catch (error) {\n      console.error(\"Error parsing filters:\", error);\n      throw new Error(\"Invalid filters\");\n    }\n  }\n\n  // Count total matching records (for pagination)\n  const total = await prisma.equipment.count({ where: whereClause });\n\n  // Calculate pagination values\n  const isPaginationDisabled =\n    status === \"pending\" ||\n    searchTerm.trim() !== \"\" ||\n    (filtersParam && filtersParam !== \"{}\");\n\n  // Either use pagination or get all results\n  const skip = isPaginationDisabled\n    ? 0\n    : (requestedPage - 1) * requestedPageSize;\n  const take = isPaginationDisabled ? undefined : requestedPageSize;\n  const effectivePage = isPaginationDisabled ? 1 : requestedPage;\n  const effectivePageSize = isPaginationDisabled ? total : requestedPageSize;\n  const totalPages = Math.ceil(total / (effectivePageSize || 1)) || 1;\n\n  // Fetch equipment data\n  const equipment = await prisma.equipment.findMany({\n    where: whereClause,\n    skip,\n    ...(take !== undefined && { take }),\n    select: equipmentSelectFields,\n    orderBy: {\n      code: \"asc\",\n    },\n  });\n\n  // Count pending equipment for badge count\n  const pendingEquipment = await prisma.equipment.count({\n    where: {\n      approvalStatus: \"PENDING\",\n    },\n  });\n\n  return {\n    equipment,\n    total,\n    pendingEquipment,\n    page: effectivePage,\n    pageSize: effectivePageSize,\n    totalPages,\n  };\n}\n\nexport async function getEquipmentByIdService(id: string) {\n  return await prisma.equipment.findUnique({\n    where: { id },\n    include: {\n      DocumentTags: true,\n      createdBy: {\n        select: {\n          firstName: true,\n          lastName: true,\n        },\n      },\n    },\n  });\n}\n\nexport async function getEquipmentSummaryService() {\n  return await prisma.equipment.findMany({\n    select: {\n      id: true,\n      name: true,\n      approvalStatus: true,\n    },\n    orderBy: {\n      name: \"asc\",\n    },\n  });\n}\n"],"names":[],"mappings":";;AASA,OAAO,MAAM,MAAM,kBAAkB,CAAC;AAEtC,MAAM,CAAC,KAAK,UAAU,sBAAsB,CAC1C,aAsBC,EACD,WAAmB,EACnB,IAAY;IAEZ,OAAO,MAAM,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC;QACnC,IAAI,EAAE;YACJ,IAAI;YACJ,IAAI,EAAE,aAAa,CAAC,IAAI,IAAI,EAAE;YAC9B,IAAI,EAAE,aAAa,CAAC,IAAI;YACxB,WAAW,EAAE,aAAa,CAAC,WAAW,IAAI,EAAE;YAC5C,IAAI,EAAE,aAAa,CAAC,IAAI,IAAI,EAAE;YAC9B,aAAa,EAAG,aAAa,CAAC,aAA+B,IAAI,IAAI;YACrE,YAAY,EAAE,aAAa,CAAC,YAAY,IAAI,IAAI;YAChD,iBAAiB,EAAG,aAAa,CAAC,iBAA+B,IAAI,IAAI;YACzE,YAAY,EAAE,aAAa,CAAC,YAA6B;YACzD,KAAK,EAAG,aAAa,CAAC,KAAwB,IAAI,WAAW;YAC7D,cAAc,EACX,aAAa,CAAC,cAAiC,IAAI,UAAU;YAChE,MAAM,EAAG,aAAa,CAAC,MAA6B,IAAI,QAAQ;YAChE,UAAU,EAAE,aAAa,CAAC,UAAU,IAAI,KAAK;YAC7C,aAAa,EAAE,aAAa,CAAC,aAAa,IAAI,CAAC;YAC/C,WAAW;YACX,wDAAwD;YACxD,IAAI,EAAE,aAAa,CAAC,IAAI,IAAI,IAAI;YAChC,KAAK,EAAE,aAAa,CAAC,KAAK,IAAI,IAAI;YAClC,IAAI,EAAE,aAAa,CAAC,IAAI,IAAI,IAAI;YAChC,KAAK,EAAE,aAAa,CAAC,KAAK,IAAI,IAAI;YAClC,YAAY,EAAE,aAAa,CAAC,YAAY,IAAI,IAAI;YAChD,YAAY,EAAE,aAAa,CAAC,YAAY,IAAI,IAAI;YAChD,YAAY,EAAE,aAAa,CAAC,YAAY,IAAI,IAAI;SACjD;KACF,CAAC,CAAC;AACL,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,oBAAoB,CACxC,EAAU,EACV,IAAiC,EACjC,MAAc;IAEd,MAAM,UAAU,GAAgC,EAAE,CAAC;IAEnD,kDAAkD;IAClD,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS;QAAE,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;IACzD,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS;QAAE,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;IACzD,IAAI,IAAI,CAAC,WAAW,KAAK,SAAS;QAChC,UAAU,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,IAAI,EAAE,CAAC;IAClD,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS;QAAE,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;IACzD,IAAI,IAAI,CAAC,YAAY,KAAK,SAAS;QACjC,UAAU,CAAC,YAAY,GAAG,IAAI,CAAC,YAA6B,CAAC;IAC/D,IAAI,IAAI,CAAC,KAAK,KAAK,SAAS;QAAE,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC,KAAuB,CAAC;IAC9E,IAAI,IAAI,CAAC,MAAM,KAAK,SAAS;QAC3B,UAAU,CAAC,MAAM,GAAG,IAAI,CAAC,MAA4B,CAAC;IACxD,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS;QAClC,UAAU,CAAC,aAAa,GAAI,IAAI,CAAC,aAA+B,IAAI,IAAI,CAAC;IAC3E,IAAI,IAAI,CAAC,iBAAiB,KAAK,SAAS;QACtC,UAAU,CAAC,iBAAiB;YACzB,IAAI,CAAC,iBAA+B,IAAI,IAAI,CAAC;IAClD,IAAI,IAAI,CAAC,YAAY,KAAK,SAAS;QACjC,UAAU,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;IAC9C,IAAI,IAAI,CAAC,KAAK,KAAK,SAAS;QAAE,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;IAE5D,oCAAoC;IACpC,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS;QAAE,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;IACzD,IAAI,IAAI,CAAC,KAAK,KAAK,SAAS;QAAE,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;IAC5D,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS;QAAE,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;IACzD,IAAI,IAAI,CAAC,YAAY,KAAK,SAAS;QACjC,UAAU,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;IAC9C,IAAI,IAAI,CAAC,YAAY,KAAK,SAAS;QACjC,UAAU,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;IAE9C,qBAAqB;IACrB,IAAI,IAAI,CAAC,YAAY,KAAK,SAAS,EAAE,CAAC;QACpC,IACE,OAAO,IAAI,CAAC,YAAY,KAAK,QAAQ;YACrC,OAAO,IAAI,CAAC,YAAY,KAAK,QAAQ;YACrC,IAAI,CAAC,YAAY,YAAY,IAAI,EACjC,CAAC;YACD,UAAU,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY;gBACzC,CAAC,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC;gBAC7B,CAAC,CAAC,IAAI,CAAC;QACX,CAAC;aAAM,CAAC;YACN,UAAU,CAAC,YAAY,GAAG,IAAI,CAAC;QACjC,CAAC;IACH,CAAC;IACD,IAAI,IAAI,CAAC,sBAAsB,KAAK,SAAS,EAAE,CAAC;QAC9C,MAAM,WAAW,GAAG,IAAI,CAAC,sBAAsB,CAAC;QAChD,IACE,WAAW;YACX,WAAW,KAAK,MAAM;YACtB,WAAW,KAAK,WAAW;YAC3B,CAAC,OAAO,WAAW,KAAK,QAAQ;gBAC9B,OAAO,WAAW,KAAK,QAAQ;gBAC/B,WAAW,YAAY,IAAI,CAAC,EAC9B,CAAC;YACD,UAAU,CAAC,sBAAsB,GAAG,IAAI,IAAI,CAAC,WAAW,CAAC,CAAC;QAC5D,CAAC;aAAM,CAAC;YACN,UAAU,CAAC,sBAAsB,GAAG,IAAI,CAAC;QAC3C,CAAC;IACH,CAAC;IAED,wBAAwB;IACxB,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,EAAE,CAAC;QACrC,MAAM,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC;QACvC,IAAI,OAAO,WAAW,KAAK,QAAQ,EAAE,CAAC;YACpC,UAAU,CAAC,aAAa,GAAG,WAAW,CAAC,CAAC,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC5E,CAAC;aAAM,IAAI,OAAO,WAAW,KAAK,QAAQ,EAAE,CAAC;YAC3C,UAAU,CAAC,aAAa,GAAG,WAAW,CAAC;QACzC,CAAC;aAAM,CAAC;YACN,kFAAkF;YAClF,UAAU,CAAC,aAAa,GAAG,WAAW,CAAC;QACzC,CAAC;IACH,CAAC;IAED,wBAAwB;IACxB,IAAI,IAAI,CAAC,UAAU,KAAK,SAAS,EAAE,CAAC;QAClC,IAAI,OAAO,IAAI,CAAC,UAAU,KAAK,SAAS,EAAE,CAAC;YACzC,UAAU,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QAC1C,CAAC;aAAM,IAAI,OAAO,IAAI,CAAC,UAAU,KAAK,QAAQ,EAAE,CAAC;YAC/C,UAAU,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,KAAK,MAAM,CAAC;QACrD,CAAC;aAAM,CAAC;YACN,UAAU,CAAC,UAAU,GAAG,IAAI,CAAC;QAC/B,CAAC;IACH,CAAC;IAED,uBAAuB;IACvB,IAAI,IAAI,CAAC,cAAc,KAAK,SAAS;QACnC,UAAU,CAAC,cAAc,GAAG,IAAI,CAAC,cAAgC,CAAC;IACpE,IAAI,IAAI,CAAC,cAAc,KAAK,SAAS;QACnC,UAAU,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC;IAElD,8BAA8B;IAC9B,UAAU,CAAC,SAAS,GAAG,IAAI,IAAI,EAAE,CAAC;IAElC,MAAM,gBAAgB,GAAG,MAAM,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC;QACrD,KAAK,EAAE,EAAE,EAAE,EAAE;QACb,IAAI,EAAE,UAAU;KACjB,CAAC,CAAC;IAEH,MAAM,YAAY,GAAG,MAAM,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC;QACtD,KAAK,EAAE;YACL,KAAK,EAAE,OAAO;YACd,WAAW,EAAE,EAAE,CAAC,QAAQ,EAAE;YAC1B,QAAQ,EAAE;gBACR,EAAE,EAAE,IAAI;aACT;SACF;KACF,CAAC,CAAC;IACH,IAAI,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;QAC5B,6EAA6E;QAC7E,MAAM,MAAM,CAAC,YAAY,CAAC;YACxB,MAAM,CAAC,gBAAgB,CAAC,UAAU,CAAC;gBACjC,IAAI,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;oBAC7B,cAAc,EAAE,CAAC,CAAC,EAAE;oBACpB,MAAM;oBACN,MAAM,EAAE,IAAI,IAAI,EAAE;iBACnB,CAAC,CAAC;aACJ,CAAC;YACF,MAAM,CAAC,oBAAoB,CAAC,UAAU,CAAC;gBACrC,IAAI,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;oBAC7B,cAAc,EAAE,CAAC,CAAC,EAAE;oBACpB,MAAM;oBACN,QAAQ,EAAE,UAAU;oBACpB,WAAW,EAAE,IAAI,IAAI,EAAE;iBACxB,CAAC,CAAC;aACJ,CAAC;SACH,CAAC,CAAC;IACL,CAAC;IACD,OAAO,gBAAgB,CAAC;AAC1B,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,uBAAuB,CAAC,EAAU;IACtD,OAAO,MAAM,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC;QACnC,KAAK,EAAE,EAAE,EAAE,EAAE;QACb,IAAI,EAAE;YACJ,MAAM,EAAE,UAAU;SACnB;KACF,CAAC,CAAC;AACL,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,uBAAuB,CAAC,EAAU;IACtD,OAAO,MAAM,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC;QACnC,KAAK,EAAE,EAAE,EAAE,EAAE;QACb,IAAI,EAAE;YACJ,MAAM,EAAE,QAAQ;SACjB;KACF,CAAC,CAAC;AACL,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,sBAAsB,CAAC,EAAU;IACrD,OAAO,MAAM,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC;QACnC,KAAK,EAAE,EAAE,EAAE,EAAE;KACd,CAAC,CAAC;AACL,CAAC;AAmBD,6CAA6C;AAC7C,MAAM,qBAAqB,GAAG;IAC5B,EAAE,EAAE,IAAI;IACR,IAAI,EAAE,IAAI;IACV,IAAI,EAAE,IAAI;IACV,IAAI,EAAE,IAAI;IACV,WAAW,EAAE,IAAI;IACjB,IAAI,EAAE,IAAI;IACV,aAAa,EAAE,IAAI;IACnB,YAAY,EAAE,IAAI;IAClB,MAAM,EAAE,IAAI;IACZ,cAAc,EAAE,IAAI;IACpB,KAAK,EAAE,IAAI;IACX,SAAS,EAAE,IAAI;IACf,SAAS,EAAE,IAAI;IACf,IAAI,EAAE,IAAI;IACV,KAAK,EAAE,IAAI;IACX,IAAI,EAAE,IAAI;IACV,KAAK,EAAE,IAAI;IACX,YAAY,EAAE,IAAI;IAClB,YAAY,EAAE,IAAI;IAClB,iBAAiB,EAAE,IAAI;IACvB,YAAY,EAAE,IAAI;IAClB,YAAY,EAAE,IAAI;IAClB,MAAM,EAAE;QACN,MAAM,EAAE;YACN,qBAAqB,EAAE,IAAI;YAC3B,SAAS,EAAE,IAAI;YACf,YAAY,EAAE,IAAI;YAClB,aAAa,EAAE,IAAI;YACnB,WAAW,EAAE,IAAI;YACjB,WAAW,EAAE,IAAI;SAClB;KACF;CACF,CAAC;AAEF,MAAM,CAAC,KAAK,UAAU,sBAAsB,CAAC,EAC3C,MAAM,EACN,YAAY,EACZ,UAAU,EACV,aAAa,EACb,iBAAiB,GACY;IAC7B,4DAA4D;IAC5D,MAAM,eAAe,GAAG,UAAU;QAChC,CAAC,CAAC;YACE,EAAE,EAAE;gBACF,EAAE,IAAI,EAAE,EAAE,QAAQ,EAAE,UAAU,EAAE,IAAI,EAAE,aAAa,EAAE,EAAE;gBACvD,EAAE,IAAI,EAAE,EAAE,QAAQ,EAAE,UAAU,EAAE,IAAI,EAAE,aAAa,EAAE,EAAE;aACxD;SACF;QACH,CAAC,CAAC,EAAE,CAAC;IAEP,4BAA4B;IAC5B,MAAM,WAAW,GAA4B,EAAE,GAAG,eAAe,EAAE,CAAC;IAEpE,iCAAiC;IACjC,IAAI,MAAM,KAAK,SAAS,EAAE,CAAC;QACzB,WAAW,CAAC,cAAc,GAAG,SAAS,CAAC;IACzC,CAAC;IAED,iCAAiC;IACjC,IAAI,YAAY,EAAE,CAAC;QACjB,IAAI,CAAC;YACH,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;YAEzC,4CAA4C;YAC5C,IAAI,OAAO,CAAC,aAAa,IAAI,OAAO,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBAC9D,WAAW,CAAC,YAAY,GAAG;oBACzB,EAAE,EAAE,OAAO,CAAC,aAAgC;iBAC7C,CAAC;YACJ,CAAC;YAED,6CAA6C;YAC7C,IAAI,OAAO,CAAC,cAAc,IAAI,OAAO,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBAChE,WAAW,CAAC,aAAa,GAAG;oBAC1B,EAAE,EAAE,OAAO,CAAC,cAAiC;iBAC9C,CAAC;YACJ,CAAC;YAED,wCAAwC;YACxC,IAAI,OAAO,CAAC,UAAU,IAAI,OAAO,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBACxD,WAAW,CAAC,iBAAiB,GAAG;oBAC9B,EAAE,EAAE,OAAO,CAAC,UAAyB;iBACtC,CAAC;YACJ,CAAC;YAED,sCAAsC;YACtC,IAAI,OAAO,CAAC,QAAQ,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBACpD,WAAW,CAAC,cAAc,GAAG;oBAC3B,EAAE,EAAE,OAAO,CAAC,QAA4B;iBACzC,CAAC;YACJ,CAAC;YACD,6CAA6C;YAC7C,IAAI,OAAO,CAAC,gBAAgB,IAAI,OAAO,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBACpE,WAAW,CAAC,MAAM,GAAG;oBACnB,EAAE,EAAE,OAAO,CAAC,gBAAwC;iBACrD,CAAC;YACJ,CAAC;QACH,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO,CAAC,KAAK,CAAC,wBAAwB,EAAE,KAAK,CAAC,CAAC;YAC/C,MAAM,IAAI,KAAK,CAAC,iBAAiB,CAAC,CAAC;QACrC,CAAC;IACH,CAAC;IAED,gDAAgD;IAChD,MAAM,KAAK,GAAG,MAAM,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,KAAK,EAAE,WAAW,EAAE,CAAC,CAAC;IAEnE,8BAA8B;IAC9B,MAAM,oBAAoB,GACxB,MAAM,KAAK,SAAS;QACpB,UAAU,CAAC,IAAI,EAAE,KAAK,EAAE;QACxB,CAAC,YAAY,IAAI,YAAY,KAAK,IAAI,CAAC,CAAC;IAE1C,2CAA2C;IAC3C,MAAM,IAAI,GAAG,oBAAoB;QAC/B,CAAC,CAAC,CAAC;QACH,CAAC,CAAC,CAAC,aAAa,GAAG,CAAC,CAAC,GAAG,iBAAiB,CAAC;IAC5C,MAAM,IAAI,GAAG,oBAAoB,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,iBAAiB,CAAC;IAClE,MAAM,aAAa,GAAG,oBAAoB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC;IAC/D,MAAM,iBAAiB,GAAG,oBAAoB,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,iBAAiB,CAAC;IAC3E,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,iBAAiB,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;IAEpE,uBAAuB;IACvB,MAAM,SAAS,GAAG,MAAM,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC;QAChD,KAAK,EAAE,WAAW;QAClB,IAAI;QACJ,GAAG,CAAC,IAAI,KAAK,SAAS,IAAI,EAAE,IAAI,EAAE,CAAC;QACnC,MAAM,EAAE,qBAAqB;QAC7B,OAAO,EAAE;YACP,IAAI,EAAE,KAAK;SACZ;KACF,CAAC,CAAC;IAEH,0CAA0C;IAC1C,MAAM,gBAAgB,GAAG,MAAM,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC;QACpD,KAAK,EAAE;YACL,cAAc,EAAE,SAAS;SAC1B;KACF,CAAC,CAAC;IAEH,OAAO;QACL,SAAS;QACT,KAAK;QACL,gBAAgB;QAChB,IAAI,EAAE,aAAa;QACnB,QAAQ,EAAE,iBAAiB;QAC3B,UAAU;KACX,CAAC;AACJ,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,uBAAuB,CAAC,EAAU;IACtD,OAAO,MAAM,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC;QACvC,KAAK,EAAE,EAAE,EAAE,EAAE;QACb,OAAO,EAAE;YACP,YAAY,EAAE,IAAI;YAClB,SAAS,EAAE;gBACT,MAAM,EAAE;oBACN,SAAS,EAAE,IAAI;oBACf,QAAQ,EAAE,IAAI;iBACf;aACF;SACF;KACF,CAAC,CAAC;AACL,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,0BAA0B;IAC9C,OAAO,MAAM,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC;QACrC,MAAM,EAAE;YACN,EAAE,EAAE,IAAI;YACR,IAAI,EAAE,IAAI;YACV,cAAc,EAAE,IAAI;SACrB;QACD,OAAO,EAAE;YACP,IAAI,EAAE,KAAK;SACZ;KACF,CAAC,CAAC;AACL,CAAC","debug_id":"ee216b4d-9e00-570a-a171-a7aa4492f2ae"}