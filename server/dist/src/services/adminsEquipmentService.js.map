{"version":3,"file":"adminsEquipmentService.js","sources":["src/services/adminsEquipmentService.ts"],"sourceRoot":"/","sourcesContent":["import type {\r\n  ApprovalStatus,\r\n  Condition,\r\n  EquipmentState,\r\n  EquipmentTags,\r\n  FormTemplateStatus,\r\n  OwnershipType,\r\n  Prisma,\r\n} from \"../../generated/prisma/index.js\";\r\nimport prisma from \"../lib/prisma.js\";\r\n\r\nexport async function createEquipmentService(\r\n  equipmentData: {\r\n    code: string;\r\n    name: string;\r\n    description?: string;\r\n    memo?: string;\r\n    ownershipType?: string | null;\r\n    make?: string | null;\r\n    model?: string | null;\r\n    year?: string | null;\r\n    color?: string | null;\r\n    serialNumber?: string | null;\r\n    acquiredDate?: Date | null;\r\n    acquiredCondition?: string | null;\r\n    licensePlate?: string | null;\r\n    licenseState?: string | null;\r\n    equipmentTag: string;\r\n    status?: string;\r\n    state?: string;\r\n    approvalStatus?: string;\r\n    isDisabledByAdmin?: boolean;\r\n    overWeight: boolean | null;\r\n    currentWeight: number | null;\r\n  },\r\n  createdById: string,\r\n  qrId: string\r\n) {\r\n  return await prisma.equipment.create({\r\n    data: {\r\n      qrId,\r\n      code: equipmentData.code || \"\",\r\n      name: equipmentData.name,\r\n      description: equipmentData.description || \"\",\r\n      memo: equipmentData.memo || \"\",\r\n      ownershipType: (equipmentData.ownershipType as OwnershipType) || null,\r\n      acquiredDate: equipmentData.acquiredDate ?? null,\r\n      acquiredCondition: (equipmentData.acquiredCondition as Condition) || null,\r\n      equipmentTag: equipmentData.equipmentTag as EquipmentTags,\r\n      state: (equipmentData.state as EquipmentState) || \"AVAILABLE\",\r\n      approvalStatus:\r\n        (equipmentData.approvalStatus as ApprovalStatus) || \"APPROVED\",\r\n      status: (equipmentData.status as FormTemplateStatus) || \"ACTIVE\",\r\n      overWeight: equipmentData.overWeight || false,\r\n      currentWeight: equipmentData.currentWeight || 0,\r\n      createdById,\r\n      // Add vehicle-specific fields directly to the equipment\r\n      make: equipmentData.make ?? null,\r\n      model: equipmentData.model ?? null,\r\n      year: equipmentData.year ?? null,\r\n      color: equipmentData.color ?? null,\r\n      serialNumber: equipmentData.serialNumber ?? null,\r\n      licensePlate: equipmentData.licensePlate ?? null,\r\n      licenseState: equipmentData.licenseState ?? null,\r\n    },\r\n  });\r\n}\r\n\r\nexport async function editEquipmentService(\r\n  id: string,\r\n  body: Prisma.EquipmentUpdateInput,\r\n  userId: string\r\n) {\r\n  const updateData: Prisma.EquipmentUpdateInput = {};\r\n\r\n  // Process all possible equipment fields from body\r\n  if (body.name !== undefined) updateData.name = body.name;\r\n  if (body.code !== undefined) updateData.code = body.code;\r\n  if (body.description !== undefined)\r\n    updateData.description = body.description || \"\";\r\n  if (body.memo !== undefined) updateData.memo = body.memo;\r\n  if (body.equipmentTag !== undefined)\r\n    updateData.equipmentTag = body.equipmentTag as EquipmentTags;\r\n  if (body.state !== undefined) updateData.state = body.state as EquipmentState;\r\n  if (body.status !== undefined)\r\n    updateData.status = body.status as FormTemplateStatus;\r\n  if (body.ownershipType !== undefined)\r\n    updateData.ownershipType = (body.ownershipType as OwnershipType) || null;\r\n  if (body.acquiredCondition !== undefined)\r\n    updateData.acquiredCondition =\r\n      (body.acquiredCondition as Condition) || null;\r\n  if (body.serialNumber !== undefined)\r\n    updateData.serialNumber = body.serialNumber;\r\n  if (body.color !== undefined) updateData.color = body.color;\r\n\r\n  // Vehicle/equipment specific fields\r\n  if (body.make !== undefined) updateData.make = body.make;\r\n  if (body.model !== undefined) updateData.model = body.model;\r\n  if (body.year !== undefined) updateData.year = body.year;\r\n  if (body.licensePlate !== undefined)\r\n    updateData.licensePlate = body.licensePlate;\r\n  if (body.licenseState !== undefined)\r\n    updateData.licenseState = body.licenseState;\r\n\r\n  // Handle date fields\r\n  if (body.acquiredDate !== undefined) {\r\n    if (\r\n      typeof body.acquiredDate === \"string\" ||\r\n      typeof body.acquiredDate === \"number\" ||\r\n      body.acquiredDate instanceof Date\r\n    ) {\r\n      updateData.acquiredDate = body.acquiredDate\r\n        ? new Date(body.acquiredDate)\r\n        : null;\r\n    } else {\r\n      updateData.acquiredDate = null;\r\n    }\r\n  }\r\n  if (body.registrationExpiration !== undefined) {\r\n    const regExpValue = body.registrationExpiration;\r\n    if (\r\n      regExpValue &&\r\n      regExpValue !== \"null\" &&\r\n      regExpValue !== \"undefined\" &&\r\n      (typeof regExpValue === \"string\" ||\r\n        typeof regExpValue === \"number\" ||\r\n        regExpValue instanceof Date)\r\n    ) {\r\n      updateData.registrationExpiration = new Date(regExpValue);\r\n    } else {\r\n      updateData.registrationExpiration = null;\r\n    }\r\n  }\r\n\r\n  // Handle numeric fields\r\n  if (body.currentWeight !== undefined) {\r\n    const weightValue = body.currentWeight;\r\n    if (typeof weightValue === \"string\") {\r\n      updateData.currentWeight = weightValue ? parseFloat(weightValue) || 0 : 0;\r\n    } else if (typeof weightValue === \"number\") {\r\n      updateData.currentWeight = weightValue;\r\n    } else {\r\n      // If it's an object (e.g., NullableFloatFieldUpdateOperationsInput), assign as is\r\n      updateData.currentWeight = weightValue;\r\n    }\r\n  }\r\n\r\n  // Handle boolean fields\r\n  if (body.overWeight !== undefined) {\r\n    if (typeof body.overWeight === \"boolean\") {\r\n      updateData.overWeight = body.overWeight;\r\n    } else if (typeof body.overWeight === \"string\") {\r\n      updateData.overWeight = body.overWeight === \"true\";\r\n    } else {\r\n      updateData.overWeight = null;\r\n    }\r\n  }\r\n\r\n  // Handle status fields\r\n  if (body.approvalStatus !== undefined)\r\n    updateData.approvalStatus = body.approvalStatus as ApprovalStatus;\r\n  if (body.creationReason !== undefined)\r\n    updateData.creationReason = body.creationReason;\r\n\r\n  // Always update the timestamp\r\n  updateData.updatedAt = new Date();\r\n\r\n  const updatedEquipment = await prisma.equipment.update({\r\n    where: { id },\r\n    data: updateData,\r\n  });\r\n\r\n  const notification = await prisma.notification.findMany({\r\n    where: {\r\n      topic: \"items\",\r\n      referenceId: id.toString(),\r\n      Response: {\r\n        is: null,\r\n      },\r\n    },\r\n  });\r\n  if (notification.length > 0) {\r\n    // Wrap notificationRead and notificationResponse createMany in a transaction\r\n    await prisma.$transaction([\r\n      prisma.notificationRead.createMany({\r\n        data: notification.map((n) => ({\r\n          notificationId: n.id,\r\n          userId,\r\n          readAt: new Date(),\r\n        })),\r\n      }),\r\n      prisma.notificationResponse.createMany({\r\n        data: notification.map((n) => ({\r\n          notificationId: n.id,\r\n          userId,\r\n          response: \"Approved\",\r\n          respondedAt: new Date(),\r\n        })),\r\n      }),\r\n    ]);\r\n  }\r\n  return updatedEquipment;\r\n}\r\n\r\nexport async function archiveEquipmentService(id: string) {\r\n  return await prisma.equipment.update({\r\n    where: { id },\r\n    data: {\r\n      status: \"ARCHIVED\",\r\n    },\r\n  });\r\n}\r\n\r\nexport async function restoreEquipmentService(id: string) {\r\n  return await prisma.equipment.update({\r\n    where: { id },\r\n    data: {\r\n      status: \"ACTIVE\",\r\n    },\r\n  });\r\n}\r\n\r\nexport async function deleteEquipmentService(id: string) {\r\n  return await prisma.equipment.delete({\r\n    where: { id },\r\n  });\r\n}\r\n\r\nexport interface GetAllEquipmentServiceParams {\r\n  status?: string;\r\n  filtersParam?: string;\r\n  searchTerm: string;\r\n  requestedPage: number;\r\n  requestedPageSize: number;\r\n}\r\n\r\nexport interface GetAllEquipmentServiceResult {\r\n  equipment: any[];\r\n  total: number;\r\n  pendingEquipment: number;\r\n  page: number;\r\n  pageSize: number;\r\n  totalPages: number;\r\n}\r\n\r\n// Common select fields for equipment queries\r\nconst equipmentSelectFields = {\r\n  id: true,\r\n  qrId: true,\r\n  code: true,\r\n  name: true,\r\n  description: true,\r\n  memo: true,\r\n  ownershipType: true,\r\n  equipmentTag: true,\r\n  status: true,\r\n  approvalStatus: true,\r\n  state: true,\r\n  createdAt: true,\r\n  updatedAt: true,\r\n  make: true,\r\n  model: true,\r\n  year: true,\r\n  color: true,\r\n  serialNumber: true,\r\n  acquiredDate: true,\r\n  acquiredCondition: true,\r\n  licensePlate: true,\r\n  licenseState: true,\r\n  _count: {\r\n    select: {\r\n      EmployeeEquipmentLogs: true,\r\n      TascoLogs: true,\r\n      HauledInLogs: true,\r\n      UsedAsTrailer: true,\r\n      UsedAsTruck: true,\r\n      Maintenance: true,\r\n    },\r\n  },\r\n};\r\n\r\nexport async function getAllEquipmentService({\r\n  status,\r\n  filtersParam,\r\n  searchTerm,\r\n  requestedPage,\r\n  requestedPageSize,\r\n}: GetAllEquipmentServiceParams): Promise<GetAllEquipmentServiceResult> {\r\n  // Base search condition that will be applied to all queries\r\n  const searchCondition = searchTerm\r\n    ? {\r\n        OR: [\r\n          { name: { contains: searchTerm, mode: \"insensitive\" } },\r\n          { code: { contains: searchTerm, mode: \"insensitive\" } },\r\n        ],\r\n      }\r\n    : {};\r\n\r\n  // Parse filters if provided\r\n  const whereClause: Record<string, unknown> = { ...searchCondition };\r\n\r\n  // Add status filter if specified\r\n  if (status === \"pending\") {\r\n    whereClause.approvalStatus = \"PENDING\";\r\n  }\r\n\r\n  // Add custom filters if provided\r\n  if (filtersParam) {\r\n    try {\r\n      const filters = JSON.parse(filtersParam);\r\n\r\n      // Add filter for equipment tags if provided\r\n      if (filters.equipmentTags && filters.equipmentTags.length > 0) {\r\n        whereClause.equipmentTag = {\r\n          in: filters.equipmentTags as EquipmentTags[],\r\n        };\r\n      }\r\n\r\n      // Add filter for ownership types if provided\r\n      if (filters.ownershipTypes && filters.ownershipTypes.length > 0) {\r\n        whereClause.ownershipType = {\r\n          in: filters.ownershipTypes as OwnershipType[],\r\n        };\r\n      }\r\n\r\n      // Add filter for conditions if provided\r\n      if (filters.conditions && filters.conditions.length > 0) {\r\n        whereClause.acquiredCondition = {\r\n          in: filters.conditions as Condition[],\r\n        };\r\n      }\r\n\r\n      // Add filter for statuses if provided\r\n      if (filters.statuses && filters.statuses.length > 0) {\r\n        whereClause.approvalStatus = {\r\n          in: filters.statuses as ApprovalStatus[],\r\n        };\r\n      }\r\n      // Add filter for activity status if provided\r\n      if (filters.activityStatuses && filters.activityStatuses.length > 0) {\r\n        whereClause.status = {\r\n          in: filters.activityStatuses as FormTemplateStatus[],\r\n        };\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error parsing filters:\", error);\r\n      throw new Error(\"Invalid filters\");\r\n    }\r\n  }\r\n\r\n  // Count total matching records (for pagination)\r\n  const total = await prisma.equipment.count({ where: whereClause });\r\n\r\n  // Calculate pagination values\r\n  const isPaginationDisabled =\r\n    status === \"pending\" ||\r\n    searchTerm.trim() !== \"\" ||\r\n    (filtersParam && filtersParam !== \"{}\");\r\n\r\n  // Either use pagination or get all results\r\n  const skip = isPaginationDisabled\r\n    ? 0\r\n    : (requestedPage - 1) * requestedPageSize;\r\n  const take = isPaginationDisabled ? undefined : requestedPageSize;\r\n  const effectivePage = isPaginationDisabled ? 1 : requestedPage;\r\n  const effectivePageSize = isPaginationDisabled ? total : requestedPageSize;\r\n  const totalPages = Math.ceil(total / (effectivePageSize || 1)) || 1;\r\n\r\n  // Fetch equipment data\r\n  const equipment = await prisma.equipment.findMany({\r\n    where: whereClause,\r\n    skip,\r\n    ...(take !== undefined && { take }),\r\n    select: equipmentSelectFields,\r\n    orderBy: {\r\n      code: \"asc\",\r\n    },\r\n  });\r\n\r\n  // Count pending equipment for badge count\r\n  const pendingEquipment = await prisma.equipment.count({\r\n    where: {\r\n      approvalStatus: \"PENDING\",\r\n    },\r\n  });\r\n\r\n  return {\r\n    equipment,\r\n    total,\r\n    pendingEquipment,\r\n    page: effectivePage,\r\n    pageSize: effectivePageSize,\r\n    totalPages,\r\n  };\r\n}\r\n\r\nexport async function getEquipmentByIdService(id: string) {\r\n  return await prisma.equipment.findUnique({\r\n    where: { id },\r\n    include: {\r\n      DocumentTags: true,\r\n      createdBy: {\r\n        select: {\r\n          firstName: true,\r\n          lastName: true,\r\n        },\r\n      },\r\n    },\r\n  });\r\n}\r\n\r\nexport async function getEquipmentSummaryService() {\r\n  return await prisma.equipment.findMany({\r\n    select: {\r\n      id: true,\r\n      name: true,\r\n      approvalStatus: true,\r\n    },\r\n    orderBy: {\r\n      name: \"asc\",\r\n    },\r\n  });\r\n}\r\n"],"names":[],"mappings":"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","debug_id":"32c97159-1c3c-5738-a6d3-678123eaa9ba"}