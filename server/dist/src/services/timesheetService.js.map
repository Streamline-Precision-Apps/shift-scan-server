{"version":3,"file":"timesheetService.js","sources":["src/services/timesheetService.ts"],"sourceRoot":"/","sourcesContent":["import { formatISO } from \"date-fns\";\nimport type { EquipmentState, Prisma } from \"../../generated/prisma/client.js\";\nimport type {\n  GeneralTimesheetInput,\n  MechanicTimesheetInput,\n  TascoTimesheetInput,\n  TruckTimesheetInput,\n} from \"../controllers/timesheetController.js\";\nimport prisma from \"../lib/prisma.js\";\n\nexport async function updateTimesheetService({\n  id,\n  editorId,\n  changes,\n  changeReason,\n  numberOfChanges,\n  startTime,\n  endTime,\n  Jobsite,\n  CostCode,\n  comment,\n}: {\n  id: number;\n  editorId: string;\n  changes: string;\n  changeReason?: string;\n  numberOfChanges?: number;\n  startTime: string;\n  endTime?: string;\n  Jobsite?: string;\n  CostCode?: string;\n  comment?: string;\n}) {\n  try {\n    const parsedChanges =\n      changes && typeof changes === \"string\"\n        ? JSON.parse(changes)\n        : changes || {};\n    const transactionResult = await prisma.$transaction(async (tx) => {\n      let editorLog = null;\n      let userFullname = null;\n      let editorFullName = null;\n\n      if (parsedChanges && Object.keys(parsedChanges).length > 0) {\n        editorLog = await tx.timeSheetChangeLog.create({\n          data: {\n            timeSheetId: id,\n            changedBy: editorId,\n            changes: parsedChanges,\n            changeReason: changeReason || \"No reason provided\",\n            numberOfChanges: numberOfChanges || 0,\n          },\n          include: {\n            User: {\n              select: {\n                firstName: true,\n                lastName: true,\n              },\n            },\n          },\n        });\n      }\n      editorFullName = editorLog\n        ? `${editorLog.User.firstName} ${editorLog.User.lastName}`\n        : \"Unknown Editor\";\n\n      // Build update data object dynamically to only update provided fields\n      const updateData: Prisma.TimeSheetUpdateInput = {};\n      if (typeof startTime !== \"undefined\") {\n        updateData.startTime = startTime;\n      }\n      if (typeof endTime !== \"undefined\") {\n        updateData.endTime = endTime ? new Date(endTime) : null;\n      }\n      if (typeof Jobsite !== \"undefined\" && Jobsite) {\n        updateData.Jobsite = { connect: { id: Jobsite } }; // or { id: Jobsite } if you use IDs\n      }\n      if (typeof CostCode !== \"undefined\" && CostCode) {\n        updateData.CostCode = { connect: { name: CostCode } }; // or { id: CostCode } if you use IDs\n      }\n      if (typeof comment !== \"undefined\") {\n        updateData.comment = comment;\n      }\n      const updated = await tx.timeSheet.update({\n        where: { id },\n        data: updateData,\n        include: {\n          Jobsite: true,\n          CostCode: true,\n          ChangeLogs: true,\n          User: {\n            select: {\n              firstName: true,\n              lastName: true,\n            },\n          },\n        },\n      });\n      userFullname = updated\n        ? `${updated.User.firstName} ${updated.User.lastName}`\n        : \"Unknown User\";\n\n      return { updated, editorLog, userFullname, editorFullName };\n    });\n\n    return {\n      success: true,\n      timesheet: transactionResult.updated,\n      editorLog: transactionResult.editorLog,\n      userFullname: transactionResult.userFullname,\n      editorFullName: transactionResult.editorFullName,\n    };\n  } catch (error) {\n    let message = \"Failed to update timesheet.\";\n    if (error instanceof Error) {\n      message = error.message;\n    }\n    return { error: message };\n  }\n}\n\nexport async function getUserTimesheetsByDate({\n  employeeId,\n  dateParam,\n}: {\n  employeeId: string;\n  dateParam?: string | undefined;\n}) {\n  let start: Date | undefined = undefined;\n  let end: Date | undefined = undefined;\n  if (dateParam) {\n    start = new Date(dateParam + \"T00:00:00.000Z\");\n    end = new Date(dateParam + \"T23:59:59.999Z\");\n  }\n\n  // Only include date filter if both start and end are defined\n  const where: Prisma.TimeSheetWhereInput = {\n    userId: employeeId,\n    status: {\n      not: \"DRAFT\",\n    },\n    ...(start && end ? { date: { gte: start, lte: end } } : {}),\n  };\n\n  const timesheetData = await prisma.timeSheet.findMany({\n    where,\n    select: {\n      id: true,\n      startTime: true,\n      endTime: true,\n      status: true,\n      workType: true,\n      Jobsite: {\n        select: {\n          name: true,\n        },\n      },\n      CostCode: {\n        select: {\n          name: true,\n        },\n      },\n    },\n    orderBy: { date: \"desc\" },\n  });\n  return timesheetData;\n}\n\nexport async function getTimesheetDetailsManager({\n  timesheetId,\n}: {\n  timesheetId: number;\n}) {\n  const timesheet = await prisma.timeSheet.findUnique({\n    where: { id: timesheetId },\n    select: {\n      id: true,\n      comment: true,\n      startTime: true,\n      endTime: true,\n      Jobsite: {\n        select: {\n          id: true,\n          name: true,\n        },\n      },\n      CostCode: {\n        select: {\n          id: true,\n          name: true,\n        },\n      },\n    },\n  });\n  return timesheet;\n}\n\n// Get all timesheets for all users in a manager's crew\nexport async function getManagerCrewTimesheets({\n  managerId,\n}: {\n  managerId: string;\n}) {\n  // Find all users in crews led by this manager\n  const crew = await prisma.user.findMany({\n    where: {\n      Crews: {\n        some: {\n          leadId: managerId,\n        },\n      },\n    },\n    select: {\n      id: true,\n      firstName: true,\n      lastName: true,\n      clockedIn: true,\n      Crews: {\n        select: {\n          id: true,\n          leadId: true,\n        },\n      },\n\n      TimeSheets: {\n        where: {\n          status: \"PENDING\",\n          endTime: { not: null },\n        },\n        select: {\n          id: true,\n          date: true,\n          startTime: true,\n          endTime: true,\n          jobsiteId: true,\n          workType: true,\n          Jobsite: {\n            select: {\n              name: true,\n            },\n          },\n          CostCode: {\n            select: {\n              name: true,\n            },\n          },\n          TascoLogs: {\n            select: {\n              id: true,\n              shiftType: true,\n              laborType: true,\n              materialType: true,\n              LoadQuantity: true,\n              Equipment: {\n                select: {\n                  id: true,\n                  name: true,\n                },\n              },\n              RefuelLogs: {\n                select: {\n                  id: true,\n                  gallonsRefueled: true,\n                  TascoLog: {\n                    select: {\n                      Equipment: {\n                        select: {\n                          name: true,\n                        },\n                      },\n                    },\n                  },\n                },\n              },\n            },\n          },\n          TruckingLogs: {\n            select: {\n              id: true,\n              laborType: true,\n              Truck: {\n                select: { id: true, name: true },\n              },\n              Trailer: {\n                select: { id: true, name: true },\n              },\n              Equipment: {\n                select: {\n                  id: true,\n                  name: true,\n                },\n              },\n              startingMileage: true,\n              endingMileage: true,\n              Materials: {\n                select: {\n                  id: true,\n                  name: true,\n                  quantity: true,\n                  loadType: true,\n                  unit: true,\n                  LocationOfMaterial: true,\n                  materialWeight: true,\n                },\n              },\n              EquipmentHauled: {\n                select: {\n                  id: true,\n                  source: true,\n                  destination: true,\n                  Equipment: {\n                    select: {\n                      name: true,\n                    },\n                  },\n                },\n              },\n              RefuelLogs: {\n                select: {\n                  id: true,\n                  gallonsRefueled: true,\n                  milesAtFueling: true,\n                  TruckingLog: {\n                    select: {\n                      Equipment: {\n                        select: {\n                          name: true,\n                        },\n                      },\n                    },\n                  },\n                },\n              },\n              StateMileages: {\n                select: {\n                  id: true,\n                  state: true,\n                  stateLineMileage: true,\n                  TruckingLog: {\n                    select: {\n                      Equipment: {\n                        select: {\n                          name: true,\n                        },\n                      },\n                    },\n                  },\n                },\n              },\n            },\n          },\n          EmployeeEquipmentLogs: {\n            select: {\n              id: true,\n              startTime: true,\n              endTime: true,\n              Equipment: {\n                select: {\n                  id: true,\n                  name: true,\n                },\n              },\n              RefuelLog: {\n                select: {\n                  id: true,\n                  gallonsRefueled: true,\n                },\n              },\n            },\n          },\n          status: true,\n        },\n      },\n    },\n  });\n  return crew;\n}\n// Batch approve timesheets and handle notifications\nexport async function approveTimesheetsBatchService({\n  userId,\n  timesheetIds,\n  statusComment,\n  editorId,\n}: {\n  userId: string;\n  timesheetIds: number[];\n  statusComment: string;\n  editorId: string;\n}) {\n  try {\n    // Update all matching timesheets with the same values\n    await prisma.timeSheet.updateMany({\n      where: {\n        id: { in: timesheetIds },\n        userId,\n      },\n      data: {\n        status: \"APPROVED\",\n        statusComment,\n      },\n    });\n\n    // check for notifications\n    const notifications = await prisma.notification.findMany({\n      where: {\n        topic: \"timecard-submission\",\n        referenceId: { in: timesheetIds.map(String) },\n        Response: { is: null },\n      },\n    });\n\n    if (notifications.length > 0) {\n      // Filter out notifications that already have a notificationRead for this user\n      const existingReads = await prisma.notificationRead.findMany({\n        where: {\n          notificationId: { in: notifications.map((n) => n.id) },\n          userId: editorId,\n        },\n        select: { notificationId: true },\n      });\n      const alreadyReadIds = new Set(\n        existingReads.map((r) => r.notificationId)\n      );\n      const unreadNotifications = notifications.filter(\n        (n) => !alreadyReadIds.has(n.id)\n      );\n      await prisma.$transaction(async (tx) => {\n        if (unreadNotifications.length > 0) {\n          await tx.notificationRead.createMany({\n            data: unreadNotifications.map((n) => ({\n              notificationId: n.id,\n              userId: editorId,\n              readAt: new Date(),\n            })),\n            skipDuplicates: true,\n          });\n        }\n        await tx.notificationResponse.createMany({\n          data: notifications.map((n) => ({\n            notificationId: n.id,\n            userId: editorId,\n            response: \"Approved\",\n            respondedAt: new Date(),\n          })),\n          skipDuplicates: true,\n        });\n      });\n    }\n    return { success: true };\n  } catch (error) {\n    console.error(\"Error updating timesheets:\", error);\n    return { success: false, error: \"Failed to update timesheets\" };\n  }\n}\n\nexport async function createGeneralTimesheetService({\n  data,\n  type,\n}: {\n  data: GeneralTimesheetInput;\n  type?: string;\n}) {\n  const createdTimeSheet = await prisma.$transaction(async (prisma) => {\n    // Build create data\n    const createData: any = {\n      date: data.date,\n      Jobsite: { connect: { id: data.jobsiteId } },\n      User: { connect: { id: data.userId } },\n      CostCode: { connect: { name: data.costCode } },\n      startTime: data.startTime,\n      workType: \"LABOR\",\n      status: \"DRAFT\",\n      clockInLat: data.clockInLat || null,\n      clockInLng: data.clockInLong || null,\n    };\n\n    if (data.sessionId !== null && data.sessionId !== undefined) {\n      createData.Session = {\n        connect: {\n          id: data.sessionId,\n        },\n      };\n    }\n\n    // Step 1: Create a new TimeSheet\n    const createdTimeSheet = await prisma.timeSheet.create({\n      data: createData,\n      include: {\n        User: {\n          select: {\n            firstName: true,\n            lastName: true,\n          },\n        },\n      },\n    });\n\n    // Update user status if timesheet created successfully\n    if (createdTimeSheet) {\n      await prisma.user.update({\n        where: { id: data.userId },\n        data: {\n          clockedIn: true,\n        },\n      });\n    }\n    if (type === \"switchJobs\" && data.previousTimeSheetId && data.endTime) {\n      await prisma.timeSheet.update({\n        where: { id: data.previousTimeSheetId },\n        data: {\n          endTime: formatISO(data.endTime),\n          comment: data.previoustimeSheetComments || null,\n          status: \"PENDING\",\n          clockOutLat: data.clockOutLat || null,\n          clockOutLng: data.clockOutLong || null,\n        },\n      });\n    }\n    return createdTimeSheet;\n  });\n  return createdTimeSheet;\n}\n\nexport async function createMechanicTimesheetService({\n  data,\n  type,\n}: {\n  data: MechanicTimesheetInput;\n  type?: string;\n}) {\n  // Implementation for creating a mechanic timesheet\n  const createdTimeCard = await prisma.$transaction(async (prisma) => {\n    // Build create data\n    const createData: any = {\n      date: formatISO(data.date),\n      Jobsite: { connect: { id: data.jobsiteId } },\n      User: { connect: { id: data.userId } },\n      CostCode: { connect: { name: data.costCode } },\n      startTime: formatISO(data.startTime),\n      workType: \"MECHANIC\",\n      status: \"DRAFT\",\n      clockInLat: data.clockInLat || null,\n      clockInLng: data.clockInLong || null,\n    };\n\n    if (data.sessionId !== null && data.sessionId !== undefined) {\n      createData.Session = {\n        connect: {\n          id: data.sessionId,\n        },\n      };\n    }\n\n    // Step 1: Create a new TimeSheet\n    const createdTimeSheet = await prisma.timeSheet.create({\n      data: createData,\n      include: {\n        User: {\n          select: {\n            firstName: true,\n            lastName: true,\n          },\n        },\n      },\n    });\n\n    if (createdTimeSheet) {\n      await prisma.user.update({\n        where: { id: data.userId },\n        data: {\n          clockedIn: true,\n        },\n      });\n    }\n    if (type === \"switchJobs\" && data.previousTimeSheetId && data.endTime) {\n      await prisma.timeSheet.update({\n        where: { id: data.previousTimeSheetId },\n        data: {\n          endTime: formatISO(data.endTime),\n          comment: data.previoustimeSheetComments || null,\n          status: \"PENDING\",\n          clockOutLat: data.clockOutLat || null,\n          clockOutLng: data.clockOutLong || null,\n        },\n      });\n    }\n    return createdTimeSheet;\n  });\n\n  return createdTimeCard;\n}\n\nexport async function createTruckDriverTimesheetService({\n  data,\n  type,\n}: {\n  data: TruckTimesheetInput;\n  type?: string;\n}) {\n  // Implementation for creating a truck driver timesheet\n  return await prisma.$transaction(async (prisma) => {\n    // Build create data\n    const createData: any = {\n      date: formatISO(data.date),\n      Jobsite: { connect: { id: data.jobsiteId } },\n      User: { connect: { id: data.userId } },\n      CostCode: { connect: { name: data.costCode } },\n      startTime: formatISO(data.startTime),\n      workType: \"TRUCK_DRIVER\",\n      status: \"DRAFT\",\n      clockInLat: data.clockInLat || null,\n      clockInLng: data.clockInLong || null,\n      TruckingLogs: {\n        create: {\n          laborType: data.laborType,\n          truckNumber: data.truck,\n          equipmentId: data.equipmentId || null,\n          startingMileage: data.startingMileage,\n          trailerNumber: null,\n        },\n      },\n    };\n\n    if (data.sessionId !== null && data.sessionId !== undefined) {\n      createData.Session = {\n        connect: {\n          id: data.sessionId,\n        },\n      };\n    }\n\n    // Step 1: Create a new TimeSheet\n    const createdTimeSheet = await prisma.timeSheet.create({\n      data: createData,\n      include: {\n        User: {\n          select: {\n            firstName: true,\n            lastName: true,\n          },\n        },\n      },\n    });\n\n    if (createdTimeSheet) {\n      await prisma.user.update({\n        where: { id: data.userId },\n        data: {\n          clockedIn: true,\n        },\n      });\n    }\n    if (type === \"switchJobs\" && data.previousTimeSheetId && data.endTime) {\n      await prisma.timeSheet.update({\n        where: { id: data.previousTimeSheetId },\n        data: {\n          endTime: formatISO(data.endTime),\n          comment: data.previoustimeSheetComments || null,\n          status: \"PENDING\",\n          clockOutLat: data.clockOutLat || null,\n          clockOutLng: data.clockOutLong || null,\n        },\n      });\n    }\n    return createdTimeSheet;\n  });\n}\n\nexport async function createTascoTimesheetService({\n  data,\n  type,\n}: {\n  data: TascoTimesheetInput;\n  type?: string;\n}) {\n  // Implementation for creating a tasco timesheet\n  // Only DB operations in transaction\n  return await prisma.$transaction(async (prisma) => {\n    // Build create data\n    const createData: any = {\n      date: formatISO(data.date),\n      Jobsite: { connect: { id: data.jobsiteId } },\n      User: { connect: { id: data.userId } },\n      CostCode: { connect: { name: data.costCode } },\n      startTime: formatISO(data.startTime),\n      workType: \"TASCO\",\n      status: \"DRAFT\",\n      clockInLat: data.clockInLat || null,\n      clockInLng: data.clockInLong || null,\n      TascoLogs: {\n        create: {\n          shiftType: data.shiftType ?? \"\",\n          laborType: data.laborType ?? \"\",\n          ...(data.equipmentId && {\n            Equipment: { connect: { id: data.equipmentId } },\n          }),\n          ...(data.materialType && {\n            TascoMaterialTypes: { connect: { name: data.materialType } },\n          }),\n        },\n      },\n    };\n\n    if (data.sessionId !== null && data.sessionId !== undefined) {\n      createData.Session = {\n        connect: {\n          id: data.sessionId,\n        },\n      };\n    }\n\n    // Step 1: Create a new TimeSheet\n    const createdTimeSheet = await prisma.timeSheet.create({\n      data: createData,\n      include: {\n        User: {\n          select: {\n            firstName: true,\n            lastName: true,\n          },\n        },\n      },\n    });\n\n    if (createdTimeSheet) {\n      await prisma.user.update({\n        where: { id: data.userId },\n        data: {\n          clockedIn: true,\n        },\n      });\n    }\n    if (type === \"switchJobs\" && data.previousTimeSheetId && data.endTime) {\n      await prisma.timeSheet.update({\n        where: { id: data.previousTimeSheetId },\n        data: {\n          endTime: formatISO(data.endTime),\n          comment: data.previoustimeSheetComments || null,\n          status: \"PENDING\",\n          clockOutLat: data.clockOutLat || null,\n          clockOutLng: data.clockOutLong || null,\n        },\n      });\n    }\n    return createdTimeSheet;\n  });\n}\n\nexport async function getRecentTimeSheetForUser(userId: string) {\n  // Implementation for fetching recent timesheet for a user\n  // Fetch the most recent active (unfinished) timesheet for the user\n  const timesheet = await prisma.timeSheet.findFirst({\n    where: {\n      userId,\n      endTime: null, // Ensure timesheet is still active\n    },\n    orderBy: {\n      createdAt: \"desc\", // Sort by most recent submission date\n    },\n    select: {\n      id: true,\n      endTime: true,\n    },\n  });\n\n  return timesheet;\n}\n\nexport async function getTimesheetActiveStatus({ userId }: { userId: string }) {\n  // Implementation for checking active timesheet status\n  const activeTimesheet = await prisma.timeSheet.findFirst({\n    where: {\n      userId: userId,\n      endTime: null, // No end time means still active\n    },\n    select: {\n      id: true,\n      startTime: true,\n    },\n  });\n\n  const hasActiveTimesheet = activeTimesheet ? true : false;\n  return {\n    hasActiveTimesheet: hasActiveTimesheet,\n    timesheetId: activeTimesheet?.id || null,\n  };\n}\n\nexport async function getBannerDataForTimesheet(\n  timesheetId: number,\n  userId: string\n) {\n  // Implementation for fetching banner data\n  const jobCode = await prisma.timeSheet.findFirst({\n    where: { userId, id: timesheetId },\n    select: {\n      id: true,\n      startTime: true,\n      Jobsite: {\n        select: { id: true, qrId: true, name: true },\n      },\n      CostCode: {\n        select: { id: true, name: true, code: true },\n      },\n    },\n  });\n  if (!jobCode) {\n    throw new Error(\"No active timesheet found.\");\n  }\n  // Parallelize queries for performance\n  const [tascoLogs, truckingLogs, eqLogs] = await Promise.all([\n    prisma.tascoLog.findMany({\n      where: { timeSheetId: timesheetId },\n      select: {\n        shiftType: true,\n        laborType: true,\n        Equipment: { select: { qrId: true, name: true } },\n      },\n    }),\n    prisma.truckingLog.findMany({\n      where: { timeSheetId: timesheetId },\n      select: {\n        laborType: true,\n        Truck: { select: { qrId: true, name: true } },\n        Equipment: { select: { qrId: true, name: true } },\n      },\n    }),\n    prisma.employeeEquipmentLog.findMany({\n      where: { timeSheetId: timesheetId, endTime: null },\n      select: {\n        id: true,\n        startTime: true,\n        endTime: true,\n        Equipment: { select: { id: true, name: true } },\n      },\n    }),\n  ]);\n\n  // Format Logs\n  const formattedTascoLogs = tascoLogs.map((log) => ({\n    laborType: log.laborType,\n    shiftType: log.shiftType,\n    equipment: log.Equipment || { qrId: null, name: \"Unknown\" },\n  }));\n\n  const formattedTruckingLogs = truckingLogs.map((log) => ({\n    laborType: log.laborType,\n    equipment: log.Truck || { qrId: null, name: \"Unknown\" },\n  }));\n\n  const formattedEmployeeEquipmentLogs = eqLogs.map((log) => ({\n    id: log.id,\n    startTime: log.startTime,\n    endTime: log.endTime,\n    equipment: log.Equipment || { id: null, name: \"Unknown\" },\n  }));\n\n  return {\n    id: jobCode.id,\n    startTime: jobCode.startTime,\n    jobsite: jobCode.Jobsite\n      ? {\n          id: jobCode.Jobsite.id,\n          qrId: jobCode.Jobsite.qrId,\n          name: jobCode.Jobsite.name,\n        }\n      : null,\n    costCode: jobCode.CostCode\n      ? {\n          id: jobCode.CostCode.id,\n          name: jobCode.CostCode.name,\n        }\n      : null,\n    tascoLogs: formattedTascoLogs,\n    truckingLogs: formattedTruckingLogs,\n    employeeEquipmentLogs: formattedEmployeeEquipmentLogs,\n  };\n}\n\n// TypeScript Types for Safety and Consistency\ntype EquipmentLog = {\n  id: string;\n  type: \"equipment\";\n  userId: string;\n  equipment: {\n    id: string;\n    qrId: string;\n    name: string;\n  } | null;\n};\n\ntype MaintenanceLog = {\n  id: string;\n  type: \"mechanic\";\n  maintenanceId: string;\n  userId: string;\n  submitted: boolean;\n};\n\ntype TruckingLog = {\n  id: string;\n  laborType: string;\n  endingMileage: number | null;\n  stateMileage: boolean;\n  refueled: boolean;\n  material: boolean;\n  equipmentHauled: boolean;\n};\n\ntype TascoLog = {\n  id: string;\n  shiftType: string | null;\n  laborType: string | null;\n  loadQuantity: number | null;\n  refueled: boolean;\n  fLoads: boolean;\n};\n\nexport async function getLogsForDashboard(userId: string) {\n  const [employeeLogs, maintenanceLogs, truckingLogs, tascoLogs] =\n    await Promise.all([\n      prisma.employeeEquipmentLog.findMany({\n        where: {\n          TimeSheet: {\n            userId: userId,\n          },\n          endTime: null,\n        },\n        include: {\n          Equipment: {\n            select: {\n              id: true,\n              qrId: true,\n              name: true,\n            },\n          },\n        },\n      }),\n\n      prisma.maintenanceLog.findMany({\n        where: {\n          userId: userId,\n          endTime: null,\n        },\n        select: {\n          id: true,\n          maintenanceId: true,\n        },\n      }),\n\n      prisma.truckingLog.findMany({\n        where: {\n          TimeSheet: {\n            userId: userId,\n            endTime: null,\n          },\n        },\n        select: {\n          id: true,\n          endingMileage: true,\n          laborType: true,\n          startingMileage: true,\n          StateMileages: {\n            select: {\n              id: true,\n              state: true,\n              stateLineMileage: true,\n            },\n          },\n          RefuelLogs: {\n            select: {\n              id: true,\n              gallonsRefueled: true,\n              milesAtFueling: true,\n            },\n          },\n          Materials: {\n            select: {\n              id: true,\n              LocationOfMaterial: true,\n              name: true,\n              quantity: true,\n              unit: true,\n            },\n          },\n          EquipmentHauled: {\n            select: {\n              id: true,\n              equipmentId: true,\n            },\n          },\n        },\n      }),\n\n      prisma.tascoLog.findMany({\n        where: {\n          TimeSheet: {\n            userId: userId,\n            endTime: null,\n          },\n        },\n        select: {\n          id: true,\n          shiftType: true,\n          laborType: true,\n          LoadQuantity: true,\n          RefuelLogs: {\n            select: {\n              id: true,\n              gallonsRefueled: true,\n            },\n          },\n          TascoFLoads: {\n            select: {\n              id: true,\n              weight: true,\n              screenType: true,\n            },\n          },\n        },\n      }),\n    ]);\n\n  // Enhanced validation functions for different field types\n  const validateField = {\n    // Basic validation - field must not be empty/null/undefined\n    required: (value: unknown): boolean => {\n      return value !== null && value !== undefined && value !== \"\";\n    },\n\n    // Mileage validation - must exist and be >= starting mileage\n    mileage: (value: unknown, startingMileage: number | null): boolean => {\n      if (!validateField.required(value)) return false;\n      if (startingMileage === null) return true; // Can't validate without starting mileage\n      return typeof value === \"number\" && value >= startingMileage;\n    },\n\n    // Numeric validation - must be a positive number\n    positiveNumber: (value: unknown): boolean => {\n      if (!validateField.required(value)) return false;\n      return typeof value === \"number\" && value > 0;\n    },\n  };\n\n  // Validation rules for each log type\n  const validateTruckingLog = (log: {\n    laborType: string;\n    startingMileage: number | null;\n    endingMileage: number | null;\n    StateMileages: Array<{\n      state: string | null;\n      stateLineMileage: number | null;\n    }>;\n    RefuelLogs: Array<{\n      gallonsRefueled: number | null;\n      milesAtFueling: number | null;\n    }>;\n    Materials: Array<{\n      LocationOfMaterial: string | null;\n      name: string | null;\n      quantity: number | null;\n      unit: string | null;\n    }>;\n    EquipmentHauled: Array<{\n      equipmentId: string | null;\n    }>;\n  }) => {\n    const startingMileage = log.startingMileage;\n\n    // Calculate minimum end mileage (highest mileage from all logs)\n    let maxMileage = startingMileage || 0;\n\n    // Check state mileage logs\n    log.StateMileages.forEach((stateLog) => {\n      if (stateLog.stateLineMileage && stateLog.stateLineMileage > maxMileage) {\n        maxMileage = stateLog.stateLineMileage;\n      }\n    });\n\n    // Check refuel logs\n    log.RefuelLogs.forEach((refuelLog) => {\n      if (refuelLog.milesAtFueling && refuelLog.milesAtFueling > maxMileage) {\n        maxMileage = refuelLog.milesAtFueling;\n      }\n    });\n\n    return {\n      // State mileage validation\n      stateMileage: log.StateMileages.some(\n        (item) =>\n          !validateField.required(item.state) ||\n          !validateField.mileage(item.stateLineMileage, startingMileage)\n      ),\n\n      // Refuel logs validation\n      refueled: log.RefuelLogs.some(\n        (item) =>\n          !validateField.positiveNumber(item.gallonsRefueled) ||\n          !validateField.mileage(item.milesAtFueling, startingMileage)\n      ),\n\n      // Material validation\n      material: log.Materials.some(\n        (item) =>\n          !validateField.required(item.LocationOfMaterial) ||\n          !validateField.required(item.name) ||\n          !validateField.positiveNumber(item.quantity) ||\n          !validateField.required(item.unit)\n      ),\n\n      // Equipment hauled validation\n      equipmentHauled: log.EquipmentHauled.some(\n        (item) => !validateField.required(item.equipmentId)\n      ),\n\n      // Enhanced ending mileage validation for truck drivers\n      endingMileage:\n        log.laborType === \"truckDriver\" &&\n        (!validateField.required(log.endingMileage) ||\n          (log.endingMileage !== null && log.endingMileage < maxMileage)),\n    };\n  };\n\n  const mappedEmployeeLogs: EquipmentLog[] = employeeLogs.map((log) => ({\n    id: log.id.toString(),\n    type: \"equipment\",\n    userId: userId,\n    equipment: log.Equipment\n      ? {\n          id: log.Equipment.id.toString(),\n          qrId: log.Equipment.qrId,\n          name: log.Equipment.name,\n        }\n      : null,\n  }));\n\n  // Mapping Maintenance Logs\n  const mappedMaintenanceLogs: MaintenanceLog[] = maintenanceLogs.map(\n    (log) => ({\n      id: log.id.toString(),\n      type: \"mechanic\",\n      maintenanceId: log.maintenanceId,\n      userId: userId,\n      submitted: false,\n    })\n  );\n\n  // Mapping Trucking Logs and Checking for Incomplete Fields\n  const mappedTruckingLogs: TruckingLog[] = truckingLogs\n    .map((log) => {\n      const validation = validateTruckingLog(log);\n\n      return {\n        id: log.id,\n        type: \"Trucking Assistant\",\n        laborType: log.laborType,\n        endingMileage: log.endingMileage,\n        stateMileage: validation.stateMileage,\n        refueled: validation.refueled,\n        material: validation.material,\n        equipmentHauled: validation.equipmentHauled,\n        incomplete: validation.endingMileage,\n      };\n    })\n    .filter((log) => {\n      // Filter logs with incomplete fields\n      return (\n        log.incomplete ||\n        log.stateMileage ||\n        log.refueled ||\n        log.material ||\n        log.equipmentHauled\n      );\n    });\n\n  const mappedTascoLog: TascoLog[] = tascoLogs\n    .map((log) => {\n      return {\n        id: log.id,\n        type: \"tasco\",\n        shiftType: log.shiftType,\n        laborType: log.laborType,\n        loadQuantity: log.LoadQuantity,\n        refueled: log.RefuelLogs.some(\n          (item) => !validateField.positiveNumber(item.gallonsRefueled)\n        ),\n        fLoads: log.TascoFLoads.some(\n          (item) =>\n            !validateField.positiveNumber(item.weight) ||\n            !validateField.required(item.screenType)\n        ),\n      };\n    })\n    .filter((log) => {\n      // Filter logs with incomplete fields\n      return log.refueled || log.fLoads;\n    });\n\n  // Combine All Logs\n  const combinedLogs = [\n    ...mappedEmployeeLogs,\n    ...mappedMaintenanceLogs,\n    ...mappedTruckingLogs,\n    ...mappedTascoLog,\n  ];\n\n  return combinedLogs;\n}\n\nexport async function getClockOutComment(userId: string) {\n  const timesheet = await prisma.timeSheet.findFirst({\n    where: {\n      userId,\n      endTime: null, // Ensure timesheet is still active\n    },\n    orderBy: {\n      createdAt: \"desc\", // Sort by most recent submission date\n    },\n    select: {\n      comment: true,\n    },\n  });\n  return timesheet?.comment || \"\";\n}\n\nexport async function getEquipmentLogs(userId: string, timesheetId: number) {\n  const logs = await prisma.employeeEquipmentLog.findMany({\n    where: {\n      timeSheetId: timesheetId,\n      TimeSheet: {\n        userId: userId,\n      },\n    },\n    include: {\n      Equipment: true,\n    },\n    orderBy: {\n      startTime: \"desc\",\n    },\n  });\n\n  return logs;\n}\n\nexport async function getRecentJobDetails(userId: string) {\n  const timesheet = await prisma.timeSheet.findFirst({\n    where: {\n      userId,\n      endTime: null, // Ensure timesheet is still active\n    },\n    orderBy: {\n      createdAt: \"desc\", // Sort by most recent submission date\n    },\n    select: {\n      Jobsite: {\n        select: {\n          id: true,\n          name: true,\n          qrId: true,\n        },\n      },\n    },\n  });\n  const job = timesheet?.Jobsite;\n  if (!job) {\n    throw new Error(\"No active job found.\");\n  }\n  return job;\n}\n\nexport async function createEmployeeEquipmentLogService({\n  equipmentId,\n  timeSheetId,\n  endTime,\n  comment,\n}: {\n  equipmentId: string;\n  timeSheetId: string;\n  endTime?: string | null;\n  comment?: string | null;\n}) {\n  try {\n    // Validate equipment existence and status\n    let equipmentExists = await prisma.equipment.findFirst({\n      where: { id: equipmentId, status: \"ACTIVE\" },\n    });\n\n    if (!equipmentExists) {\n      equipmentExists = await prisma.equipment.findFirst({\n        where: { qrId: equipmentId, status: \"ACTIVE\" },\n      });\n    }\n\n    if (!equipmentExists) {\n      const equipmentAnyStatus = await prisma.equipment.findFirst({\n        where: { OR: [{ id: equipmentId }, { qrId: equipmentId }] },\n        select: { status: true },\n      });\n\n      if (equipmentAnyStatus) {\n        throw new Error(\n          `Equipment with ID ${equipmentId} is ${equipmentAnyStatus.status.toLowerCase()}. Please scan an active equipment QR code.`\n        );\n      } else {\n        throw new Error(\n          `Equipment with ID ${equipmentId} not found. Please scan a valid equipment QR code.`\n        );\n      }\n    }\n\n    // Validate timesheet existence and status\n    const timeSheet = await prisma.timeSheet.findUnique({\n      where: { id: parseInt(timeSheetId, 10) },\n      select: { id: true, endTime: true },\n    });\n\n    if (!timeSheet) {\n      throw new Error(\"Invalid timesheet ID. Please clock in again.\");\n    }\n\n    if (timeSheet.endTime) {\n      throw new Error(\n        \"This timesheet has been closed. Please clock in again before logging equipment.\"\n      );\n    }\n\n    // Create the employee equipment log\n    const newLog = await prisma.employeeEquipmentLog.create({\n      data: {\n        equipmentId: equipmentExists.id,\n        timeSheetId: timeSheet.id,\n        startTime: new Date().toISOString(),\n        endTime: endTime ? new Date(endTime) : null,\n        comment: comment ?? null,\n      },\n    });\n\n    return newLog;\n  } catch (error) {\n    console.error(\"Error in createEmployeeEquipmentLogService:\", error);\n    throw error;\n  }\n}\n\nexport async function getEmployeeEquipmentLogDetails(logId: string) {\n  const usersLog = await prisma.employeeEquipmentLog.findFirst({\n    where: {\n      id: logId,\n    },\n    select: {\n      id: true,\n      equipmentId: true,\n      startTime: true,\n      endTime: true,\n      comment: true,\n      Equipment: {\n        select: {\n          id: true,\n          name: true,\n          state: true,\n          equipmentTag: true,\n          make: true,\n          model: true,\n          year: true,\n          licensePlate: true,\n        },\n      },\n      RefuelLog: {\n        select: {\n          id: true,\n          gallonsRefueled: true,\n        },\n      },\n      Maintenance: {\n        select: {\n          id: true,\n          equipmentIssue: true,\n          additionalInfo: true,\n        },\n      },\n    },\n  });\n  return usersLog;\n}\n\nexport async function deleteEmployeeEquipmentLog(logId: string) {\n  try {\n    await prisma.employeeEquipmentLog.delete({\n      where: {\n        id: logId,\n      },\n    });\n\n    return { success: true };\n  } catch (error) {\n    console.error(\"Error deleting equipment log:\", error);\n    return { success: false, error: \"Failed to delete equipment log.\" };\n  }\n}\n\nexport async function updateEmployeeEquipmentLogService({\n  id,\n  equipmentId,\n  startTime,\n  endTime,\n  comment,\n  status,\n  disconnectRefuelLog,\n  refuelLogId,\n  gallonsRefueled,\n}: {\n  id: string;\n  equipmentId: string;\n  startTime: string;\n  endTime?: string;\n  comment?: string;\n  status?: EquipmentState;\n  disconnectRefuelLog?: boolean;\n  refuelLogId?: string | null;\n  gallonsRefueled?: number | null;\n}) {\n  try {\n    const result = await prisma.$transaction(async (prisma) => {\n      const actualRefuelLogId = refuelLogId === \"__NULL__\" ? null : refuelLogId;\n      const actualGallonsRefueled =\n        gallonsRefueled === null ? null : gallonsRefueled;\n\n      let refuelLogUpdate = {};\n      if (disconnectRefuelLog) {\n        refuelLogUpdate = { disconnect: true };\n      } else if (actualGallonsRefueled && actualRefuelLogId) {\n        // Check if RefuelLog exists for this EmployeeEquipmentLog\n        const existingRefuelLog = await prisma.refuelLog.findFirst({\n          where: { id: actualRefuelLogId, employeeEquipmentLogId: id },\n        });\n        if (existingRefuelLog) {\n          refuelLogUpdate = {\n            update: {\n              where: { id: actualRefuelLogId },\n              data: { gallonsRefueled: actualGallonsRefueled },\n            },\n          };\n        } else {\n          // Fallback to create if not found\n          refuelLogUpdate = {\n            create: {\n              gallonsRefueled: actualGallonsRefueled,\n            },\n          };\n        }\n      } else if (actualGallonsRefueled) {\n        refuelLogUpdate = {\n          create: {\n            gallonsRefueled: actualGallonsRefueled,\n          },\n        };\n      }\n\n      // Build update data object conditionally\n      const updateData: Prisma.EmployeeEquipmentLogUpdateInput = {};\n      if (typeof startTime !== \"undefined\") updateData.startTime = startTime;\n      if (typeof endTime !== \"undefined\")\n        updateData.endTime = endTime || new Date().toISOString();\n      if (typeof comment !== \"undefined\") updateData.comment = comment ?? null;\n      if (Object.keys(refuelLogUpdate).length > 0)\n        updateData.RefuelLog = refuelLogUpdate;\n\n      const log = await prisma.employeeEquipmentLog.update({\n        where: { id },\n        data: updateData,\n        include: {\n          Equipment: true,\n          TimeSheet: {\n            include: {\n              User: { select: { firstName: true, lastName: true } },\n            },\n          },\n        },\n      });\n\n      if (!log) {\n        throw new Error(\"Equipment log not found\");\n      }\n\n      if (status) {\n        await prisma.equipment.update({\n          where: { id: equipmentId },\n          data: { state: status },\n        });\n      }\n\n      return {\n        name: log.Equipment ? log.Equipment.name : null,\n        id: log.Equipment ? log.Equipment.id : null,\n        createdBy:\n          log.TimeSheet && log.TimeSheet.User\n            ? `${log.TimeSheet.User.firstName} ${log.TimeSheet.User.lastName}`\n            : null,\n      };\n    });\n\n    return {\n      success: true,\n      message: \"Equipment log updated successfully\",\n      data: result,\n    };\n  } catch (error) {\n    console.error(\"Error updating employee equipment log:\", error);\n    throw new Error(`Failed to update employee equipment log: ${error}`);\n  }\n}\n\nexport async function getClockOutDetailsService(userId: string) {\n  // Get today's date range\n  const startOfDay = new Date();\n  startOfDay.setHours(0, 0, 0, 0);\n  const endOfDay = new Date();\n  endOfDay.setHours(23, 59, 59, 999);\n\n  // Fetch all required data in parallel\n  const [timesheets, user, previousComment] = await Promise.all([\n    prisma.timeSheet.findMany({\n      where: {\n        userId,\n        startTime: { gte: startOfDay, lte: endOfDay },\n      },\n      include: {\n        Jobsite: true,\n        TascoLogs: true,\n        TruckingLogs: true,\n      },\n      orderBy: { startTime: \"desc\" },\n    }),\n\n    prisma.user.findUnique({\n      where: { id: userId },\n      select: { signature: true },\n    }),\n\n    prisma.timeSheet.findFirst({\n      where: {\n        userId,\n        endTime: null,\n      },\n      orderBy: {\n        createdAt: \"desc\",\n      },\n      select: {\n        comment: true,\n      },\n    }),\n  ]);\n\n  const signature = user?.signature || \"\";\n  const comment = previousComment?.comment || \"\";\n\n  return { timesheets, signature, comment };\n}\nexport async function updateClockOutService(\n  timeSheetId: string,\n  userId: string,\n  endTime: string,\n  timeSheetComments?: string,\n  wasInjured?: boolean,\n  clockOutLat?: number,\n  clockOutLong?: number\n) {\n  try {\n    const transactionResult = await prisma.$transaction(async (prisma) => {\n      // Update the timesheet with clock-out details\n      const updatedTimeSheet = await prisma.timeSheet.update({\n        where: { id: parseInt(timeSheetId, 10), userId },\n        data: {\n          endTime: new Date(endTime),\n          comment: timeSheetComments || null,\n          wasInjured: wasInjured || false,\n          clockOutLat: clockOutLat || null,\n          clockOutLng: clockOutLong || null,\n          status: \"PENDING\",\n        },\n        include: {\n          User: {\n            select: {\n              firstName: true,\n              lastName: true,\n            },\n          },\n        },\n      });\n\n      // Update user status to clocked out\n      await prisma.user.update({\n        where: { id: userId },\n        data: {\n          clockedIn: false,\n        },\n      });\n\n      return { updatedTimeSheet };\n    });\n\n    return {\n      success: true,\n      data: transactionResult.updatedTimeSheet,\n    };\n  } catch (error) {\n    console.error(\"Error updating clock-out details:\", error);\n    return {\n      success: false,\n      error: \"Failed to update clock-out details.\",\n    };\n  }\n}\n\nexport async function getPreviousTimesheet(userId: string) {\n  const timesheet = await prisma.timeSheet.findFirst({\n    where: {\n      userId,\n    },\n    orderBy: {\n      createdAt: \"desc\", // Sort by most recent submission date\n    },\n    select: {\n      id: true,\n      endTime: true,\n    },\n  });\n\n  return timesheet;\n}\nexport async function getContinueTimesheetService(id: number, userId: string) {\n  const incompleteTimesheet = await prisma.timeSheet.findFirst({\n    where: {\n      id,\n      userId,\n      endTime: null, // Ensure it's still incomplete\n    },\n    include: {\n      Jobsite: {\n        select: {\n          id: true,\n          qrId: true,\n          name: true,\n        },\n      },\n      CostCode: {\n        select: {\n          id: true,\n          name: true,\n        },\n      },\n      TascoLogs: {\n        select: {\n          shiftType: true,\n          laborType: true,\n          materialType: true,\n          Equipment: {\n            select: {\n              qrId: true,\n              name: true,\n            },\n          },\n        },\n      },\n      TruckingLogs: {\n        select: {\n          laborType: true,\n          truckNumber: true,\n          startingMileage: true,\n          Equipment: {\n            select: {\n              qrId: true,\n              name: true,\n            },\n          },\n        },\n      },\n    },\n  });\n  return incompleteTimesheet;\n}\n\nexport async function returnToPreviousTimesheetService(id: number) {\n  const PrevTimeSheet = await prisma.timeSheet.findUnique({\n    where: { id },\n    select: {\n      id: true,\n      Jobsite: {\n        select: {\n          id: true,\n          qrId: true,\n          name: true,\n        },\n      },\n      CostCode: {\n        select: {\n          id: true,\n          name: true,\n        },\n      },\n      workType: true,\n      TascoLogs: {\n        select: {\n          shiftType: true,\n          Equipment: {\n            select: {\n              id: true,\n              qrId: true,\n              name: true,\n            },\n          },\n          laborType: true,\n          materialType: true,\n        },\n      },\n      TruckingLogs: {\n        select: {\n          laborType: true,\n          Equipment: {\n            select: {\n              qrId: true,\n              name: true,\n            },\n          },\n          startingMileage: true,\n        },\n      },\n    },\n  });\n\n  return PrevTimeSheet;\n}\n\n/**\n * Delete a refuel log for equipment logs\n */\nexport async function deleteRefuelLogService(refuelLogId: string) {\n  try {\n    const deletedRefuelLog = await prisma.refuelLog.delete({\n      where: {\n        id: refuelLogId,\n      },\n    });\n\n    return {\n      success: true,\n      message: \"Refuel log deleted successfully\",\n      data: deletedRefuelLog,\n    };\n  } catch (error) {\n    if (error instanceof Error) {\n      throw new Error(`Failed to delete refuel log: ${error.message}`);\n    }\n    throw new Error(\"Failed to delete refuel log\");\n  }\n}\n"],"names":[],"mappings":"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","debug_id":"572cf966-741d-56b7-a039-be2da390de14"}