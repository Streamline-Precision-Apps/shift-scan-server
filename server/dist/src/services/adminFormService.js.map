{"version":3,"file":"adminFormService.js","sources":["src/services/adminFormService.ts"],"sourceRoot":"/","sourcesContent":["import prisma from \"../lib/prisma.js\";\r\nimport {\r\n  FormTemplateCategory,\r\n  FormTemplateStatus,\r\n  FieldType,\r\n  FormStatus,\r\n} from \"../../generated/prisma/index.js\";\r\n\r\n// --- Types ---\r\nexport interface FormSettingsData {\r\n  name: string;\r\n  description: string;\r\n  formType: string;\r\n  requireSignature: boolean;\r\n  isApprovalRequired: boolean;\r\n  isActive: string;\r\n}\r\n\r\nexport interface FormFieldOption {\r\n  id?: string;\r\n  value: string;\r\n}\r\n\r\nexport interface FormFieldData {\r\n  id: string;\r\n  formGroupingId?: string;\r\n  label: string;\r\n  type: string;\r\n  required: boolean;\r\n  order: number;\r\n  placeholder?: string;\r\n  minLength?: number;\r\n  maxLength?: number;\r\n  multiple?: boolean;\r\n  content?: string | null;\r\n  filter?: string | null;\r\n  Options?: FormFieldOption[];\r\n}\r\n\r\nexport interface SaveFormData {\r\n  settings: FormSettingsData;\r\n  fields: FormFieldData[];\r\n  companyId: string;\r\n  formId?: string;\r\n}\r\n\r\nexport interface CreateFormSubmissionInput {\r\n  formTemplateId: string;\r\n  data: Record<string, string | number | boolean | null>;\r\n  submittedBy: {\r\n    id: string;\r\n    firstName: string;\r\n    lastName: string;\r\n  };\r\n  adminUserId?: string | null;\r\n  comment?: string;\r\n  signature?: string;\r\n  status?: string;\r\n}\r\n\r\nexport interface UpdateFormSubmissionInput {\r\n  submissionId: number;\r\n  data: Record<string, string | number | boolean | null>;\r\n  adminUserId: string | null;\r\n  comment?: string;\r\n  signature?: string;\r\n  updateStatus?: string;\r\n}\r\n\r\nexport interface ApproveFormSubmissionInput {\r\n  comment?: string;\r\n  adminUserId?: string;\r\n}\r\n\r\nexport async function getAllFormTemplates(\r\n  search: string,\r\n  page: number | undefined,\r\n  pageSize: number | undefined,\r\n  skip: number | undefined,\r\n  status: string[],\r\n  formType: string[]\r\n) {\r\n  const filter: Record<string, unknown> = {};\r\n\r\n  if (status.length === 1) {\r\n    // Single status\r\n    const statusForm = status[0];\r\n    if (statusForm) filter.isActive = statusForm;\r\n  } else if (status.length > 1) {\r\n    const statusForms = status.map((s) => s).filter((s) => s);\r\n    if (statusForms.length > 0) filter.isActive = { in: statusForms };\r\n  }\r\n\r\n  if (formType.length === 1 && formType[0] !== \"ALL\") {\r\n    // Single form type\r\n    const type = formType[0];\r\n    if (type) filter.formType = type;\r\n  } else if (formType.length > 1) {\r\n    const types = formType.map((s) => s).filter((s) => s);\r\n    if (types.length > 0) filter.formType = { in: types };\r\n  }\r\n\r\n  if (search !== \"\") {\r\n    page = undefined;\r\n    pageSize = undefined;\r\n    skip = undefined;\r\n    const totalPages = 1;\r\n    const forms = await prisma.formTemplate.findMany({\r\n      where: {\r\n        ...filter,\r\n      },\r\n      include: {\r\n        _count: {\r\n          select: {\r\n            Submissions: true,\r\n          },\r\n        },\r\n        FormGrouping: {\r\n          select: {\r\n            id: true,\r\n            title: true,\r\n            order: true,\r\n            Fields: {\r\n              select: {\r\n                label: true,\r\n                type: true,\r\n                required: true,\r\n                order: true,\r\n                placeholder: true,\r\n                minLength: true,\r\n                maxLength: true,\r\n                multiple: true,\r\n                content: true,\r\n                filter: true,\r\n                Options: true,\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n      orderBy: {\r\n        createdAt: \"desc\",\r\n      },\r\n    });\r\n    const total = forms.length;\r\n    return {\r\n      data: forms,\r\n      page,\r\n      pageSize,\r\n      total,\r\n      totalPages,\r\n    };\r\n  } else {\r\n    page = page || 1;\r\n    pageSize = pageSize || 10;\r\n    skip = (page - 1) * pageSize;\r\n    const take = pageSize;\r\n    // Fetch total count for pagination\r\n    const total = await prisma.formTemplate.count();\r\n    const totalPages = Math.ceil(total / pageSize);\r\n    // Get total count for pagination\r\n\r\n    const forms = await prisma.formTemplate.findMany({\r\n      where: {\r\n        ...filter,\r\n      },\r\n      skip,\r\n      take,\r\n      include: {\r\n        _count: {\r\n          select: {\r\n            Submissions: true,\r\n          },\r\n        },\r\n        FormGrouping: {\r\n          select: {\r\n            id: true,\r\n            title: true,\r\n            order: true,\r\n            Fields: {\r\n              select: {\r\n                label: true,\r\n                type: true,\r\n                required: true,\r\n                order: true,\r\n                placeholder: true,\r\n                minLength: true,\r\n                maxLength: true,\r\n                multiple: true,\r\n                content: true,\r\n                filter: true,\r\n                Options: true,\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n      orderBy: {\r\n        createdAt: \"desc\",\r\n      },\r\n    });\r\n    return {\r\n      data: forms,\r\n      page,\r\n      pageSize,\r\n      total,\r\n      totalPages,\r\n    };\r\n  }\r\n}\r\n\r\nexport async function getFormSubmissionByTemplateId(\r\n  id: string,\r\n  page: number,\r\n  pageSize: number,\r\n  pendingOnly: boolean,\r\n  statusFilter: string,\r\n  dateRangeStart: string | null,\r\n  dateRangeEnd: string | null\r\n) {\r\n  // If pendingOnly, do not paginate (return all pending submissions)\r\n  const skip = pendingOnly ? undefined : (page - 1) * pageSize;\r\n  const take = pendingOnly ? undefined : pageSize;\r\n\r\n  // (moved up)\r\n\r\n  // Determine the status condition for queries\r\n  let statusCondition: FormStatus | undefined;\r\n  if (pendingOnly) {\r\n    statusCondition = \"PENDING\";\r\n  } else if (statusFilter && statusFilter !== \"ALL\") {\r\n    statusCondition = statusFilter as FormStatus;\r\n  }\r\n\r\n  const total = await prisma.formSubmission.count({\r\n    where: {\r\n      formTemplateId: id,\r\n      NOT: {\r\n        status: \"DRAFT\",\r\n      },\r\n      ...(statusCondition && { status: statusCondition }),\r\n    },\r\n  });\r\n\r\n  // Count of pending submissions for inbox\r\n  const pendingForms = await prisma.formSubmission.count({\r\n    where: {\r\n      formTemplateId: id,\r\n      status: \"PENDING\",\r\n    },\r\n  });\r\n\r\n  const formTemplate = await prisma.formTemplate.findUnique({\r\n    where: { id },\r\n    include: {\r\n      FormGrouping: {\r\n        select: {\r\n          id: true,\r\n          title: true,\r\n          order: true,\r\n          Fields: {\r\n            select: {\r\n              id: true,\r\n              label: true,\r\n              type: true,\r\n              required: true,\r\n              order: true,\r\n              placeholder: true,\r\n              minLength: true,\r\n              maxLength: true,\r\n              multiple: true,\r\n              content: true,\r\n              filter: true,\r\n              Options: true,\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  });\r\n\r\n  const submissions = await prisma.formSubmission.findMany({\r\n    where: {\r\n      formTemplateId: id,\r\n      NOT: {\r\n        status: \"DRAFT\",\r\n      },\r\n      ...(statusCondition && { status: statusCondition }),\r\n      ...(dateRangeStart || dateRangeEnd\r\n        ? {\r\n            submittedAt: {\r\n              ...(dateRangeStart && { gte: new Date(dateRangeStart) }),\r\n              ...(dateRangeEnd && { lte: new Date(dateRangeEnd) }),\r\n            },\r\n          }\r\n        : {}),\r\n    },\r\n    ...(skip !== undefined ? { skip } : {}),\r\n    ...(take !== undefined ? { take } : {}),\r\n    orderBy: { submittedAt: \"desc\" },\r\n    include: {\r\n      User: {\r\n        select: {\r\n          id: true,\r\n          firstName: true,\r\n          lastName: true,\r\n          signature: true,\r\n        },\r\n      },\r\n    },\r\n  });\r\n\r\n  return {\r\n    ...formTemplate,\r\n    Submissions: submissions,\r\n    total,\r\n    page: pendingOnly ? 1 : page,\r\n    pageSize: pendingOnly ? submissions.length : pageSize,\r\n    totalPages: pendingOnly ? 1 : Math.ceil(total / pageSize),\r\n    pendingForms,\r\n  };\r\n}\r\n\r\nexport async function getFormTemplateById(id: string) {\r\n  return await prisma.formTemplate.findUnique({\r\n    where: { id },\r\n    include: {\r\n      FormGrouping: {\r\n        include: {\r\n          Fields: {\r\n            include: {\r\n              Options: true,\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  });\r\n}\r\n\r\nexport async function getFormSubmissions(\r\n  formTemplateId: string,\r\n  dateRange?: {\r\n    from?: Date;\r\n    to?: Date;\r\n  }\r\n) {\r\n  const submittedAtFilter: Record<string, Date> = {};\r\n  if (dateRange?.from) submittedAtFilter.gte = dateRange.from;\r\n  if (dateRange?.to) submittedAtFilter.lte = dateRange.to;\r\n\r\n  return await prisma.formSubmission.findMany({\r\n    where: {\r\n      formTemplateId,\r\n      ...(Object.keys(submittedAtFilter).length > 0 && {\r\n        submittedAt: submittedAtFilter,\r\n      }),\r\n    },\r\n    include: {\r\n      User: {\r\n        select: {\r\n          firstName: true,\r\n          lastName: true,\r\n        },\r\n      },\r\n    },\r\n  });\r\n}\r\n\r\n// data: { settings, fields, companyId }\r\nexport async function createFormTemplate(data: SaveFormData) {\r\n  const { settings, fields, companyId } = data;\r\n  return await prisma.$transaction(async (tx) => {\r\n    const formTemplate = await tx.formTemplate.create({\r\n      data: {\r\n        companyId: companyId || \"1\",\r\n        name: settings.name,\r\n        description: settings.description || null,\r\n        formType: settings.formType as FormTemplateCategory,\r\n        isActive: settings.isActive as FormTemplateStatus,\r\n        isSignatureRequired: settings.requireSignature,\r\n        isApprovalRequired: settings.isApprovalRequired,\r\n      },\r\n    });\r\n    const formGrouping = await tx.formGrouping.create({\r\n      data: {\r\n        title: settings.name,\r\n        order: 0,\r\n      },\r\n    });\r\n    await tx.formTemplate.update({\r\n      where: { id: formTemplate.id },\r\n      data: {\r\n        FormGrouping: {\r\n          connect: { id: formGrouping.id },\r\n        },\r\n      },\r\n    });\r\n    for (const field of fields) {\r\n      const formField = await tx.formField.create({\r\n        data: {\r\n          formGroupingId: formGrouping.id,\r\n          label: field.label,\r\n          type: field.type as FieldType,\r\n          required: field.required,\r\n          order: field.order,\r\n          placeholder: field.placeholder ?? null,\r\n          multiple: field.multiple || false,\r\n          content: field.content || null,\r\n          filter: field.filter || null,\r\n          minLength: field.minLength !== undefined ? field.minLength : null,\r\n          maxLength: field.maxLength !== undefined ? field.maxLength : null,\r\n        },\r\n      });\r\n      if (\r\n        [\"DROPDOWN\", \"RADIO\", \"MULTISELECT\"].includes(\r\n          field.type?.toUpperCase?.()\r\n        ) &&\r\n        field.Options &&\r\n        field.Options.length > 0\r\n      ) {\r\n        for (const option of field.Options) {\r\n          const optionData =\r\n            typeof option === \"string\" ? { value: option } : option;\r\n          await tx.formFieldOption.create({\r\n            data: {\r\n              fieldId: formField.id,\r\n              value: optionData.value,\r\n            },\r\n          });\r\n        }\r\n      }\r\n    }\r\n    return formTemplate;\r\n  });\r\n}\r\n// data: { settings, fields, formId }\r\nexport async function updateFormTemplate(data: SaveFormData) {\r\n  const { settings, fields, formId } = data;\r\n  if (!formId) {\r\n    throw new Error(\"formId is required for updating a form template\");\r\n  }\r\n  await prisma.formTemplate.update({\r\n    where: { id: formId },\r\n    data: {\r\n      name: settings.name,\r\n      formType: settings.formType as FormTemplateCategory,\r\n      isActive:\r\n        (settings.isActive as FormTemplateStatus) || FormTemplateStatus.DRAFT,\r\n      isSignatureRequired: settings.requireSignature,\r\n      isApprovalRequired: settings.isApprovalRequired,\r\n      description: settings.description,\r\n    },\r\n  });\r\n  const groupings = await prisma.formGrouping.findMany({\r\n    where: { FormTemplate: { some: { id: formId } } },\r\n  });\r\n  let formGroupingId = groupings[0]?.id;\r\n  if (!formGroupingId) {\r\n    const newGrouping = await prisma.formGrouping.create({\r\n      data: { title: settings.name, order: 0 },\r\n    });\r\n    await prisma.formTemplate.update({\r\n      where: { id: formId },\r\n      data: { FormGrouping: { connect: { id: newGrouping.id } } },\r\n    });\r\n    formGroupingId = newGrouping.id;\r\n  }\r\n  const existingFields = await prisma.formField.findMany({\r\n    where: { formGroupingId },\r\n    include: { Options: true },\r\n  });\r\n  const existingFieldMap = new Map(existingFields.map((f) => [f.id, f]));\r\n  const submittedFieldIds = new Set(fields.map((f) => f.id));\r\n  for (const oldField of existingFields) {\r\n    if (!submittedFieldIds.has(oldField.id)) {\r\n      await prisma.formFieldOption.deleteMany({\r\n        where: { fieldId: oldField.id },\r\n      });\r\n      await prisma.formField.delete({ where: { id: oldField.id } });\r\n    }\r\n  }\r\n  for (const field of fields) {\r\n    let formFieldId = field.id;\r\n    const isExisting = existingFieldMap.has(field.id);\r\n    if (isExisting) {\r\n      await prisma.formField.update({\r\n        where: { id: field.id },\r\n        data: {\r\n          label: field.label,\r\n          type: field.type as FieldType,\r\n          required: field.required,\r\n          order: field.order,\r\n          placeholder:\r\n            field.placeholder !== undefined ? field.placeholder : null,\r\n          minLength: field.minLength !== undefined ? field.minLength : null,\r\n          maxLength: field.maxLength !== undefined ? field.maxLength : null,\r\n          multiple: field.multiple !== undefined ? field.multiple : null,\r\n          content: field.content !== undefined ? field.content : null,\r\n          filter: field.filter !== undefined ? field.filter : null,\r\n          formGroupingId,\r\n        },\r\n      });\r\n      await prisma.formFieldOption.deleteMany({ where: { fieldId: field.id } });\r\n    } else {\r\n      const created = await prisma.formField.create({\r\n        data: {\r\n          id: field.id,\r\n          formGroupingId,\r\n          label: field.label,\r\n          type: field.type as FieldType,\r\n          required: field.required,\r\n          order: field.order,\r\n          placeholder:\r\n            field.placeholder !== undefined ? field.placeholder : null,\r\n          maxLength: field.maxLength !== undefined ? field.maxLength : null,\r\n          minLength: field.minLength !== undefined ? field.minLength : null,\r\n          multiple: field.multiple || false,\r\n          content: field.content || null,\r\n          filter: field.filter || null,\r\n        },\r\n      });\r\n      formFieldId = created.id;\r\n    }\r\n    if (\r\n      [\"DROPDOWN\", \"RADIO\", \"MULTISELECT\"].includes(field.type) &&\r\n      field.Options &&\r\n      field.Options.length > 0\r\n    ) {\r\n      for (const option of field.Options) {\r\n        await prisma.formFieldOption.create({\r\n          data: {\r\n            fieldId: formFieldId,\r\n            value: option.value,\r\n          },\r\n        });\r\n      }\r\n    }\r\n    if (\r\n      field.type === \"TEXTAREA\" ||\r\n      field.type === \"TEXT\" ||\r\n      field.type === \"NUMBER\"\r\n    ) {\r\n      await prisma.formField.update({\r\n        where: { id: formFieldId },\r\n        data: {\r\n          maxLength: field.maxLength !== undefined ? field.maxLength : null,\r\n        },\r\n      });\r\n    }\r\n    if (field.type === \"DATE\" || field.type === \"TIME\") {\r\n      await prisma.formField.update({\r\n        where: { id: formFieldId },\r\n        data: {\r\n          placeholder:\r\n            field.placeholder !== undefined ? field.placeholder : null,\r\n        },\r\n      });\r\n    }\r\n  }\r\n  return { success: true, formId, message: \"Form updated successfully\" };\r\n}\r\n\r\nexport async function deleteFormTemplate(id: string) {\r\n  return await prisma.formTemplate.delete({\r\n    where: { id },\r\n  });\r\n}\r\n\r\nexport async function archiveFormTemplate(id: string) {\r\n  return await prisma.formTemplate.update({\r\n    where: { id },\r\n    data: { isActive: \"ARCHIVED\" },\r\n  });\r\n}\r\n\r\nexport async function publishFormTemplate(id: string) {\r\n  return await prisma.formTemplate.update({\r\n    where: { id },\r\n    data: { isActive: \"ACTIVE\" },\r\n  });\r\n}\r\n\r\nexport async function draftFormTemplate(id: string) {\r\n  return await prisma.formTemplate.update({\r\n    where: { id },\r\n    data: { isActive: \"DRAFT\" },\r\n  });\r\n}\r\n\r\n// input: { formTemplateId, data, submittedBy, adminUserId, comment, signature }\r\nexport async function createFormSubmission(input: CreateFormSubmissionInput) {\r\n  const { formTemplateId, data, submittedBy, adminUserId, comment, signature } =\r\n    input;\r\n  if (!submittedBy.id) throw new Error(\"Submitted By is required\");\r\n  const created = await prisma.formSubmission.create({\r\n    data: {\r\n      formTemplateId,\r\n      userId: submittedBy.id,\r\n      data,\r\n      status: \"APPROVED\",\r\n      submittedAt: new Date(),\r\n    },\r\n  });\r\n  await prisma.formApproval.create({\r\n    data: {\r\n      formSubmissionId: created.id,\r\n      signedBy: adminUserId ?? null,\r\n      comment: comment || null,\r\n      signature: signature || null,\r\n      submittedAt: new Date(),\r\n      updatedAt: new Date(),\r\n    },\r\n  });\r\n  return created;\r\n}\r\n\r\n// input: { submissionId, data, adminUserId, comment, signature, updateStatus }\r\nexport async function updateFormSubmission(input: UpdateFormSubmissionInput) {\r\n  const { submissionId, data, adminUserId, comment, signature, updateStatus } =\r\n    input;\r\n  const updated = await prisma.formSubmission.update({\r\n    where: { id: submissionId },\r\n    data: {\r\n      data,\r\n      updatedAt: new Date(),\r\n      ...(updateStatus && { status: updateStatus as any }),\r\n    },\r\n  });\r\n  if (adminUserId) {\r\n    const existingApproval = await prisma.formApproval.findFirst({\r\n      where: { formSubmissionId: submissionId, signedBy: adminUserId },\r\n    });\r\n    if (existingApproval) {\r\n      await prisma.formApproval.update({\r\n        where: { id: existingApproval.id },\r\n        data: {\r\n          updatedAt: new Date(),\r\n          comment: comment || existingApproval.comment,\r\n          signature: signature || existingApproval.signature,\r\n        },\r\n      });\r\n    } else {\r\n      await prisma.formApproval.create({\r\n        data: {\r\n          formSubmissionId: submissionId,\r\n          signedBy: adminUserId,\r\n          updatedAt: new Date(),\r\n          comment: comment || null,\r\n          signature: signature || null,\r\n        },\r\n      });\r\n    }\r\n  }\r\n  return updated;\r\n}\r\n\r\nexport async function deleteFormSubmission(submissionId: number) {\r\n  return await prisma.formSubmission.delete({\r\n    where: { id: submissionId },\r\n  });\r\n}\r\n\r\nexport async function getFormSubmissionById(submissionId: number) {\r\n  return await prisma.formSubmission.findUnique({\r\n    where: { id: submissionId },\r\n    include: {\r\n      User: {\r\n        select: {\r\n          id: true,\r\n          firstName: true,\r\n          lastName: true,\r\n          signature: true,\r\n        },\r\n      },\r\n      FormTemplate: {\r\n        include: {\r\n          FormGrouping: {\r\n            include: {\r\n              Fields: {\r\n                include: {\r\n                  Options: true,\r\n                },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n      Approvals: {\r\n        include: {\r\n          Approver: {\r\n            select: { id: true, firstName: true, lastName: true },\r\n          },\r\n        },\r\n        orderBy: { updatedAt: \"desc\" },\r\n      },\r\n    },\r\n  });\r\n}\r\n\r\n// submissionId, action, formData\r\nexport async function approveFormSubmission(\r\n  submissionId: number,\r\n  action: \"APPROVED\" | \"REJECTED\",\r\n  formData: ApproveFormSubmissionInput\r\n) {\r\n  const comment = formData.comment;\r\n  const adminUserId = formData.adminUserId;\r\n  const updated = await prisma.formSubmission.update({\r\n    where: { id: submissionId },\r\n    data: {\r\n      status: action as FormStatus,\r\n      updatedAt: new Date(),\r\n      Approvals: {\r\n        create: {\r\n          signedBy: adminUserId || null,\r\n          comment: comment || null,\r\n          submittedAt: new Date(),\r\n          updatedAt: new Date(),\r\n        },\r\n      },\r\n    },\r\n  });\r\n  return updated;\r\n}\r\n"],"names":[],"mappings":"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","debug_id":"869af0cf-7646-5998-b732-102b1048b690"}