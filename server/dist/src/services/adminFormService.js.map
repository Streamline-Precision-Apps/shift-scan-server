{"version":3,"file":"adminFormService.js","sources":["src/services/adminFormService.ts"],"sourceRoot":"/","sourcesContent":["import prisma from \"../lib/prisma.js\";\nimport {\n  FormTemplateCategory,\n  FormTemplateStatus,\n  FieldType,\n  FormStatus,\n} from \"../../generated/prisma/index.js\";\n\n// --- Types ---\nexport interface FormSettingsData {\n  name: string;\n  description: string;\n  formType: string;\n  requireSignature: boolean;\n  isApprovalRequired: boolean;\n  isActive: string;\n}\n\nexport interface FormFieldOption {\n  id?: string;\n  value: string;\n}\n\nexport interface FormFieldData {\n  id: string;\n  formGroupingId?: string;\n  label: string;\n  type: string;\n  required: boolean;\n  order: number;\n  placeholder?: string;\n  minLength?: number;\n  maxLength?: number;\n  multiple?: boolean;\n  content?: string | null;\n  filter?: string | null;\n  Options?: FormFieldOption[];\n}\n\nexport interface SaveFormData {\n  settings: FormSettingsData;\n  fields: FormFieldData[];\n  companyId: string;\n  formId?: string;\n}\n\nexport interface CreateFormSubmissionInput {\n  formTemplateId: string;\n  data: Record<string, string | number | boolean | null>;\n  submittedBy: {\n    id: string;\n    firstName: string;\n    lastName: string;\n  };\n  adminUserId?: string | null;\n  comment?: string;\n  signature?: string;\n  status?: string;\n}\n\nexport interface UpdateFormSubmissionInput {\n  submissionId: number;\n  data: Record<string, string | number | boolean | null>;\n  adminUserId: string | null;\n  comment?: string;\n  signature?: string;\n  updateStatus?: string;\n}\n\nexport interface ApproveFormSubmissionInput {\n  comment?: string;\n  adminUserId?: string;\n}\n\nexport async function getAllFormTemplates(\n  search: string,\n  page: number | undefined,\n  pageSize: number | undefined,\n  skip: number | undefined,\n  status: string[],\n  formType: string[]\n) {\n  const filter: Record<string, unknown> = {};\n\n  if (status.length === 1) {\n    // Single status\n    const statusForm = status[0];\n    if (statusForm) filter.isActive = statusForm;\n  } else if (status.length > 1) {\n    const statusForms = status.map((s) => s).filter((s) => s);\n    if (statusForms.length > 0) filter.isActive = { in: statusForms };\n  }\n\n  if (formType.length === 1 && formType[0] !== \"ALL\") {\n    // Single form type\n    const type = formType[0];\n    if (type) filter.formType = type;\n  } else if (formType.length > 1) {\n    const types = formType.map((s) => s).filter((s) => s);\n    if (types.length > 0) filter.formType = { in: types };\n  }\n\n  if (search !== \"\") {\n    page = undefined;\n    pageSize = undefined;\n    skip = undefined;\n    const totalPages = 1;\n    const forms = await prisma.formTemplate.findMany({\n      where: {\n        ...filter,\n      },\n      include: {\n        _count: {\n          select: {\n            Submissions: true,\n          },\n        },\n        FormGrouping: {\n          select: {\n            id: true,\n            title: true,\n            order: true,\n            Fields: {\n              select: {\n                label: true,\n                type: true,\n                required: true,\n                order: true,\n                placeholder: true,\n                minLength: true,\n                maxLength: true,\n                multiple: true,\n                content: true,\n                filter: true,\n                Options: true,\n              },\n            },\n          },\n        },\n      },\n      orderBy: {\n        createdAt: \"desc\",\n      },\n    });\n    const total = forms.length;\n    return {\n      data: forms,\n      page,\n      pageSize,\n      total,\n      totalPages,\n    };\n  } else {\n    page = page || 1;\n    pageSize = pageSize || 10;\n    skip = (page - 1) * pageSize;\n    const take = pageSize;\n    // Fetch total count for pagination\n    const total = await prisma.formTemplate.count();\n    const totalPages = Math.ceil(total / pageSize);\n    // Get total count for pagination\n\n    const forms = await prisma.formTemplate.findMany({\n      where: {\n        ...filter,\n      },\n      skip,\n      take,\n      include: {\n        _count: {\n          select: {\n            Submissions: true,\n          },\n        },\n        FormGrouping: {\n          select: {\n            id: true,\n            title: true,\n            order: true,\n            Fields: {\n              select: {\n                label: true,\n                type: true,\n                required: true,\n                order: true,\n                placeholder: true,\n                minLength: true,\n                maxLength: true,\n                multiple: true,\n                content: true,\n                filter: true,\n                Options: true,\n              },\n            },\n          },\n        },\n      },\n      orderBy: {\n        createdAt: \"desc\",\n      },\n    });\n    return {\n      data: forms,\n      page,\n      pageSize,\n      total,\n      totalPages,\n    };\n  }\n}\n\nexport async function getFormSubmissionByTemplateId(\n  id: string,\n  search: string | null,\n  page: number,\n  pageSize: number,\n  pendingOnly: boolean,\n  statusFilter: string,\n  dateRangeStart: string | null,\n  dateRangeEnd: string | null\n) {\n  // If pendingOnly or searching, do not paginate (return all matching submissions)\n  const isSearching = search !== null && search !== undefined && search !== \"\";\n  const skip = pendingOnly || isSearching ? undefined : (page - 1) * pageSize;\n  const take = pendingOnly || isSearching ? undefined : pageSize;\n\n  // (moved up)\n\n  // Determine the status condition for queries\n  let statusCondition: FormStatus | undefined;\n  if (pendingOnly) {\n    statusCondition = \"PENDING\";\n  } else if (statusFilter && statusFilter !== \"ALL\") {\n    statusCondition = statusFilter as FormStatus;\n  }\n\n  const total = await prisma.formSubmission.count({\n    where: {\n      formTemplateId: id,\n      NOT: {\n        status: \"DRAFT\",\n      },\n      ...(statusCondition && { status: statusCondition }),\n    },\n  });\n\n  // Count of pending submissions for inbox\n  const pendingForms = await prisma.formSubmission.count({\n    where: {\n      formTemplateId: id,\n      status: \"PENDING\",\n    },\n  });\n\n  const formTemplate = await prisma.formTemplate.findUnique({\n    where: { id },\n    include: {\n      FormGrouping: {\n        select: {\n          id: true,\n          title: true,\n          order: true,\n          Fields: {\n            select: {\n              id: true,\n              label: true,\n              type: true,\n              required: true,\n              order: true,\n              placeholder: true,\n              minLength: true,\n              maxLength: true,\n              multiple: true,\n              content: true,\n              filter: true,\n              Options: true,\n            },\n          },\n        },\n      },\n    },\n  });\n\n  const submissions = await prisma.formSubmission.findMany({\n    where: {\n      formTemplateId: id,\n      NOT: {\n        status: \"DRAFT\",\n      },\n      ...(statusCondition && { status: statusCondition }),\n      ...(dateRangeStart || dateRangeEnd\n        ? {\n            submittedAt: {\n              ...(dateRangeStart && { gte: new Date(dateRangeStart) }),\n              ...(dateRangeEnd && { lte: new Date(dateRangeEnd) }),\n            },\n          }\n        : {}),\n    },\n    ...(skip !== undefined ? { skip } : {}),\n    ...(take !== undefined ? { take } : {}),\n    orderBy: { submittedAt: \"desc\" },\n    include: {\n      User: {\n        select: {\n          id: true,\n          firstName: true,\n          lastName: true,\n          signature: true,\n        },\n      },\n    },\n  });\n\n  return {\n    ...formTemplate,\n    Submissions: submissions,\n    total,\n    page: pendingOnly || isSearching ? 1 : page,\n    pageSize: pendingOnly || isSearching ? submissions.length : pageSize,\n    totalPages: pendingOnly || isSearching ? 1 : Math.ceil(total / pageSize),\n    pendingForms,\n  };\n}\n\nexport async function getFormTemplateById(id: string) {\n  return await prisma.formTemplate.findUnique({\n    where: { id },\n    include: {\n      FormGrouping: {\n        include: {\n          Fields: {\n            include: {\n              Options: true,\n            },\n          },\n        },\n      },\n    },\n  });\n}\n\nexport async function getFormSubmissions(\n  formTemplateId: string,\n  dateRange?: {\n    from?: Date;\n    to?: Date;\n  }\n) {\n  const submittedAtFilter: Record<string, Date> = {};\n  if (dateRange?.from) submittedAtFilter.gte = dateRange.from;\n  if (dateRange?.to) submittedAtFilter.lte = dateRange.to;\n\n  return await prisma.formSubmission.findMany({\n    where: {\n      formTemplateId,\n      ...(Object.keys(submittedAtFilter).length > 0 && {\n        submittedAt: submittedAtFilter,\n      }),\n    },\n    include: {\n      User: {\n        select: {\n          firstName: true,\n          lastName: true,\n        },\n      },\n    },\n  });\n}\n\n// data: { settings, fields, companyId }\nexport async function createFormTemplate(data: SaveFormData) {\n  const { settings, fields, companyId } = data;\n  return await prisma.$transaction(async (tx) => {\n    const formTemplate = await tx.formTemplate.create({\n      data: {\n        companyId: companyId || \"1\",\n        name: settings.name,\n        description: settings.description || null,\n        formType: settings.formType as FormTemplateCategory,\n        isActive: settings.isActive as FormTemplateStatus,\n        isSignatureRequired: settings.requireSignature,\n        isApprovalRequired: settings.isApprovalRequired,\n      },\n    });\n    const formGrouping = await tx.formGrouping.create({\n      data: {\n        title: settings.name,\n        order: 0,\n      },\n    });\n    await tx.formTemplate.update({\n      where: { id: formTemplate.id },\n      data: {\n        FormGrouping: {\n          connect: { id: formGrouping.id },\n        },\n      },\n    });\n    for (const field of fields) {\n      const formField = await tx.formField.create({\n        data: {\n          formGroupingId: formGrouping.id,\n          label: field.label,\n          type: field.type as FieldType,\n          required: field.required,\n          order: field.order,\n          placeholder: field.placeholder ?? null,\n          multiple: field.multiple || false,\n          content: field.content || null,\n          filter: field.filter || null,\n          minLength: field.minLength !== undefined ? field.minLength : null,\n          maxLength: field.maxLength !== undefined ? field.maxLength : null,\n        },\n      });\n      if (\n        [\"DROPDOWN\", \"RADIO\", \"MULTISELECT\"].includes(\n          field.type?.toUpperCase?.()\n        ) &&\n        field.Options &&\n        field.Options.length > 0\n      ) {\n        for (const option of field.Options) {\n          const optionData =\n            typeof option === \"string\" ? { value: option } : option;\n          await tx.formFieldOption.create({\n            data: {\n              fieldId: formField.id,\n              value: optionData.value,\n            },\n          });\n        }\n      }\n    }\n    return formTemplate;\n  });\n}\n// data: { settings, fields, formId }\nexport async function updateFormTemplate(data: SaveFormData) {\n  const { settings, fields, formId } = data;\n  if (!formId) {\n    throw new Error(\"formId is required for updating a form template\");\n  }\n  await prisma.formTemplate.update({\n    where: { id: formId },\n    data: {\n      name: settings.name,\n      formType: settings.formType as FormTemplateCategory,\n      isActive:\n        (settings.isActive as FormTemplateStatus) || FormTemplateStatus.DRAFT,\n      isSignatureRequired: settings.requireSignature,\n      isApprovalRequired: settings.isApprovalRequired,\n      description: settings.description,\n    },\n  });\n  const groupings = await prisma.formGrouping.findMany({\n    where: { FormTemplate: { some: { id: formId } } },\n  });\n  let formGroupingId = groupings[0]?.id;\n  if (!formGroupingId) {\n    const newGrouping = await prisma.formGrouping.create({\n      data: { title: settings.name, order: 0 },\n    });\n    await prisma.formTemplate.update({\n      where: { id: formId },\n      data: { FormGrouping: { connect: { id: newGrouping.id } } },\n    });\n    formGroupingId = newGrouping.id;\n  }\n  const existingFields = await prisma.formField.findMany({\n    where: { formGroupingId },\n    include: { Options: true },\n  });\n  const existingFieldMap = new Map(existingFields.map((f) => [f.id, f]));\n  const submittedFieldIds = new Set(fields.map((f) => f.id));\n  for (const oldField of existingFields) {\n    if (!submittedFieldIds.has(oldField.id)) {\n      await prisma.formFieldOption.deleteMany({\n        where: { fieldId: oldField.id },\n      });\n      await prisma.formField.delete({ where: { id: oldField.id } });\n    }\n  }\n  for (const field of fields) {\n    let formFieldId = field.id;\n    const isExisting = existingFieldMap.has(field.id);\n    if (isExisting) {\n      await prisma.formField.update({\n        where: { id: field.id },\n        data: {\n          label: field.label,\n          type: field.type as FieldType,\n          required: field.required,\n          order: field.order,\n          placeholder:\n            field.placeholder !== undefined ? field.placeholder : null,\n          minLength: field.minLength !== undefined ? field.minLength : null,\n          maxLength: field.maxLength !== undefined ? field.maxLength : null,\n          multiple: field.multiple !== undefined ? field.multiple : null,\n          content: field.content !== undefined ? field.content : null,\n          filter: field.filter !== undefined ? field.filter : null,\n          formGroupingId,\n        },\n      });\n      await prisma.formFieldOption.deleteMany({ where: { fieldId: field.id } });\n    } else {\n      const created = await prisma.formField.create({\n        data: {\n          id: field.id,\n          formGroupingId,\n          label: field.label,\n          type: field.type as FieldType,\n          required: field.required,\n          order: field.order,\n          placeholder:\n            field.placeholder !== undefined ? field.placeholder : null,\n          maxLength: field.maxLength !== undefined ? field.maxLength : null,\n          minLength: field.minLength !== undefined ? field.minLength : null,\n          multiple: field.multiple || false,\n          content: field.content || null,\n          filter: field.filter || null,\n        },\n      });\n      formFieldId = created.id;\n    }\n    if (\n      [\"DROPDOWN\", \"RADIO\", \"MULTISELECT\"].includes(field.type) &&\n      field.Options &&\n      field.Options.length > 0\n    ) {\n      for (const option of field.Options) {\n        await prisma.formFieldOption.create({\n          data: {\n            fieldId: formFieldId,\n            value: option.value,\n          },\n        });\n      }\n    }\n    if (\n      field.type === \"TEXTAREA\" ||\n      field.type === \"TEXT\" ||\n      field.type === \"NUMBER\"\n    ) {\n      await prisma.formField.update({\n        where: { id: formFieldId },\n        data: {\n          maxLength: field.maxLength !== undefined ? field.maxLength : null,\n        },\n      });\n    }\n    if (field.type === \"DATE\" || field.type === \"TIME\") {\n      await prisma.formField.update({\n        where: { id: formFieldId },\n        data: {\n          placeholder:\n            field.placeholder !== undefined ? field.placeholder : null,\n        },\n      });\n    }\n  }\n  return { success: true, formId, message: \"Form updated successfully\" };\n}\n\nexport async function deleteFormTemplate(id: string) {\n  return await prisma.formTemplate.delete({\n    where: { id },\n  });\n}\n\nexport async function archiveFormTemplate(id: string) {\n  return await prisma.formTemplate.update({\n    where: { id },\n    data: { isActive: \"ARCHIVED\" },\n  });\n}\n\nexport async function publishFormTemplate(id: string) {\n  return await prisma.formTemplate.update({\n    where: { id },\n    data: { isActive: \"ACTIVE\" },\n  });\n}\n\nexport async function draftFormTemplate(id: string) {\n  return await prisma.formTemplate.update({\n    where: { id },\n    data: { isActive: \"DRAFT\" },\n  });\n}\n\n// input: { formTemplateId, data, submittedBy, adminUserId, comment, signature }\nexport async function createFormSubmission(input: CreateFormSubmissionInput) {\n  const { formTemplateId, data, submittedBy, adminUserId, comment, signature } =\n    input;\n  if (!submittedBy.id) throw new Error(\"Submitted By is required\");\n  const created = await prisma.formSubmission.create({\n    data: {\n      formTemplateId,\n      userId: submittedBy.id,\n      data,\n      status: \"APPROVED\",\n      submittedAt: new Date(),\n    },\n  });\n  await prisma.formApproval.create({\n    data: {\n      formSubmissionId: created.id,\n      signedBy: adminUserId ?? null,\n      comment: comment || null,\n      signature: signature || null,\n      submittedAt: new Date(),\n      updatedAt: new Date(),\n    },\n  });\n  return created;\n}\n\n// input: { submissionId, data, adminUserId, comment, signature, updateStatus }\nexport async function updateFormSubmission(input: UpdateFormSubmissionInput) {\n  const { submissionId, data, adminUserId, comment, signature, updateStatus } =\n    input;\n  const updated = await prisma.formSubmission.update({\n    where: { id: submissionId },\n    data: {\n      data,\n      updatedAt: new Date(),\n      ...(updateStatus && { status: updateStatus as any }),\n    },\n  });\n  if (adminUserId) {\n    const existingApproval = await prisma.formApproval.findFirst({\n      where: { formSubmissionId: submissionId, signedBy: adminUserId },\n    });\n    if (existingApproval) {\n      await prisma.formApproval.update({\n        where: { id: existingApproval.id },\n        data: {\n          updatedAt: new Date(),\n          comment: comment || existingApproval.comment,\n          signature: signature || existingApproval.signature,\n        },\n      });\n    } else {\n      await prisma.formApproval.create({\n        data: {\n          formSubmissionId: submissionId,\n          signedBy: adminUserId,\n          updatedAt: new Date(),\n          comment: comment || null,\n          signature: signature || null,\n        },\n      });\n    }\n  }\n  return updated;\n}\n\nexport async function deleteFormSubmission(submissionId: number) {\n  return await prisma.formSubmission.delete({\n    where: { id: submissionId },\n  });\n}\n\nexport async function getFormSubmissionById(submissionId: number) {\n  return await prisma.formSubmission.findUnique({\n    where: { id: submissionId },\n    include: {\n      User: {\n        select: {\n          id: true,\n          firstName: true,\n          lastName: true,\n          signature: true,\n        },\n      },\n      FormTemplate: {\n        include: {\n          FormGrouping: {\n            include: {\n              Fields: {\n                include: {\n                  Options: true,\n                },\n              },\n            },\n          },\n        },\n      },\n      Approvals: {\n        include: {\n          Approver: {\n            select: {\n              id: true,\n              firstName: true,\n              lastName: true,\n              signature: true,\n            },\n          },\n        },\n        orderBy: { updatedAt: \"desc\" },\n      },\n    },\n  });\n}\n\n// submissionId, action, formData\nexport async function approveFormSubmission(\n  submissionId: number,\n  action: \"APPROVED\" | \"REJECTED\",\n  formData: ApproveFormSubmissionInput\n) {\n  const comment = formData.comment;\n  const adminUserId = formData.adminUserId;\n  const updated = await prisma.formSubmission.update({\n    where: { id: submissionId },\n    data: {\n      status: action as FormStatus,\n      updatedAt: new Date(),\n      Approvals: {\n        create: {\n          signedBy: adminUserId || null,\n          comment: comment || null,\n          submittedAt: new Date(),\n          updatedAt: new Date(),\n        },\n      },\n    },\n  });\n  return updated;\n}\n"],"names":[],"mappings":"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","debug_id":"c30ba9cf-914e-5530-b289-1e9879e34a68"}