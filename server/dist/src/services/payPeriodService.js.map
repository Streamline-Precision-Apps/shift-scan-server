{"version":3,"file":"payPeriodService.js","sources":["src/services/payPeriodService.ts"],"sourceRoot":"/","sourcesContent":["// server/src/services/payPeriodService.ts\r\nimport prisma from \"../lib/prisma.js\";\r\n\r\n// Utility to calculate the start date of the current pay period\r\nexport function calculatePayPeriodStart(): Date {\r\n  const startDate = new Date(2024, 7, 5); // August 5, 2024\r\n  const now = new Date();\r\n  const diffWeeks = Math.floor(\r\n    (now.getTime() - startDate.getTime()) / (2 * 7 * 24 * 60 * 60 * 1000)\r\n  ); // Two-week intervals\r\n  return new Date(\r\n    startDate.getTime() + diffWeeks * 2 * 7 * 24 * 60 * 60 * 1000\r\n  );\r\n}\r\n\r\nexport async function getPayPeriodSheets(userId: string) {\r\n  const payPeriodStart = calculatePayPeriodStart();\r\n  const currentDate = new Date();\r\n  return prisma.timeSheet.findMany({\r\n    where: {\r\n      userId,\r\n      startTime: {\r\n        gte: payPeriodStart,\r\n        lte: currentDate,\r\n      },\r\n      endTime: {\r\n        not: null,\r\n      },\r\n    },\r\n    select: {\r\n      id: true,\r\n      startTime: true,\r\n      endTime: true,\r\n    },\r\n  });\r\n}\r\n"],"names":[],"mappings":"AAAA,0CAA0C;;;AAC1C,OAAO,MAAM,MAAM,kBAAkB,CAAC;AAEtC,gEAAgE;AAChE,MAAM,UAAU,uBAAuB;IACrC,MAAM,SAAS,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,iBAAiB;IACzD,MAAM,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC;IACvB,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAC1B,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,SAAS,CAAC,OAAO,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CACtE,CAAC,CAAC,qBAAqB;IACxB,OAAO,IAAI,IAAI,CACb,SAAS,CAAC,OAAO,EAAE,GAAG,SAAS,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAC9D,CAAC;AACJ,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,kBAAkB,CAAC,MAAc;IACrD,MAAM,cAAc,GAAG,uBAAuB,EAAE,CAAC;IACjD,MAAM,WAAW,GAAG,IAAI,IAAI,EAAE,CAAC;IAC/B,OAAO,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC;QAC/B,KAAK,EAAE;YACL,MAAM;YACN,SAAS,EAAE;gBACT,GAAG,EAAE,cAAc;gBACnB,GAAG,EAAE,WAAW;aACjB;YACD,OAAO,EAAE;gBACP,GAAG,EAAE,IAAI;aACV;SACF;QACD,MAAM,EAAE;YACN,EAAE,EAAE,IAAI;YACR,SAAS,EAAE,IAAI;YACf,OAAO,EAAE,IAAI;SACd;KACF,CAAC,CAAC;AACL,CAAC","debug_id":"69e38397-78d1-5de2-bc4b-78764076940c"}