{"version":3,"file":"mechanicService.js","sources":["src/services/mechanicService.ts"],"sourceRoot":"/","sourcesContent":["import prisma from \"../lib/prisma.js\";\r\nimport type {} from \"../../generated/prisma/client.js\";\r\n\r\nexport async function getMechanicLogsService(timesheetId: number) {\r\n  const projects = await prisma.mechanicProjects.findMany({\r\n    where: { timeSheetId: timesheetId },\r\n    select: {\r\n      id: true,\r\n      equipmentId: true,\r\n      description: true,\r\n      hours: true,\r\n      Equipment: {\r\n        select: {\r\n          id: true,\r\n          name: true,\r\n        },\r\n      },\r\n    },\r\n  });\r\n  return projects;\r\n}\r\n\r\nexport async function createMechanicLogService({\r\n  timeSheetId,\r\n  equipmentId,\r\n  hours,\r\n  description,\r\n}: {\r\n  timeSheetId: number;\r\n  equipmentId: string;\r\n  hours?: number;\r\n  description?: string;\r\n}) {\r\n  return await prisma.mechanicProjects.create({\r\n    data: {\r\n      timeSheetId,\r\n      equipmentId,\r\n      hours: hours || 0,\r\n      description: description || \"\",\r\n    },\r\n  });\r\n}\r\n\r\nexport async function updateMechanicLogService(\r\n  projectId: number,\r\n  {\r\n    equipmentId,\r\n    hours,\r\n    description,\r\n  }: {\r\n    equipmentId?: string;\r\n    hours?: number;\r\n    description?: string;\r\n  }\r\n) {\r\n  const updateData: {\r\n    equipmentId?: string;\r\n    hours?: number;\r\n    description?: string;\r\n  } = {};\r\n\r\n  if (equipmentId) updateData.equipmentId = equipmentId;\r\n  if (hours !== undefined) updateData.hours = hours;\r\n  if (description !== undefined) updateData.description = description;\r\n\r\n  return await prisma.mechanicProjects.update({\r\n    where: { id: projectId },\r\n    data: updateData,\r\n  });\r\n}\r\n\r\nexport async function deleteMechanicLogService(projectId: number) {\r\n  return await prisma.mechanicProjects.delete({\r\n    where: { id: projectId },\r\n  });\r\n}\r\n\r\nexport async function getMechanicLogService(id: number) {\r\n  return await prisma.mechanicProjects.findUnique({\r\n    where: { id },\r\n    select: {\r\n      id: true,\r\n      equipmentId: true,\r\n      description: true,\r\n      hours: true,\r\n      Equipment: {\r\n        select: {\r\n          id: true,\r\n          name: true,\r\n        },\r\n      },\r\n    },\r\n  });\r\n}\r\n"],"names":[],"mappings":";;AAAA,OAAO,MAAM,MAAM,kBAAkB,CAAC;AAGtC,MAAM,CAAC,KAAK,UAAU,sBAAsB,CAAC,WAAmB;IAC9D,MAAM,QAAQ,GAAG,MAAM,MAAM,CAAC,gBAAgB,CAAC,QAAQ,CAAC;QACtD,KAAK,EAAE,EAAE,WAAW,EAAE,WAAW,EAAE;QACnC,MAAM,EAAE;YACN,EAAE,EAAE,IAAI;YACR,WAAW,EAAE,IAAI;YACjB,WAAW,EAAE,IAAI;YACjB,KAAK,EAAE,IAAI;YACX,SAAS,EAAE;gBACT,MAAM,EAAE;oBACN,EAAE,EAAE,IAAI;oBACR,IAAI,EAAE,IAAI;iBACX;aACF;SACF;KACF,CAAC,CAAC;IACH,OAAO,QAAQ,CAAC;AAClB,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,wBAAwB,CAAC,EAC7C,WAAW,EACX,WAAW,EACX,KAAK,EACL,WAAW,GAMZ;IACC,OAAO,MAAM,MAAM,CAAC,gBAAgB,CAAC,MAAM,CAAC;QAC1C,IAAI,EAAE;YACJ,WAAW;YACX,WAAW;YACX,KAAK,EAAE,KAAK,IAAI,CAAC;YACjB,WAAW,EAAE,WAAW,IAAI,EAAE;SAC/B;KACF,CAAC,CAAC;AACL,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,wBAAwB,CAC5C,SAAiB,EACjB,EACE,WAAW,EACX,KAAK,EACL,WAAW,GAKZ;IAED,MAAM,UAAU,GAIZ,EAAE,CAAC;IAEP,IAAI,WAAW;QAAE,UAAU,CAAC,WAAW,GAAG,WAAW,CAAC;IACtD,IAAI,KAAK,KAAK,SAAS;QAAE,UAAU,CAAC,KAAK,GAAG,KAAK,CAAC;IAClD,IAAI,WAAW,KAAK,SAAS;QAAE,UAAU,CAAC,WAAW,GAAG,WAAW,CAAC;IAEpE,OAAO,MAAM,MAAM,CAAC,gBAAgB,CAAC,MAAM,CAAC;QAC1C,KAAK,EAAE,EAAE,EAAE,EAAE,SAAS,EAAE;QACxB,IAAI,EAAE,UAAU;KACjB,CAAC,CAAC;AACL,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,wBAAwB,CAAC,SAAiB;IAC9D,OAAO,MAAM,MAAM,CAAC,gBAAgB,CAAC,MAAM,CAAC;QAC1C,KAAK,EAAE,EAAE,EAAE,EAAE,SAAS,EAAE;KACzB,CAAC,CAAC;AACL,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,qBAAqB,CAAC,EAAU;IACpD,OAAO,MAAM,MAAM,CAAC,gBAAgB,CAAC,UAAU,CAAC;QAC9C,KAAK,EAAE,EAAE,EAAE,EAAE;QACb,MAAM,EAAE;YACN,EAAE,EAAE,IAAI;YACR,WAAW,EAAE,IAAI;YACjB,WAAW,EAAE,IAAI;YACjB,KAAK,EAAE,IAAI;YACX,SAAS,EAAE;gBACT,MAAM,EAAE;oBACN,EAAE,EAAE,IAAI;oBACR,IAAI,EAAE,IAAI;iBACX;aACF;SACF;KACF,CAAC,CAAC;AACL,CAAC","debug_id":"300c1a96-f940-5056-90ad-4f109678f32a"}