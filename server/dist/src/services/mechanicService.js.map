{"version":3,"file":"mechanicService.js","sources":["src/services/mechanicService.ts"],"sourceRoot":"/","sourcesContent":["import prisma from \"../lib/prisma.js\";\nimport type {} from \"../../generated/prisma/client.js\";\n\nexport async function getMechanicLogsService(timesheetId: number) {\n  const projects = await prisma.mechanicProjects.findMany({\n    where: { timeSheetId: timesheetId },\n    select: {\n      id: true,\n      equipmentId: true,\n      description: true,\n      hours: true,\n      Equipment: {\n        select: {\n          id: true,\n          name: true,\n        },\n      },\n    },\n  });\n  return projects;\n}\n\nexport async function createMechanicLogService({\n  timeSheetId,\n  equipmentId,\n  hours,\n  description,\n}: {\n  timeSheetId: number;\n  equipmentId: string;\n  hours?: number;\n  description?: string;\n}) {\n  return await prisma.mechanicProjects.create({\n    data: {\n      timeSheetId,\n      equipmentId,\n      hours: hours || 0,\n      description: description || \"\",\n    },\n  });\n}\n\nexport async function updateMechanicLogService(\n  projectId: number,\n  {\n    equipmentId,\n    hours,\n    description,\n  }: {\n    equipmentId?: string;\n    hours?: number;\n    description?: string;\n  }\n) {\n  const updateData: {\n    equipmentId?: string;\n    hours?: number;\n    description?: string;\n  } = {};\n\n  if (equipmentId) updateData.equipmentId = equipmentId;\n  if (hours !== undefined) updateData.hours = hours;\n  if (description !== undefined) updateData.description = description;\n\n  return await prisma.mechanicProjects.update({\n    where: { id: projectId },\n    data: updateData,\n  });\n}\n\nexport async function deleteMechanicLogService(projectId: number) {\n  return await prisma.mechanicProjects.delete({\n    where: { id: projectId },\n  });\n}\n\nexport async function getMechanicLogService(id: number) {\n  return await prisma.mechanicProjects.findUnique({\n    where: { id },\n    select: {\n      id: true,\n      equipmentId: true,\n      description: true,\n      hours: true,\n      Equipment: {\n        select: {\n          id: true,\n          name: true,\n        },\n      },\n    },\n  });\n}\n"],"names":[],"mappings":";;AAAA,OAAO,MAAM,MAAM,kBAAkB,CAAC;AAGtC,MAAM,CAAC,KAAK,UAAU,sBAAsB,CAAC,WAAmB;IAC9D,MAAM,QAAQ,GAAG,MAAM,MAAM,CAAC,gBAAgB,CAAC,QAAQ,CAAC;QACtD,KAAK,EAAE,EAAE,WAAW,EAAE,WAAW,EAAE;QACnC,MAAM,EAAE;YACN,EAAE,EAAE,IAAI;YACR,WAAW,EAAE,IAAI;YACjB,WAAW,EAAE,IAAI;YACjB,KAAK,EAAE,IAAI;YACX,SAAS,EAAE;gBACT,MAAM,EAAE;oBACN,EAAE,EAAE,IAAI;oBACR,IAAI,EAAE,IAAI;iBACX;aACF;SACF;KACF,CAAC,CAAC;IACH,OAAO,QAAQ,CAAC;AAClB,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,wBAAwB,CAAC,EAC7C,WAAW,EACX,WAAW,EACX,KAAK,EACL,WAAW,GAMZ;IACC,OAAO,MAAM,MAAM,CAAC,gBAAgB,CAAC,MAAM,CAAC;QAC1C,IAAI,EAAE;YACJ,WAAW;YACX,WAAW;YACX,KAAK,EAAE,KAAK,IAAI,CAAC;YACjB,WAAW,EAAE,WAAW,IAAI,EAAE;SAC/B;KACF,CAAC,CAAC;AACL,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,wBAAwB,CAC5C,SAAiB,EACjB,EACE,WAAW,EACX,KAAK,EACL,WAAW,GAKZ;IAED,MAAM,UAAU,GAIZ,EAAE,CAAC;IAEP,IAAI,WAAW;QAAE,UAAU,CAAC,WAAW,GAAG,WAAW,CAAC;IACtD,IAAI,KAAK,KAAK,SAAS;QAAE,UAAU,CAAC,KAAK,GAAG,KAAK,CAAC;IAClD,IAAI,WAAW,KAAK,SAAS;QAAE,UAAU,CAAC,WAAW,GAAG,WAAW,CAAC;IAEpE,OAAO,MAAM,MAAM,CAAC,gBAAgB,CAAC,MAAM,CAAC;QAC1C,KAAK,EAAE,EAAE,EAAE,EAAE,SAAS,EAAE;QACxB,IAAI,EAAE,UAAU;KACjB,CAAC,CAAC;AACL,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,wBAAwB,CAAC,SAAiB;IAC9D,OAAO,MAAM,MAAM,CAAC,gBAAgB,CAAC,MAAM,CAAC;QAC1C,KAAK,EAAE,EAAE,EAAE,EAAE,SAAS,EAAE;KACzB,CAAC,CAAC;AACL,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,qBAAqB,CAAC,EAAU;IACpD,OAAO,MAAM,MAAM,CAAC,gBAAgB,CAAC,UAAU,CAAC;QAC9C,KAAK,EAAE,EAAE,EAAE,EAAE;QACb,MAAM,EAAE;YACN,EAAE,EAAE,IAAI;YACR,WAAW,EAAE,IAAI;YACjB,WAAW,EAAE,IAAI;YACjB,KAAK,EAAE,IAAI;YACX,SAAS,EAAE;gBACT,MAAM,EAAE;oBACN,EAAE,EAAE,IAAI;oBACR,IAAI,EAAE,IAAI;iBACX;aACF;SACF;KACF,CAAC,CAAC;AACL,CAAC","debug_id":"9a861f6f-85b5-5fef-817a-fefeddacedee"}