{"version":3,"file":"initService.js","sources":["src/services/initService.ts"],"sourceRoot":"/","sourcesContent":["// server/src/services/initService.ts\r\nimport prisma from \"../lib/prisma.js\";\r\n\r\nexport async function getUserWithSettingsById(userId: string) {\r\n  const user = await prisma.user.findUnique({\r\n    where: { id: userId },\r\n    select: {\r\n      id: true,\r\n      firstName: true,\r\n      lastName: true,\r\n      username: true,\r\n      email: true,\r\n      signature: true,\r\n      DOB: true,\r\n      truckView: true,\r\n      tascoView: true,\r\n      laborView: true,\r\n      mechanicView: true,\r\n      permission: true,\r\n      image: true,\r\n      terminationDate: true,\r\n      accountSetup: true,\r\n      clockedIn: true,\r\n      companyId: true,\r\n      middleName: true,\r\n      secondLastName: true,\r\n      lastSeen: true,\r\n      accountSetupToken: true,\r\n      Contact: true,\r\n      UserSettings: true,\r\n    },\r\n  });\r\n\r\n  // Jobsites (for profitStore)\r\n  const jobsites = await prisma.jobsite.findMany({\r\n    select: {\r\n      id: true,\r\n      qrId: true,\r\n      name: true,\r\n      code: true,\r\n      approvalStatus: true,\r\n      archiveDate: true,\r\n      status: true,\r\n    },\r\n  });\r\n\r\n  // Equipment (for equipmentStore)\r\n  const equipments = await prisma.equipment.findMany({\r\n    select: {\r\n      id: true,\r\n      name: true,\r\n      qrId: true,\r\n      code: true,\r\n      approvalStatus: true,\r\n      status: true,\r\n      equipmentTag: true,\r\n    },\r\n  });\r\n\r\n  // CostCodes (for costCodeStore)\r\n  const costCodes = await prisma.costCode.findMany({\r\n    select: {\r\n      id: true,\r\n      name: true,\r\n      isActive: true,\r\n      code: true,\r\n      CCTags: {\r\n        select: {\r\n          id: true,\r\n          name: true,\r\n          description: true,\r\n          Jobsites: {\r\n            select: {\r\n              id: true,\r\n              name: true,\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  });\r\n\r\n  return {\r\n    user,\r\n    jobsites,\r\n    equipments,\r\n    costCodes,\r\n  };\r\n}\r\n"],"names":[],"mappings":"AAAA,qCAAqC;;;AACrC,OAAO,MAAM,MAAM,kBAAkB,CAAC;AAEtC,MAAM,CAAC,KAAK,UAAU,uBAAuB,CAAC,MAAc;IAC1D,MAAM,IAAI,GAAG,MAAM,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;QACxC,KAAK,EAAE,EAAE,EAAE,EAAE,MAAM,EAAE;QACrB,MAAM,EAAE;YACN,EAAE,EAAE,IAAI;YACR,SAAS,EAAE,IAAI;YACf,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,KAAK,EAAE,IAAI;YACX,SAAS,EAAE,IAAI;YACf,GAAG,EAAE,IAAI;YACT,SAAS,EAAE,IAAI;YACf,SAAS,EAAE,IAAI;YACf,SAAS,EAAE,IAAI;YACf,YAAY,EAAE,IAAI;YAClB,UAAU,EAAE,IAAI;YAChB,KAAK,EAAE,IAAI;YACX,eAAe,EAAE,IAAI;YACrB,YAAY,EAAE,IAAI;YAClB,SAAS,EAAE,IAAI;YACf,SAAS,EAAE,IAAI;YACf,UAAU,EAAE,IAAI;YAChB,cAAc,EAAE,IAAI;YACpB,QAAQ,EAAE,IAAI;YACd,iBAAiB,EAAE,IAAI;YACvB,OAAO,EAAE,IAAI;YACb,YAAY,EAAE,IAAI;SACnB;KACF,CAAC,CAAC;IAEH,6BAA6B;IAC7B,MAAM,QAAQ,GAAG,MAAM,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC;QAC7C,MAAM,EAAE;YACN,EAAE,EAAE,IAAI;YACR,IAAI,EAAE,IAAI;YACV,IAAI,EAAE,IAAI;YACV,IAAI,EAAE,IAAI;YACV,cAAc,EAAE,IAAI;YACpB,WAAW,EAAE,IAAI;YACjB,MAAM,EAAE,IAAI;SACb;KACF,CAAC,CAAC;IAEH,iCAAiC;IACjC,MAAM,UAAU,GAAG,MAAM,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC;QACjD,MAAM,EAAE;YACN,EAAE,EAAE,IAAI;YACR,IAAI,EAAE,IAAI;YACV,IAAI,EAAE,IAAI;YACV,IAAI,EAAE,IAAI;YACV,cAAc,EAAE,IAAI;YACpB,MAAM,EAAE,IAAI;YACZ,YAAY,EAAE,IAAI;SACnB;KACF,CAAC,CAAC;IAEH,gCAAgC;IAChC,MAAM,SAAS,GAAG,MAAM,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC;QAC/C,MAAM,EAAE;YACN,EAAE,EAAE,IAAI;YACR,IAAI,EAAE,IAAI;YACV,QAAQ,EAAE,IAAI;YACd,IAAI,EAAE,IAAI;YACV,MAAM,EAAE;gBACN,MAAM,EAAE;oBACN,EAAE,EAAE,IAAI;oBACR,IAAI,EAAE,IAAI;oBACV,WAAW,EAAE,IAAI;oBACjB,QAAQ,EAAE;wBACR,MAAM,EAAE;4BACN,EAAE,EAAE,IAAI;4BACR,IAAI,EAAE,IAAI;yBACX;qBACF;iBACF;aACF;SACF;KACF,CAAC,CAAC;IAEH,OAAO;QACL,IAAI;QACJ,QAAQ;QACR,UAAU;QACV,SAAS;KACV,CAAC;AACJ,CAAC","debug_id":"0e782a11-7a6b-526a-b4aa-4abcc2c72870"}