{"version":3,"file":"blobRoute.js","sources":["src/routes/blobRoute.ts"],"sourceRoot":"/","sourcesContent":["import { Router } from \"express\";\nimport multer from \"multer\";\n\nimport { requireFirebaseEnv } from \"../middleware/requireFirebaseEnv.js\";\nimport { blobDelete, blobUpload } from \"../controllers/blobsController.js\";\n\nconst router = Router();\n\n// Configure Multer for file uploads (store in memory)\nconst upload = multer({ storage: multer.memoryStorage() });\n\n/**\n * @swagger\n * /api/storage/upload:\n *   post:\n *     tags:\n *       - Storage\n *     summary: Upload a file (image/pdf) to storage\n *     description: Uploads a file to Firebase Storage. Requires multipart/form-data with a file and userId.\n *     requestBody:\n *       required: true\n *       content:\n *         multipart/form-data:\n *           schema:\n *             type: object\n *             properties:\n *               userId:\n *                 type: string\n *               folder:\n *                 type: string\n *               file:\n *                 type: string\n *                 format: binary\n *           description: \"'folder' is optional. Default is 'profileImages'.\"\n *     responses:\n *       200:\n *         description: File uploaded successfully\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 url:\n *                   type: string\n *       400:\n *         description: Bad request\n *       500:\n *         description: Upload failed\n */\nrouter.post(\n  \"/upload\",\n  requireFirebaseEnv,\n  upload.single(\"file\"),\n  blobUpload\n);\n\n/**\n * @swagger\n * /api/storage/delete:\n *   delete:\n *     tags:\n *       - Storage\n *     summary: Delete a file from storage\n *     description: Deletes a file from Firebase Storage by userId and optional folder.\n *     requestBody:\n *       required: true\n *       content:\n *         application/json:\n *           schema:\n *             type: object\n *             properties:\n *               userId:\n *                 type: string\n *               folder:\n *                 type: string\n *           description: \"'folder' is optional. Default is 'profileImages'.\"\n *     responses:\n *       200:\n *         description: File deleted successfully\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 success:\n *                   type: boolean\n *       400:\n *         description: Bad request\n *       404:\n *         description: File not found\n *       500:\n *         description: Delete failed\n */\nrouter.delete(\"/delete\", requireFirebaseEnv, blobDelete);\n\nexport default router;\n"],"names":[],"mappings":";;AAAA,OAAO,EAAE,MAAM,EAAE,MAAM,SAAS,CAAC;AACjC,OAAO,MAAM,MAAM,QAAQ,CAAC;AAE5B,OAAO,EAAE,kBAAkB,EAAE,MAAM,qCAAqC,CAAC;AACzE,OAAO,EAAE,UAAU,EAAE,UAAU,EAAE,MAAM,mCAAmC,CAAC;AAE3E,MAAM,MAAM,GAAG,MAAM,EAAE,CAAC;AAExB,sDAAsD;AACtD,MAAM,MAAM,GAAG,MAAM,CAAC,EAAE,OAAO,EAAE,MAAM,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC;AAE3D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAqCG;AACH,MAAM,CAAC,IAAI,CACT,SAAS,EACT,kBAAkB,EAClB,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,EACrB,UAAU,CACX,CAAC;AAEF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAoCG;AACH,MAAM,CAAC,MAAM,CAAC,SAAS,EAAE,kBAAkB,EAAE,UAAU,CAAC,CAAC;AAEzD,eAAe,MAAM,CAAC","debug_id":"b50fab36-3c46-5223-92f3-2780bf47d8e1"}