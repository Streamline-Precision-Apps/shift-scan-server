{"version":3,"file":"blobRoute.js","sources":["src/routes/blobRoute.ts"],"sourceRoot":"/","sourcesContent":["import { Router } from \"express\";\r\nimport multer from \"multer\";\r\n\r\nimport { requireFirebaseEnv } from \"../middleware/requireFirebaseEnv.js\";\r\nimport { blobDelete, blobUpload } from \"../controllers/blobsController.js\";\r\n\r\nconst router = Router();\r\n\r\n// Configure Multer for file uploads (store in memory)\r\nconst upload = multer({ storage: multer.memoryStorage() });\r\n\r\n/**\r\n * @swagger\r\n * /api/storage/upload:\r\n *   post:\r\n *     tags:\r\n *       - Storage\r\n *     summary: Upload a file (image/pdf) to storage\r\n *     description: Uploads a file to Firebase Storage. Requires multipart/form-data with a file and userId.\r\n *     requestBody:\r\n *       required: true\r\n *       content:\r\n *         multipart/form-data:\r\n *           schema:\r\n *             type: object\r\n *             properties:\r\n *               userId:\r\n *                 type: string\r\n *               folder:\r\n *                 type: string\r\n *               file:\r\n *                 type: string\r\n *                 format: binary\r\n *           description: \"'folder' is optional. Default is 'profileImages'.\"\r\n *     responses:\r\n *       200:\r\n *         description: File uploaded successfully\r\n *         content:\r\n *           application/json:\r\n *             schema:\r\n *               type: object\r\n *               properties:\r\n *                 url:\r\n *                   type: string\r\n *       400:\r\n *         description: Bad request\r\n *       500:\r\n *         description: Upload failed\r\n */\r\nrouter.post(\r\n  \"/upload\",\r\n  requireFirebaseEnv,\r\n  upload.single(\"file\"),\r\n  blobUpload\r\n);\r\n\r\n/**\r\n * @swagger\r\n * /api/storage/delete:\r\n *   delete:\r\n *     tags:\r\n *       - Storage\r\n *     summary: Delete a file from storage\r\n *     description: Deletes a file from Firebase Storage by userId and optional folder.\r\n *     requestBody:\r\n *       required: true\r\n *       content:\r\n *         application/json:\r\n *           schema:\r\n *             type: object\r\n *             properties:\r\n *               userId:\r\n *                 type: string\r\n *               folder:\r\n *                 type: string\r\n *           description: \"'folder' is optional. Default is 'profileImages'.\"\r\n *     responses:\r\n *       200:\r\n *         description: File deleted successfully\r\n *         content:\r\n *           application/json:\r\n *             schema:\r\n *               type: object\r\n *               properties:\r\n *                 success:\r\n *                   type: boolean\r\n *       400:\r\n *         description: Bad request\r\n *       404:\r\n *         description: File not found\r\n *       500:\r\n *         description: Delete failed\r\n */\r\nrouter.delete(\"/delete\", requireFirebaseEnv, blobDelete);\r\n\r\nexport default router;\r\n"],"names":[],"mappings":";;AAAA,OAAO,EAAE,MAAM,EAAE,MAAM,SAAS,CAAC;AACjC,OAAO,MAAM,MAAM,QAAQ,CAAC;AAE5B,OAAO,EAAE,kBAAkB,EAAE,MAAM,qCAAqC,CAAC;AACzE,OAAO,EAAE,UAAU,EAAE,UAAU,EAAE,MAAM,mCAAmC,CAAC;AAE3E,MAAM,MAAM,GAAG,MAAM,EAAE,CAAC;AAExB,sDAAsD;AACtD,MAAM,MAAM,GAAG,MAAM,CAAC,EAAE,OAAO,EAAE,MAAM,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC;AAE3D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAqCG;AACH,MAAM,CAAC,IAAI,CACT,SAAS,EACT,kBAAkB,EAClB,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,EACrB,UAAU,CACX,CAAC;AAEF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAoCG;AACH,MAAM,CAAC,MAAM,CAAC,SAAS,EAAE,kBAAkB,EAAE,UAAU,CAAC,CAAC;AAEzD,eAAe,MAAM,CAAC","debug_id":"da211de9-c9a8-5c34-8dab-06bb096a1abe"}