{"version":3,"file":"userRoute.js","sources":["src/routes/userRoute.ts"],"sourceRoot":"/","sourcesContent":["import { Router } from \"express\";\r\nimport { verifyToken } from \"../middleware/authMiddleware.js\";\r\nimport {\r\n  createUser,\r\n  deleteUser,\r\n  getUserById,\r\n  getUsers,\r\n  updateSettings,\r\n  updateUser,\r\n  getUserSettingsByQuery,\r\n  getUserContact,\r\n  getAllUsers,\r\n  getUsersTimeSheetByDate,\r\n  getTeamsByUserId,\r\n  getCrewMembers,\r\n  getCrewOnlineStatus,\r\n  getUserOnlineStatus,\r\n  getUserInfo,\r\n  sessionController,\r\n  endSessionController,\r\n  userSignatureController,\r\n  getAllTeams,\r\n} from \"../controllers/UserController.js\";\r\n\r\nconst router = Router();\r\n\r\nrouter.post(\"/:id/session\", sessionController);\r\nrouter.put(\"/:id/session/:sessionId\", endSessionController);\r\n\r\nrouter.post(\"/:id/signature\", userSignatureController);\r\n\r\n/**\r\n * @swagger\r\n * /api/v1/user/{userId}/online:\r\n *   get:\r\n *     tags:\r\n *       - Users\r\n *     summary: Get user's online status\r\n *     description: Retrieve a user's online (clocked in) status by userId\r\n *     security:\r\n *       - bearerAuth: []\r\n *     parameters:\r\n *       - name: userId\r\n *         in: path\r\n *         required: true\r\n *         schema:\r\n *           type: string\r\n *     responses:\r\n *       200:\r\n *         description: User online status retrieved successfully\r\n *       404:\r\n *         description: User not found\r\n */\r\nrouter.get(\"/:userId/online\", getUserOnlineStatus);\r\n\r\n/**\r\n * @swagger\r\n * /api/v1/user/{userId}/info:\r\n *   get:\r\n *     tags:\r\n *       - Users\r\n *     summary: Get user info (profile + contact)\r\n *     description: Retrieve a user's profile and contact info by userId\r\n *     security:\r\n *       - bearerAuth: []\r\n *     parameters:\r\n *       - name: userId\r\n *         in: path\r\n *         required: true\r\n *         schema:\r\n *           type: string\r\n *     responses:\r\n *       200:\r\n *         description: User info retrieved successfully\r\n *       404:\r\n *         description: User not found\r\n */\r\nrouter.get(\"/:userId/info\", getUserInfo);\r\n\r\n/**\r\n * @swagger\r\n * /api/v1/user/{userId}/timesheet/{date}:\r\n *   get:\r\n *     tags:\r\n *       - Users\r\n *     summary: Get user's timesheet by date\r\n *     description: Retrieve a user's timesheet for a specific date (requires authentication)\r\n *     security:\r\n *       - bearerAuth: []\r\n *     parameters:\r\n *       - name: userId\r\n *         in: path\r\n *         required: true\r\n *         schema:\r\n *           type: string\r\n *       - name: date\r\n *         in: path\r\n *         required: true\r\n *         schema:\r\n *           type: string\r\n *           format: date\r\n *     responses:\r\n *       200:\r\n *         description: Timesheet retrieved successfully\r\n *       400:\r\n *         description: Bad request\r\n *       404:\r\n *         description: Timesheet not found\r\n */\r\nrouter.get(\"/:userId/timesheet/:date\", getUsersTimeSheetByDate);\r\n\r\nrouter.get(\"/:userId/teams\", getTeamsByUserId);\r\nrouter.get(\"/:userId/crew/:crewId\", getCrewMembers);\r\nrouter.get(\"/:userId/crew/:crewId/online\", getCrewOnlineStatus);\r\n/**\r\n * @swagger\r\n * /api/v1/user:\r\n *   get:\r\n *     tags:\r\n *       - Users\r\n *     summary: Get all users\r\n *     description: Retrieve a list of all users (requires authentication)\r\n *     security:\r\n *       - bearerAuth: []\r\n *     responses:\r\n *       200:\r\n *         description: List of users retrieved successfully\r\n *       401:\r\n *         description: Unauthorized - invalid or missing bearer token\r\n */\r\nrouter.get(\"/\", verifyToken, getUsers);\r\n\r\nrouter.get(\"/All\", verifyToken, getAllUsers);\r\n\r\nrouter.get(\"/teams\", getAllTeams);\r\n\r\n/**\r\n * @swagger\r\n * /api/v1/user/{id}:\r\n *   get:\r\n *     tags:\r\n *       - Users\r\n *     summary: Get user by ID\r\n *     description: Retrieve a specific user by their ID (requires authentication)\r\n *     security:\r\n *       - bearerAuth: []\r\n *     parameters:\r\n *       - name: id\r\n *         in: path\r\n *         required: true\r\n *         schema:\r\n *           type: string\r\n *     responses:\r\n *       200:\r\n *         description: User retrieved successfully\r\n *       401:\r\n *         description: Unauthorized - invalid or missing bearer token\r\n *       404:\r\n *         description: User not found\r\n */\r\nrouter.get(\"/:id\", verifyToken, getUserById);\r\n\r\n/**\r\n * @swagger\r\n * /api/v1/user:\r\n *   post:\r\n *     tags:\r\n *       - Users\r\n *     summary: Create a new user\r\n *     description: Create a new user (requires authentication)\r\n *     security:\r\n *       - bearerAuth: []\r\n *     requestBody:\r\n *       required: true\r\n *       content:\r\n *         application/json:\r\n *           schema:\r\n *             type: object\r\n *             required:\r\n *               - firstName\r\n *               - lastName\r\n *               - username\r\n *               - password\r\n *               - companyId\r\n *               - truckView\r\n *               - tascoView\r\n *               - laborView\r\n *               - mechanicView\r\n *             properties:\r\n *               firstName:\r\n *                 type: string\r\n *               lastName:\r\n *                 type: string\r\n *               username:\r\n *                 type: string\r\n *               password:\r\n *                 type: string\r\n *               companyId:\r\n *                 type: string\r\n *               email:\r\n *                 type: string\r\n *                 nullable: true\r\n *               signature:\r\n *                 type: string\r\n *                 nullable: true\r\n *               DOB:\r\n *                 type: string\r\n *                 format: date-time\r\n *                 nullable: true\r\n *               truckView:\r\n *                 type: boolean\r\n *               tascoView:\r\n *                 type: boolean\r\n *               laborView:\r\n *                 type: boolean\r\n *               mechanicView:\r\n *                 type: boolean\r\n *               permission:\r\n *                 type: string\r\n *                 enum: [USER, ADMIN, SUPERADMIN]\r\n *               image:\r\n *                 type: string\r\n *                 nullable: true\r\n *               startDate:\r\n *                 type: string\r\n *                 format: date-time\r\n *                 nullable: true\r\n *               terminationDate:\r\n *                 type: string\r\n *                 format: date-time\r\n *                 nullable: true\r\n *               workTypeId:\r\n *                 type: string\r\n *                 nullable: true\r\n *               middleName:\r\n *                 type: string\r\n *                 nullable: true\r\n *               secondLastName:\r\n *                 type: string\r\n *                 nullable: true\r\n *     responses:\r\n *       201:\r\n *         description: User created successfully\r\n *       401:\r\n *         description: Unauthorized - invalid or missing bearer token\r\n *       400:\r\n *         description: Bad request\r\n */\r\nrouter.post(\"/\", verifyToken, createUser);\r\n\r\n/**\r\n * @swagger\r\n * /api/v1/user/{id}:\r\n *   put:\r\n *     tags:\r\n *       - Users\r\n *     summary: Update user\r\n *     description: Update an existing user (requires authentication). You must send fields to update in the request body.\r\n *     security:\r\n *       - bearerAuth: []\r\n *     parameters:\r\n *       - name: id\r\n *         in: path\r\n *         required: true\r\n *         schema:\r\n *           type: string\r\n *     requestBody:\r\n *       required: false\r\n *       content:\r\n *         application/json:\r\n *           schema:\r\n *             type: object\r\n *             properties:\r\n *               firstName:\r\n *                 type: string\r\n *               lastName:\r\n *                 type: string\r\n *               username:\r\n *                 type: string\r\n *               password:\r\n *                 type: string\r\n *               companyId:\r\n *                 type: string\r\n *               email:\r\n *                 type: string\r\n *                 nullable: true\r\n *               signature:\r\n *                 type: string\r\n *                 nullable: true\r\n *               DOB:\r\n *                 type: string\r\n *                 format: date-time\r\n *                 nullable: true\r\n *               truckView:\r\n *                 type: boolean\r\n *               tascoView:\r\n *                 type: boolean\r\n *               laborView:\r\n *                 type: boolean\r\n *               mechanicView:\r\n *                 type: boolean\r\n *               permission:\r\n *                 type: string\r\n *                 enum: [USER, ADMIN, SUPERADMIN]\r\n *               image:\r\n *                 type: string\r\n *                 nullable: true\r\n *               startDate:\r\n *                 type: string\r\n *                 format: date-time\r\n *                 nullable: true\r\n *               terminationDate:\r\n *                 type: string\r\n *                 format: date-time\r\n *                 nullable: true\r\n *               workTypeId:\r\n *                 type: string\r\n *                 nullable: true\r\n *               middleName:\r\n *                 type: string\r\n *                 nullable: true\r\n *               secondLastName:\r\n *                 type: string\r\n *                 nullable: true\r\n *     responses:\r\n *       200:\r\n *         description: User updated successfully\r\n *       401:\r\n *         description: Unauthorized - invalid or missing bearer token\r\n *       404:\r\n *         description: User not found\r\n */\r\n/**\r\n * @swagger\r\n * /api/v1/user/settings:\r\n *   put:\r\n *     tags:\r\n *       - Users\r\n *     summary: Update user settings\r\n *     description: Update the settings of an existing user (requires authentication)\r\n *     security:\r\n *       - bearerAuth: []\r\n *     requestBody:\r\n *       required: true\r\n *       content:\r\n *         application/json:\r\n *           schema:\r\n *             type: object\r\n *             properties:\r\n *               userId:\r\n *                 type: string\r\n *               phoneNumber:\r\n *                 type: string\r\n *               email:\r\n *                 type: string\r\n *               emergencyContact:\r\n *                 type: string\r\n *               emergencyContactNumber:\r\n *                 type: string\r\n *               language:\r\n *                 type: string\r\n *               generalReminders:\r\n *                 type: boolean\r\n *               personalReminders:\r\n *                 type: boolean\r\n *               cameraAccess:\r\n *                 type: boolean\r\n *               locationAccess:\r\n *                 type: boolean\r\n *               cookiesAccess:\r\n *                 type: boolean\r\n *     responses:\r\n *       200:\r\n *         description: User settings updated successfully\r\n *       401:\r\n *         description: Unauthorized - invalid or missing bearer token\r\n *       400:\r\n *         description: Bad request\r\n */\r\n\r\nrouter.post(\"/settings\", getUserSettingsByQuery);\r\n\r\nrouter.put(\"/settings\", verifyToken, updateSettings);\r\n\r\nrouter.post(\"/contact\", getUserContact);\r\n\r\nrouter.put(\"/:id\", verifyToken, updateUser);\r\n\r\n/**\r\n * @swagger\r\n * /api/v1/user/{id}:\r\n *   delete:\r\n *     tags:\r\n *       - Users\r\n *     summary: Delete user\r\n *     description: Delete a user (requires authentication)\r\n *     security:\r\n *       - bearerAuth: []\r\n *     parameters:\r\n *       - name: id\r\n *         in: path\r\n *         required: true\r\n *         schema:\r\n *           type: string\r\n *     responses:\r\n *       200:\r\n *         description: User deleted successfully\r\n *       401:\r\n *         description: Unauthorized - invalid or missing bearer token\r\n *       404:\r\n *         description: User not found\r\n */\r\nrouter.delete(\"/:id\", verifyToken, deleteUser);\r\n\r\nexport default router;\r\n"],"names":[],"mappings":";;AAAA,OAAO,EAAE,MAAM,EAAE,MAAM,SAAS,CAAC;AACjC,OAAO,EAAE,WAAW,EAAE,MAAM,iCAAiC,CAAC;AAC9D,OAAO,EACL,UAAU,EACV,UAAU,EACV,WAAW,EACX,QAAQ,EACR,cAAc,EACd,UAAU,EACV,sBAAsB,EACtB,cAAc,EACd,WAAW,EACX,uBAAuB,EACvB,gBAAgB,EAChB,cAAc,EACd,mBAAmB,EACnB,mBAAmB,EACnB,WAAW,EACX,iBAAiB,EACjB,oBAAoB,EACpB,uBAAuB,EACvB,WAAW,GACZ,MAAM,kCAAkC,CAAC;AAE1C,MAAM,MAAM,GAAG,MAAM,EAAE,CAAC;AAExB,MAAM,CAAC,IAAI,CAAC,cAAc,EAAE,iBAAiB,CAAC,CAAC;AAC/C,MAAM,CAAC,GAAG,CAAC,yBAAyB,EAAE,oBAAoB,CAAC,CAAC;AAE5D,MAAM,CAAC,IAAI,CAAC,gBAAgB,EAAE,uBAAuB,CAAC,CAAC;AAEvD;;;;;;;;;;;;;;;;;;;;;GAqBG;AACH,MAAM,CAAC,GAAG,CAAC,iBAAiB,EAAE,mBAAmB,CAAC,CAAC;AAEnD;;;;;;;;;;;;;;;;;;;;;GAqBG;AACH,MAAM,CAAC,GAAG,CAAC,eAAe,EAAE,WAAW,CAAC,CAAC;AAEzC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA6BG;AACH,MAAM,CAAC,GAAG,CAAC,0BAA0B,EAAE,uBAAuB,CAAC,CAAC;AAEhE,MAAM,CAAC,GAAG,CAAC,gBAAgB,EAAE,gBAAgB,CAAC,CAAC;AAC/C,MAAM,CAAC,GAAG,CAAC,uBAAuB,EAAE,cAAc,CAAC,CAAC;AACpD,MAAM,CAAC,GAAG,CAAC,8BAA8B,EAAE,mBAAmB,CAAC,CAAC;AAChE;;;;;;;;;;;;;;;GAeG;AACH,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,WAAW,EAAE,QAAQ,CAAC,CAAC;AAEvC,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,WAAW,EAAE,WAAW,CAAC,CAAC;AAE7C,MAAM,CAAC,GAAG,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;AAElC;;;;;;;;;;;;;;;;;;;;;;;GAuBG;AACH,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,WAAW,EAAE,WAAW,CAAC,CAAC;AAE7C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAqFG;AACH,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,WAAW,EAAE,UAAU,CAAC,CAAC;AAE1C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAiFG;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA8CG;AAEH,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,sBAAsB,CAAC,CAAC;AAEjD,MAAM,CAAC,GAAG,CAAC,WAAW,EAAE,WAAW,EAAE,cAAc,CAAC,CAAC;AAErD,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE,cAAc,CAAC,CAAC;AAExC,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,WAAW,EAAE,UAAU,CAAC,CAAC;AAE5C;;;;;;;;;;;;;;;;;;;;;;;GAuBG;AACH,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,WAAW,EAAE,UAAU,CAAC,CAAC;AAE/C,eAAe,MAAM,CAAC","debug_id":"4aa50f7d-5ddf-58c5-8cc7-c5a5982f7cc7"}