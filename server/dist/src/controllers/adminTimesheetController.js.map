{"version":3,"file":"adminTimesheetController.js","sources":["src/controllers/adminTimesheetController.ts"],"sourceRoot":"/","sourcesContent":["import type { Request, Response } from \"express\";\r\nimport {\r\n  getAllTimesheets,\r\n  getTimesheetById,\r\n  createTimesheet,\r\n  updateTimesheet,\r\n  updateTimesheetStatus,\r\n  deleteTimesheet,\r\n  exportTimesheets,\r\n  getTimesheetChangeLogs,\r\n  getAllTascoMaterialTypes,\r\n  resolveTimecardNotification,\r\n} from \"../services/adminTimesheetService.js\";\r\n\r\n/**\r\n * GET /api/v1/admins/timesheet\r\n * Get all timesheets with pagination, filtering, and search\r\n */\r\nexport async function getAllTimesheetsController(req: Request, res: Response) {\r\n  try {\r\n    // Status param for showPendingOnly behavior\r\n    // Extract the first 'status' param if it's a string (from showPendingOnly)\r\n    // If status is an array, use \"all\" as default for showPendingOnly\r\n    let statusParam = \"all\";\r\n    let statusFilters: string[] = [];\r\n    \r\n    if (req.query.status) {\r\n      if (Array.isArray(req.query.status)) {\r\n        // Multiple status values = filter selections\r\n        statusFilters = req.query.status as string[];\r\n      } else if (typeof req.query.status === \"string\") {\r\n        // Single status value could be either:\r\n        // 1. \"pending\" or \"all\" from showPendingOnly\r\n        // 2. A single filter selection like \"APPROVED\"\r\n        const statusValue = req.query.status.toLowerCase();\r\n        if (statusValue === \"pending\" || statusValue === \"all\") {\r\n          statusParam = statusValue;\r\n        } else {\r\n          // It's a filter selection\r\n          statusFilters = [req.query.status];\r\n        }\r\n      }\r\n    }\r\n    \r\n    const page = req.query.page ? parseInt(req.query.page as string, 10) : 1;\r\n    const pageSize = req.query.pageSize\r\n      ? parseInt(req.query.pageSize as string, 10)\r\n      : 25;\r\n    const search = typeof req.query.search === \"string\" ? req.query.search : \"\";\r\n\r\n    // Filter parameters (arrays)\r\n    const jobsiteId = req.query.jobsiteId\r\n      ? Array.isArray(req.query.jobsiteId)\r\n        ? req.query.jobsiteId\r\n        : [req.query.jobsiteId]\r\n      : [];\r\n    const costCode = req.query.costCode\r\n      ? Array.isArray(req.query.costCode)\r\n        ? req.query.costCode\r\n        : [req.query.costCode]\r\n      : [];\r\n    const equipmentId = req.query.equipmentId\r\n      ? Array.isArray(req.query.equipmentId)\r\n        ? req.query.equipmentId\r\n        : [req.query.equipmentId]\r\n      : [];\r\n    const equipmentLogTypes = req.query.equipmentLogTypes\r\n      ? Array.isArray(req.query.equipmentLogTypes)\r\n        ? req.query.equipmentLogTypes\r\n        : [req.query.equipmentLogTypes]\r\n      : [];\r\n    const changes = req.query.changes\r\n      ? Array.isArray(req.query.changes)\r\n        ? req.query.changes\r\n        : [req.query.changes]\r\n      : [];\r\n    const id = req.query.id\r\n      ? Array.isArray(req.query.id)\r\n        ? req.query.id\r\n        : [req.query.id]\r\n      : [];\r\n    const notificationId = req.query.notificationId\r\n      ? Array.isArray(req.query.notificationId)\r\n        ? req.query.notificationId\r\n        : [req.query.notificationId]\r\n      : [];\r\n\r\n    // Date range\r\n    const dateFrom = req.query.dateFrom\r\n      ? new Date(req.query.dateFrom as string)\r\n      : undefined;\r\n    const dateTo = req.query.dateTo\r\n      ? new Date(req.query.dateTo as string)\r\n      : undefined;\r\n\r\n    const skip = (page - 1) * pageSize;\r\n\r\n    const result = await getAllTimesheets({\r\n      status: statusParam,\r\n      page,\r\n      pageSize,\r\n      skip,\r\n      search,\r\n      filters: {\r\n        jobsiteId: jobsiteId as string[],\r\n        costCode: costCode as string[],\r\n        equipmentId: equipmentId as string[],\r\n        equipmentLogTypes: equipmentLogTypes as string[],\r\n        status: statusFilters as string[],\r\n        changes: changes as string[],\r\n        id: id as string[],\r\n        notificationId: notificationId as string[],\r\n        dateRange: {\r\n          from: dateFrom,\r\n          to: dateTo,\r\n        },\r\n      },\r\n    });\r\n\r\n    res.status(200).json(result);\r\n  } catch (error) {\r\n    console.error(\"Error fetching timesheets:\", error);\r\n    res.status(500).json({\r\n      success: false,\r\n      message: \"Failed to fetch timesheets\",\r\n      error: error instanceof Error ? error.message : \"Unknown error\",\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * GET /api/v1/admins/timesheet/:id\r\n * Get a single timesheet by ID with all related data\r\n */\r\nexport async function getTimesheetByIdController(req: Request, res: Response) {\r\n  try {\r\n    const {id} = req.params;\r\n    if (!id) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        message: \"Invalid timesheet ID\",\r\n      });\r\n    }\r\n\r\n    const timesheet = await getTimesheetById(id);\r\n    if (!timesheet) {\r\n      return res.status(404).json({\r\n        success: false,\r\n        message: \"Timesheet not found\",\r\n      });\r\n    }\r\n\r\n    res.status(200).json(timesheet);\r\n  } catch (error) {\r\n    console.error(\"Error fetching timesheet:\", error);\r\n    res.status(500).json({\r\n      success: false,\r\n      message: \"Failed to fetch timesheet\",\r\n      error: error instanceof Error ? error.message : \"Unknown error\",\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * GET /api/v1/admins/timesheet/:id/change-logs\r\n * Get change logs for a specific timesheet\r\n */\r\nexport async function getTimesheetChangeLogsController(\r\n  req: Request,\r\n  res: Response\r\n) {\r\n  try {\r\n    const {id} = req.params;\r\n    if (!id) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        message: \"Invalid timesheet ID\",\r\n      });\r\n    }\r\n\r\n    const changeLogs = await getTimesheetChangeLogs(id);\r\n    res.status(200).json(changeLogs);\r\n  } catch (error) {\r\n    console.error(\"Error fetching change logs:\", error);\r\n    res.status(500).json({\r\n      success: false,\r\n      message: \"Failed to fetch change logs\",\r\n      error: error instanceof Error ? error.message : \"Unknown error\",\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * POST /api/v1/admins/timesheet\r\n * Create a new timesheet (admin creation)\r\n */\r\nexport async function createTimesheetController(req: Request, res: Response) {\r\n  try {\r\n    const payload = req.body;\r\n    const result = await createTimesheet(payload);\r\n    res.status(201).json({\r\n      success: true,\r\n      message: \"Timesheet created successfully\",\r\n      data: result,\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Error creating timesheet:\", error);\r\n    res.status(500).json({\r\n      success: false,\r\n      message: \"Failed to create timesheet\",\r\n      error: error instanceof Error ? error.message : \"Unknown error\",\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * POST /api/v1/admins/timesheet/export\r\n * Export timesheets to Excel\r\n */\r\nexport async function exportTimesheetsController(req: Request, res: Response) {\r\n  try {\r\n    const { timesheetIds = [], fields, dateRange, filters } = req.body;\r\n    \r\n    if (!Array.isArray(timesheetIds)) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        message: \"Invalid timesheet IDs format\",\r\n      });\r\n    }\r\n\r\n    // Parse date range if provided\r\n    let parsedDateRange: { from?: Date; to?: Date } | undefined;\r\n    if (dateRange) {\r\n      parsedDateRange = {};\r\n      if (dateRange.from) parsedDateRange.from = new Date(dateRange.from);\r\n      if (dateRange.to) parsedDateRange.to = new Date(dateRange.to);\r\n    }\r\n\r\n    const result = await exportTimesheets(\r\n      timesheetIds, \r\n      fields, \r\n      parsedDateRange,\r\n      filters\r\n    );\r\n    res.status(200).json(result);\r\n  } catch (error) {\r\n    console.error(\"Error exporting timesheets:\", error);\r\n    res.status(500).json({\r\n      success: false,\r\n      message: \"Failed to export timesheets\",\r\n      error: error instanceof Error ? error.message : \"Unknown error\",\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * PUT /api/v1/admins/timesheet/:id\r\n * Update a timesheet (optimized update with change tracking)\r\n */\r\nexport async function updateTimesheetController(req: Request, res: Response) {\r\n  try {\r\n    const {id} = req.params;\r\n    if (!id) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        message: \"Invalid timesheet ID\",\r\n      });\r\n    }\r\n\r\n    const {\r\n      data,\r\n      originalData,\r\n      changes,\r\n      editorId,\r\n      changeReason,\r\n      wasStatusChanged,\r\n      numberOfChanges,\r\n    } = req.body;\r\n\r\n    const result = await updateTimesheet(id, {\r\n      data,\r\n      originalData,\r\n      changes,\r\n      editorId,\r\n      changeReason,\r\n      wasStatusChanged,\r\n      numberOfChanges,\r\n    });\r\n\r\n    res.status(200).json({\r\n      success: true,\r\n      message: \"Timesheet updated successfully\",\r\n      data: result,\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Error updating timesheet:\", error);\r\n    res.status(500).json({\r\n      success: false,\r\n      message: \"Failed to update timesheet\",\r\n      error: error instanceof Error ? error.message : \"Unknown error\",\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * PUT /api/v1/admins/timesheet/:id/status\r\n * Update timesheet status (approve/deny)\r\n */\r\nexport async function updateTimesheetStatusController(\r\n  req: Request,\r\n  res: Response\r\n) {\r\n  try {\r\n    const {id} = req.params;\r\n    if (!id) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        message: \"Invalid timesheet ID\",\r\n      });\r\n    }\r\n\r\n    const { status, changes } = req.body;\r\n    \r\n    if (!status || ![\"APPROVED\", \"REJECTED\", \"PENDING\"].includes(status)) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        message: \"Invalid status value\",\r\n      });\r\n    }\r\n\r\n    // Get authenticated user ID from JWT token\r\n    const userId = (req as any).user?.id;\r\n    if (!userId) {\r\n      return res.status(401).json({\r\n        success: false,\r\n        message: \"User not authenticated\",\r\n      });\r\n    }\r\n\r\n    await updateTimesheetStatus(id, status, changes || {}, userId);\r\n\r\n    res.status(200).json({\r\n      success: true,\r\n      message: `Timesheet ${status.toLowerCase()} successfully`,\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Error updating timesheet status:\", error);\r\n    res.status(500).json({\r\n      success: false,\r\n      message: \"Failed to update timesheet status\",\r\n      error: error instanceof Error ? error.message : \"Unknown error\",\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * DELETE /api/v1/admins/timesheet/:id\r\n * Delete a timesheet by ID\r\n */\r\nexport async function deleteTimesheetController(req: Request, res: Response) {\r\n  try {\r\n    const {id} = req.params;\r\n    if (!id) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        message: \"Invalid timesheet ID\",\r\n      });\r\n    }\r\n\r\n    await deleteTimesheet(id);\r\n\r\n    res.status(200).json({\r\n      success: true,\r\n      message: \"Timesheet deleted successfully\",\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Error deleting timesheet:\", error);\r\n    res.status(500).json({\r\n      success: false,\r\n      message: \"Failed to delete timesheet\",\r\n      error: error instanceof Error ? error.message : \"Unknown error\",\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * GET /api/v1/admins/tasco-material-types\r\n * Get all Tasco material types\r\n */\r\nexport async function getAllTascoMaterialTypesController(\r\n  req: Request,\r\n  res: Response\r\n) {\r\n  try {\r\n    const result = await getAllTascoMaterialTypes();\r\n    res.status(200).json(result);\r\n  } catch (error) {\r\n    console.error(\"Error fetching Tasco material types:\", error);\r\n    res.status(500).json({\r\n      success: false,\r\n      message: \"Failed to fetch Tasco material types\",\r\n      error: error instanceof Error ? error.message : \"Unknown error\",\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * POST /api/v1/admins/timesheet/resolve-notification\r\n * Check timesheet status and resolve notification if already approved/rejected\r\n */\r\nexport async function resolveTimecardNotificationController(\r\n  req: Request,\r\n  res: Response\r\n) {\r\n  try {\r\n    const { timesheetId, notificationId } = req.body;\r\n    \r\n    if (!timesheetId || !notificationId) {\r\n      return res.status(400).json({\r\n        success: false,\r\n        message: \"Timesheet ID and notification ID are required\",\r\n      });\r\n    }\r\n\r\n    // Get authenticated user ID\r\n    const userId = (req as any).user?.id;\r\n    if (!userId) {\r\n      return res.status(401).json({\r\n        success: false,\r\n        message: \"User not authenticated\",\r\n      });\r\n    }\r\n\r\n    const result = await resolveTimecardNotification(\r\n      timesheetId,\r\n      parseInt(notificationId),\r\n      userId\r\n    );\r\n\r\n    res.status(200).json(result);\r\n  } catch (error) {\r\n    console.error(\"Error resolving timecard notification:\", error);\r\n    res.status(500).json({\r\n      success: false,\r\n      message: \"Failed to resolve timecard notification\",\r\n      error: error instanceof Error ? error.message : \"Unknown error\",\r\n    });\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debug_id":"14378044-35c2-5295-b324-4b7299e2ca13"}