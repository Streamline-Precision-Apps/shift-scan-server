{"version":3,"file":"adminBaseController.js","sources":["src/controllers/adminBaseController.ts"],"sourceRoot":"/","sourcesContent":["import express from \"express\";\r\nimport {\r\n  fetchNotificationServiceByUserId,\r\n  getDashboardData,\r\n  getUserTopicPreferences,\r\n} from \"../services/adminBaseService.js\";\r\n\r\nexport const baseController = async (\r\n  req: express.Request,\r\n  res: express.Response\r\n) => {\r\n  try {\r\n    const { userId, resolvedSince } = req.query;\r\n    if (!userId) {\r\n      return res.status(400).json({ error: \"Missing userId parameter\" });\r\n    }\r\n\r\n    if (typeof userId !== \"string\") {\r\n      return res.status(400).json({ error: \"userId must be a string\" });\r\n    }\r\n\r\n    const result = await fetchNotificationServiceByUserId(\r\n      userId,\r\n      resolvedSince as string | undefined\r\n    );\r\n    return res.json(result);\r\n  } catch (error) {\r\n    console.error(\"Error fetching notifications:\", error);\r\n    res.status(500).json({ error: \"Internal Server Error\" });\r\n  }\r\n};\r\n\r\nexport const getDashboardDataController = async (\r\n  req: express.Request,\r\n  res: express.Response\r\n) => {\r\n  try {\r\n    const { userId } = req.query;\r\n    if (!userId) {\r\n      return res.status(400).json({ error: \"Missing userId parameter\" });\r\n    }\r\n\r\n    if (typeof userId !== \"string\") {\r\n      return res.status(400).json({ error: \"userId must be a string\" });\r\n    }\r\n\r\n    const result = await getDashboardData(userId);\r\n    return res.json(result);\r\n  } catch (error) {\r\n    console.error(\"Error fetching notifications:\", error);\r\n    res.status(500).json({ error: \"Internal Server Error\" });\r\n  }\r\n};\r\n\r\nexport const getUserTopicPreferencesController = async (\r\n  req: express.Request,\r\n  res: express.Response\r\n) => {\r\n  try {\r\n    const { userId } = req.query;\r\n    if (!userId) {\r\n      return res.status(400).json({ error: \"Missing userId parameter\" });\r\n    }\r\n\r\n    if (typeof userId !== \"string\") {\r\n      return res.status(400).json({ error: \"userId must be a string\" });\r\n    }\r\n\r\n    const result = await getUserTopicPreferences(userId);\r\n    return res.json(result);\r\n  } catch (error) {\r\n    console.error(\"Error fetching notifications:\", error);\r\n    res.status(500).json({ error: \"Internal Server Error\" });\r\n  }\r\n};\r\n"],"names":[],"mappings":"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","debug_id":"3c9cbbf8-b5d2-5fa4-9c13-3ae6a0864853"}