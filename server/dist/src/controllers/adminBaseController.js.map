{"version":3,"file":"adminBaseController.js","sources":["src/controllers/adminBaseController.ts"],"sourceRoot":"/","sourcesContent":["import express from \"express\";\nimport {\n  fetchNotificationServiceByUserId,\n  getDashboardData,\n  getUserTopicPreferences,\n} from \"../services/adminBaseService.js\";\n\nexport const baseController = async (\n  req: express.Request,\n  res: express.Response\n) => {\n  try {\n    const { userId, resolvedSince } = req.query;\n    if (!userId) {\n      return res.status(400).json({ error: \"Missing userId parameter\" });\n    }\n\n    if (typeof userId !== \"string\") {\n      return res.status(400).json({ error: \"userId must be a string\" });\n    }\n\n    const result = await fetchNotificationServiceByUserId(\n      userId,\n      resolvedSince as string | undefined\n    );\n    return res.json(result);\n  } catch (error) {\n    console.error(\"Error fetching notifications:\", error);\n    res.status(500).json({ error: \"Internal Server Error\" });\n  }\n};\n\nexport const getDashboardDataController = async (\n  req: express.Request,\n  res: express.Response\n) => {\n  try {\n    const { userId } = req.query;\n    if (!userId) {\n      return res.status(400).json({ error: \"Missing userId parameter\" });\n    }\n\n    if (typeof userId !== \"string\") {\n      return res.status(400).json({ error: \"userId must be a string\" });\n    }\n\n    const result = await getDashboardData(userId);\n    return res.json(result);\n  } catch (error) {\n    console.error(\"Error fetching notifications:\", error);\n    res.status(500).json({ error: \"Internal Server Error\" });\n  }\n};\n\nexport const getUserTopicPreferencesController = async (\n  req: express.Request,\n  res: express.Response\n) => {\n  try {\n    const { userId } = req.query;\n    if (!userId) {\n      return res.status(400).json({ error: \"Missing userId parameter\" });\n    }\n\n    if (typeof userId !== \"string\") {\n      return res.status(400).json({ error: \"userId must be a string\" });\n    }\n\n    const result = await getUserTopicPreferences(userId);\n    return res.json(result);\n  } catch (error) {\n    console.error(\"Error fetching notifications:\", error);\n    res.status(500).json({ error: \"Internal Server Error\" });\n  }\n};\n"],"names":[],"mappings":"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","debug_id":"eaf5a636-4094-5046-8cf6-b65033b702aa"}