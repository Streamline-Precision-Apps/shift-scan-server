{"version":3,"file":"pushNotifcationController.js","sources":["src/controllers/pushNotifcationController.ts"],"sourceRoot":"/","sourcesContent":["import type { Request, Response } from \"express\";\nimport * as PushNotificationService from \"../services/pushNotificationServices.js\";\n\n/**\n * Controller for marking notifications as read.\n * Decides which service to call based on body params.\n */\nexport async function markReadController(req: Request, res: Response) {\n  try {\n    const { notificationId, markAll, brokenEquipment, userId } = req.body;\n    let result;\n\n    if (markAll) {\n      result = await PushNotificationService.markAllNotificationsAsReadService(\n        userId\n      );\n      return res.status(200).json({ success: true, ...result });\n    }\n\n    if (brokenEquipment && notificationId) {\n      result =\n        await PushNotificationService.markBrokenEquipmentNotificationsAsReadService(\n          notificationId,\n          userId\n        );\n      return res.status(200).json({ success: true, ...result });\n    }\n\n    if (notificationId) {\n      result =\n        await PushNotificationService.updateNotificationReadStatusService(\n          notificationId,\n          userId\n        );\n      return res.status(200).json({ success: true, ...result });\n    }\n\n    return res.status(400).json({ error: \"Invalid parameters\" });\n  } catch (error) {\n    console.error(\"Error in markReadController:\", error);\n    return res\n      .status(500)\n      .json({ error: \"Failed to mark notification(s) as read\" });\n  }\n}\n"],"names":[],"mappings":";;AACA,OAAO,KAAK,uBAAuB,MAAM,yCAAyC,CAAC;AAEnF;;;GAGG;AACH,MAAM,CAAC,KAAK,UAAU,kBAAkB,CAAC,GAAY,EAAE,GAAa;IAClE,IAAI,CAAC;QACH,MAAM,EAAE,cAAc,EAAE,OAAO,EAAE,eAAe,EAAE,MAAM,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;QACtE,IAAI,MAAM,CAAC;QAEX,IAAI,OAAO,EAAE,CAAC;YACZ,MAAM,GAAG,MAAM,uBAAuB,CAAC,iCAAiC,CACtE,MAAM,CACP,CAAC;YACF,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,MAAM,EAAE,CAAC,CAAC;QAC5D,CAAC;QAED,IAAI,eAAe,IAAI,cAAc,EAAE,CAAC;YACtC,MAAM;gBACJ,MAAM,uBAAuB,CAAC,6CAA6C,CACzE,cAAc,EACd,MAAM,CACP,CAAC;YACJ,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,MAAM,EAAE,CAAC,CAAC;QAC5D,CAAC;QAED,IAAI,cAAc,EAAE,CAAC;YACnB,MAAM;gBACJ,MAAM,uBAAuB,CAAC,mCAAmC,CAC/D,cAAc,EACd,MAAM,CACP,CAAC;YACJ,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,MAAM,EAAE,CAAC,CAAC;QAC5D,CAAC;QAED,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,oBAAoB,EAAE,CAAC,CAAC;IAC/D,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,OAAO,CAAC,KAAK,CAAC,8BAA8B,EAAE,KAAK,CAAC,CAAC;QACrD,OAAO,GAAG;aACP,MAAM,CAAC,GAAG,CAAC;aACX,IAAI,CAAC,EAAE,KAAK,EAAE,wCAAwC,EAAE,CAAC,CAAC;IAC/D,CAAC;AACH,CAAC","debug_id":"fcb14357-9923-59e3-bab7-2c7268606080"}