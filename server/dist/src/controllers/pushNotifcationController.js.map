{"version":3,"file":"pushNotifcationController.js","sources":["src/controllers/pushNotifcationController.ts"],"sourceRoot":"/","sourcesContent":["import type { Request, Response } from \"express\";\r\nimport * as PushNotificationService from \"../services/pushNotificationServices.js\";\r\n\r\n/**\r\n * Controller for marking notifications as read.\r\n * Decides which service to call based on body params.\r\n */\r\nexport async function markReadController(req: Request, res: Response) {\r\n  try {\r\n    const { notificationId, markAll, brokenEquipment, userId } = req.body;\r\n    let result;\r\n\r\n    if (markAll) {\r\n      result = await PushNotificationService.markAllNotificationsAsReadService(\r\n        userId\r\n      );\r\n      return res.status(200).json({ success: true, ...result });\r\n    }\r\n\r\n    if (brokenEquipment && notificationId) {\r\n      result =\r\n        await PushNotificationService.markBrokenEquipmentNotificationsAsReadService(\r\n          notificationId,\r\n          userId\r\n        );\r\n      return res.status(200).json({ success: true, ...result });\r\n    }\r\n\r\n    if (notificationId) {\r\n      result =\r\n        await PushNotificationService.updateNotificationReadStatusService(\r\n          notificationId,\r\n          userId\r\n        );\r\n      return res.status(200).json({ success: true, ...result });\r\n    }\r\n\r\n    return res.status(400).json({ error: \"Invalid parameters\" });\r\n  } catch (error) {\r\n    console.error(\"Error in markReadController:\", error);\r\n    return res\r\n      .status(500)\r\n      .json({ error: \"Failed to mark notification(s) as read\" });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;AACA,OAAO,KAAK,uBAAuB,MAAM,yCAAyC,CAAC;AAEnF;;;GAGG;AACH,MAAM,CAAC,KAAK,UAAU,kBAAkB,CAAC,GAAY,EAAE,GAAa;IAClE,IAAI,CAAC;QACH,MAAM,EAAE,cAAc,EAAE,OAAO,EAAE,eAAe,EAAE,MAAM,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;QACtE,IAAI,MAAM,CAAC;QAEX,IAAI,OAAO,EAAE,CAAC;YACZ,MAAM,GAAG,MAAM,uBAAuB,CAAC,iCAAiC,CACtE,MAAM,CACP,CAAC;YACF,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,MAAM,EAAE,CAAC,CAAC;QAC5D,CAAC;QAED,IAAI,eAAe,IAAI,cAAc,EAAE,CAAC;YACtC,MAAM;gBACJ,MAAM,uBAAuB,CAAC,6CAA6C,CACzE,cAAc,EACd,MAAM,CACP,CAAC;YACJ,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,MAAM,EAAE,CAAC,CAAC;QAC5D,CAAC;QAED,IAAI,cAAc,EAAE,CAAC;YACnB,MAAM;gBACJ,MAAM,uBAAuB,CAAC,mCAAmC,CAC/D,cAAc,EACd,MAAM,CACP,CAAC;YACJ,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,MAAM,EAAE,CAAC,CAAC;QAC5D,CAAC;QAED,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,oBAAoB,EAAE,CAAC,CAAC;IAC/D,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,OAAO,CAAC,KAAK,CAAC,8BAA8B,EAAE,KAAK,CAAC,CAAC;QACrD,OAAO,GAAG;aACP,MAAM,CAAC,GAAG,CAAC;aACX,IAAI,CAAC,EAAE,KAAK,EAAE,wCAAwC,EAAE,CAAC,CAAC;IAC/D,CAAC;AACH,CAAC","debug_id":"2ca7e804-a219-5a9f-a6bb-88f36f2f0e3c"}