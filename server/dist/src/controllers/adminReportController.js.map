{"version":3,"file":"adminReportController.js","sources":["src/controllers/adminReportController.ts"],"sourceRoot":"/","sourcesContent":["import type { Request, Response } from \"express\";\r\nimport {\r\n  getTascoReport as getTascoReportService,\r\n  getTruckingReport as getTruckingReportService,\r\n  getMechanicReport as getMechanicReportService,\r\n  getTascoFilterOptions as getTascoFilterOptionsService,\r\n} from \"../services/adminsReportService.js\";\r\n\r\nexport async function getTascoReport(req: Request, res: Response) {\r\n  try {\r\n    // Parse query parameters\r\n    const filters: {\r\n      jobsiteIds?: string[];\r\n      shiftTypes?: string[];\r\n      employeeIds?: string[];\r\n      laborTypes?: string[];\r\n      equipmentIds?: string[];\r\n      materialTypes?: string[];\r\n    } = {};\r\n\r\n    if (req.query.jobsiteIds) {\r\n      filters.jobsiteIds = (req.query.jobsiteIds as string).split(\",\");\r\n    }\r\n    if (req.query.shiftTypes) {\r\n      filters.shiftTypes = (req.query.shiftTypes as string).split(\",\");\r\n    }\r\n    if (req.query.employeeIds) {\r\n      filters.employeeIds = (req.query.employeeIds as string).split(\",\");\r\n    }\r\n    if (req.query.laborTypes) {\r\n      filters.laborTypes = (req.query.laborTypes as string).split(\",\");\r\n    }\r\n    if (req.query.equipmentIds) {\r\n      filters.equipmentIds = (req.query.equipmentIds as string).split(\",\");\r\n    }\r\n    if (req.query.materialTypes) {\r\n      filters.materialTypes = (req.query.materialTypes as string).split(\",\");\r\n    }\r\n\r\n    const data = await getTascoReportService(filters);\r\n    res.json({ success: true, data });\r\n  } catch (error) {\r\n    res.status(500).json({\r\n      success: false,\r\n      message: \"Failed to fetch Tasco report\",\r\n      error: error instanceof Error ? error.message : error,\r\n    });\r\n  }\r\n}\r\n\r\nexport async function getTruckingReport(req: Request, res: Response) {\r\n  try {\r\n    const data = await getTruckingReportService();\r\n    res.json({ success: true, data });\r\n  } catch (error) {\r\n    res.status(500).json({\r\n      success: false,\r\n      message: \"Failed to fetch Trucking report\",\r\n      error: error instanceof Error ? error.message : error,\r\n    });\r\n  }\r\n}\r\n\r\nexport async function getMechanicReport(req: Request, res: Response) {\r\n  try {\r\n    const data = await getMechanicReportService();\r\n    res.json({ success: true, data });\r\n  } catch (error) {\r\n    res.status(500).json({\r\n      success: false,\r\n      message: \"Failed to fetch Mechanic report\",\r\n      error: error instanceof Error ? error.message : error,\r\n    });\r\n  }\r\n}\r\n\r\nexport async function getTascoFilterOptions(req: Request, res: Response) {\r\n  try {\r\n    const data = await getTascoFilterOptionsService();\r\n    res.json(data);\r\n  } catch (error) {\r\n    res.status(500).json({\r\n      success: false,\r\n      message: \"Failed to fetch Tasco filter options\",\r\n      error: error instanceof Error ? error.message : error,\r\n    });\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debug_id":"19e61296-0b8d-51c9-ad94-e6fed8b70138"}