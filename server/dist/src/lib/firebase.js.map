{"version":3,"file":"firebase.js","sources":["src/lib/firebase.ts"],"sourceRoot":"/","sourcesContent":["import admin from \"firebase-admin\";\r\nimport type { ServiceAccount } from \"firebase-admin\";\r\n\r\n// Only initialize once\r\nif (!admin.apps.length) {\r\n  const storageBucket = process.env.FIREBASE_STORAGE_BUCKET;\r\n  const serviceAccount = {\r\n    type: process.env.FIREBASE_SERVICE_JSON_TYPE,\r\n    project_id: process.env.FIREBASE_SERVICE_JSON_PROJECT_ID,\r\n    private_key_id: process.env.FIREBASE_SERVICE_JSON_PRIVATE_KEY_ID,\r\n    private_key: process.env.FIREBASE_SERVICE_JSON_PRIVATE_KEY?.replace(\r\n      /\\\\n/g,\r\n      \"\\n\"\r\n    ),\r\n    client_email: process.env.FIREBASE_SERVICE_JSON_CLIENT_EMAIL,\r\n    client_id: process.env.FIREBASE_SERVICE_JSON_CLIENT_ID,\r\n    auth_uri: process.env.FIREBASE_SERVICE_JSON_AUTH_URI,\r\n    token_uri: process.env.FIREBASE_SERVICE_JSON_TOKEN_URI,\r\n    auth_provider_x509_cert_url:\r\n      process.env.FIREBASE_SERVICE_JSON_AUTH_PROVIDER_X509_CERT_URL,\r\n    client_x509_cert_url:\r\n      process.env.FIREBASE_SERVICE_JSON_CLIENT_X509_CERT_URL,\r\n    universe_domain: process.env.FIREBASE_SERVICE_JSON_UNIVERSE_DOMAIN,\r\n  };\r\n  const options: admin.AppOptions = {\r\n    credential: admin.credential.cert(serviceAccount as ServiceAccount),\r\n    ...(storageBucket && { storageBucket }),\r\n  };\r\n  admin.initializeApp(options);\r\n}\r\n\r\nexport const getFirebaseAdmin = (): typeof admin => admin;\r\nexport const firestoreDb = admin.firestore();\r\nexport const storage: admin.storage.Storage = admin.storage();\r\n"],"names":[],"mappings":";;AAAA,OAAO,KAAK,MAAM,gBAAgB,CAAC;AAGnC,uBAAuB;AACvB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;IACvB,MAAM,aAAa,GAAG,OAAO,CAAC,GAAG,CAAC,uBAAuB,CAAC;IAC1D,MAAM,cAAc,GAAG;QACrB,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,0BAA0B;QAC5C,UAAU,EAAE,OAAO,CAAC,GAAG,CAAC,gCAAgC;QACxD,cAAc,EAAE,OAAO,CAAC,GAAG,CAAC,oCAAoC;QAChE,WAAW,EAAE,OAAO,CAAC,GAAG,CAAC,iCAAiC,EAAE,OAAO,CACjE,MAAM,EACN,IAAI,CACL;QACD,YAAY,EAAE,OAAO,CAAC,GAAG,CAAC,kCAAkC;QAC5D,SAAS,EAAE,OAAO,CAAC,GAAG,CAAC,+BAA+B;QACtD,QAAQ,EAAE,OAAO,CAAC,GAAG,CAAC,8BAA8B;QACpD,SAAS,EAAE,OAAO,CAAC,GAAG,CAAC,+BAA+B;QACtD,2BAA2B,EACzB,OAAO,CAAC,GAAG,CAAC,iDAAiD;QAC/D,oBAAoB,EAClB,OAAO,CAAC,GAAG,CAAC,0CAA0C;QACxD,eAAe,EAAE,OAAO,CAAC,GAAG,CAAC,qCAAqC;KACnE,CAAC;IACF,MAAM,OAAO,GAAqB;QAChC,UAAU,EAAE,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,cAAgC,CAAC;QACnE,GAAG,CAAC,aAAa,IAAI,EAAE,aAAa,EAAE,CAAC;KACxC,CAAC;IACF,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;AAC/B,CAAC;AAED,MAAM,CAAC,MAAM,gBAAgB,GAAG,GAAiB,EAAE,CAAC,KAAK,CAAC;AAC1D,MAAM,CAAC,MAAM,WAAW,GAAG,KAAK,CAAC,SAAS,EAAE,CAAC;AAC7C,MAAM,CAAC,MAAM,OAAO,GAA0B,KAAK,CAAC,OAAO,EAAE,CAAC","debug_id":"a36e8b9c-c553-5ec9-ab3b-01607a989c59"}