{"version":3,"file":"tokenExpirationParser.js","sources":["src/lib/tokenExpirationParser.ts"],"sourceRoot":"/","sourcesContent":["export default function parseEnvSeconds(\r\n  envValue: string | undefined,\r\n  fallback: number\r\n): number {\r\n  if (!envValue) return fallback;\r\n\r\n  const trimmed = envValue.trim();\r\n\r\n  // plain number\r\n  const plain = Number(trimmed);\r\n  if (!Number.isNaN(plain)) return Math.floor(plain);\r\n\r\n  // units:  s, m, h, d, w\r\n  const unitMatch = trimmed.match(/^([0-9]+)\\s*([smhdw])$/i);\r\n  if (unitMatch) {\r\n    const [, numStr, unitStr] = unitMatch;\r\n    const value = Number(numStr);\r\n    if (unitStr === undefined) return fallback;\r\n    const unit = unitStr.toLowerCase();\r\n    switch (unit) {\r\n      case \"s\":\r\n        return value;\r\n      case \"m\":\r\n        return value * 60;\r\n      case \"h\":\r\n        return value * 60 * 60;\r\n      case \"d\":\r\n        return value * 24 * 60 * 60;\r\n      case \"w\":\r\n        return value * 7 * 24 * 60 * 60;\r\n    }\r\n  }\r\n\r\n  // allow simple math expressions containing only digits, spaces and +-*/().\r\n  if (/^[0-9+\\-*/().\\s]+$/.test(trimmed)) {\r\n    try {\r\n      // Use Function to evaluate but only after validation above.\r\n      // eslint-disable-next-line no-new-func\r\n      const result = Function(`return (${trimmed})`)();\r\n      if (typeof result === \"number\" && Number.isFinite(result))\r\n        return Math.floor(result);\r\n    } catch (e) {\r\n      // fallthrough to fallback\r\n    }\r\n  }\r\n\r\n  return fallback;\r\n}\r\n"],"names":[],"mappings":";;AAAA,MAAM,CAAC,OAAO,UAAU,eAAe,CACrC,QAA4B,EAC5B,QAAgB;IAEhB,IAAI,CAAC,QAAQ;QAAE,OAAO,QAAQ,CAAC;IAE/B,MAAM,OAAO,GAAG,QAAQ,CAAC,IAAI,EAAE,CAAC;IAEhC,eAAe;IACf,MAAM,KAAK,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC;IAC9B,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC;QAAE,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;IAEnD,wBAAwB;IACxB,MAAM,SAAS,GAAG,OAAO,CAAC,KAAK,CAAC,yBAAyB,CAAC,CAAC;IAC3D,IAAI,SAAS,EAAE,CAAC;QACd,MAAM,CAAC,EAAE,MAAM,EAAE,OAAO,CAAC,GAAG,SAAS,CAAC;QACtC,MAAM,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;QAC7B,IAAI,OAAO,KAAK,SAAS;YAAE,OAAO,QAAQ,CAAC;QAC3C,MAAM,IAAI,GAAG,OAAO,CAAC,WAAW,EAAE,CAAC;QACnC,QAAQ,IAAI,EAAE,CAAC;YACb,KAAK,GAAG;gBACN,OAAO,KAAK,CAAC;YACf,KAAK,GAAG;gBACN,OAAO,KAAK,GAAG,EAAE,CAAC;YACpB,KAAK,GAAG;gBACN,OAAO,KAAK,GAAG,EAAE,GAAG,EAAE,CAAC;YACzB,KAAK,GAAG;gBACN,OAAO,KAAK,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;YAC9B,KAAK,GAAG;gBACN,OAAO,KAAK,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;QACpC,CAAC;IACH,CAAC;IAED,2EAA2E;IAC3E,IAAI,oBAAoB,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC;QACvC,IAAI,CAAC;YACH,4DAA4D;YAC5D,uCAAuC;YACvC,MAAM,MAAM,GAAG,QAAQ,CAAC,WAAW,OAAO,GAAG,CAAC,EAAE,CAAC;YACjD,IAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC;gBACvD,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;QAC9B,CAAC;QAAC,OAAO,CAAC,EAAE,CAAC;YACX,0BAA0B;QAC5B,CAAC;IACH,CAAC;IAED,OAAO,QAAQ,CAAC;AAClB,CAAC","debug_id":"36e36262-f40b-50e4-bdaf-2db93139c31a"}