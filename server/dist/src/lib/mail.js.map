{"version":3,"file":"mail.js","sources":["src/lib/mail.ts"],"sourceRoot":"/","sourcesContent":["import { Resend } from \"resend\";\r\n\r\nconst resend = new Resend(process.env.AUTH_RESEND_KEY);\r\n\r\n/**\r\n * Sends a password reset email to the specified address with the provided token.\r\n * Reports errors to Sentry and rethrows for upstream handling.\r\n * @param email - The recipient's email address\r\n * @param token - The password reset token\r\n */\r\nexport const sendPasswordResetEmail = async (\r\n  email: string,\r\n  token: string\r\n): Promise<void> => {\r\n  try {\r\n    const isProd = process.env.NODE_ENV === \"production\";\r\n    const resetLink = isProd\r\n      ? `https://shiftscanapp.com/signin/update-password?token=${token}`\r\n      : `http://localhost:3000/signin/update-password?token=${token}`;\r\n\r\n    await resend.emails.send({\r\n      from: \"no-reply@shiftscanapp.com\",\r\n      to: email,\r\n      subject: \"Reset your password\",\r\n      html: `\r\n      <p>Hello,</p>\r\n      <p>You have requested to reset your password. Please click the link below to set a new password:</p>\r\n      <p><a href=\"${resetLink}\" style=\"background-color: #003d99; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; display: inline-block;\">Reset Password</a></p>\r\n      <p>This link will expire in 24 hours.</p>\r\n      <p>If you did not request a password reset, please ignore this email.</p>\r\n      <p>Thank you,<br/>ShiftScan Team</p>\r\n      `,\r\n    });\r\n  } catch (error) {\r\n    console.error(\"‚ùå Error sending password reset email:\", error);\r\n    throw error;\r\n  }\r\n};\r\n"],"names":[],"mappings":";;AAAA,OAAO,EAAE,MAAM,EAAE,MAAM,QAAQ,CAAC;AAEhC,MAAM,MAAM,GAAG,IAAI,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;AAEvD;;;;;GAKG;AACH,MAAM,CAAC,MAAM,sBAAsB,GAAG,KAAK,EACzC,KAAa,EACb,KAAa,EACE,EAAE;IACjB,IAAI,CAAC;QACH,MAAM,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY,CAAC;QACrD,MAAM,SAAS,GAAG,MAAM;YACtB,CAAC,CAAC,yDAAyD,KAAK,EAAE;YAClE,CAAC,CAAC,sDAAsD,KAAK,EAAE,CAAC;QAElE,MAAM,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC;YACvB,IAAI,EAAE,2BAA2B;YACjC,EAAE,EAAE,KAAK;YACT,OAAO,EAAE,qBAAqB;YAC9B,IAAI,EAAE;;;oBAGQ,SAAS;;;;OAItB;SACF,CAAC,CAAC;IACL,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,OAAO,CAAC,KAAK,CAAC,uCAAuC,EAAE,KAAK,CAAC,CAAC;QAC9D,MAAM,KAAK,CAAC;IACd,CAAC;AACH,CAAC,CAAC","debug_id":"37d4e0a4-2ad7-5028-bee0-3093d3d34eb1"}