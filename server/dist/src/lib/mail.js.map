{"version":3,"file":"mail.js","sources":["src/lib/mail.ts"],"sourceRoot":"/","sourcesContent":["import { Resend } from \"resend\";\n\nconst resend = new Resend(process.env.AUTH_RESEND_KEY);\n\n/**\n * Sends a password reset email to the specified address with the provided token.\n * Reports errors to Sentry and rethrows for upstream handling.\n * @param email - The recipient's email address\n * @param token - The password reset token\n */\nexport const sendPasswordResetEmail = async (\n  email: string,\n  token: string\n): Promise<void> => {\n  try {\n    const isProd = process.env.NODE_ENV === \"production\";\n    const resetLink = isProd\n      ? `https://shiftscanapp.com/signin/update-password?token=${token}`\n      : `http://localhost:3000/signin/update-password?token=${token}`;\n\n    console.log(`üìß Sending password reset email to: ${email}`);\n    console.log(`üîó Reset link: ${resetLink}`);\n\n    await resend.emails.send({\n      from: \"no-reply@shiftscanapp.com\",\n      to: email,\n      subject: \"Reset your password\",\n      html: `\n      <p>Hello,</p>\n      <p>You have requested to reset your password. Please click the link below to set a new password:</p>\n      <p><a href=\"${resetLink}\" style=\"background-color: #003d99; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; display: inline-block;\">Reset Password</a></p>\n      <p>This link will expire in 24 hours.</p>\n      <p>If you did not request a password reset, please ignore this email.</p>\n      <p>Thank you,<br/>ShiftScan Team</p>\n      `,\n    });\n\n    console.log(`‚úÖ Password reset email sent to: ${email}`);\n  } catch (error) {\n    console.error(\"‚ùå Error sending password reset email:\", error);\n    throw error;\n  }\n};\n"],"names":[],"mappings":";;AAAA,OAAO,EAAE,MAAM,EAAE,MAAM,QAAQ,CAAC;AAEhC,MAAM,MAAM,GAAG,IAAI,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;AAEvD;;;;;GAKG;AACH,MAAM,CAAC,MAAM,sBAAsB,GAAG,KAAK,EACzC,KAAa,EACb,KAAa,EACE,EAAE;IACjB,IAAI,CAAC;QACH,MAAM,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY,CAAC;QACrD,MAAM,SAAS,GAAG,MAAM;YACtB,CAAC,CAAC,yDAAyD,KAAK,EAAE;YAClE,CAAC,CAAC,sDAAsD,KAAK,EAAE,CAAC;QAElE,OAAO,CAAC,GAAG,CAAC,uCAAuC,KAAK,EAAE,CAAC,CAAC;QAC5D,OAAO,CAAC,GAAG,CAAC,kBAAkB,SAAS,EAAE,CAAC,CAAC;QAE3C,MAAM,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC;YACvB,IAAI,EAAE,2BAA2B;YACjC,EAAE,EAAE,KAAK;YACT,OAAO,EAAE,qBAAqB;YAC9B,IAAI,EAAE;;;oBAGQ,SAAS;;;;OAItB;SACF,CAAC,CAAC;QAEH,OAAO,CAAC,GAAG,CAAC,mCAAmC,KAAK,EAAE,CAAC,CAAC;IAC1D,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,OAAO,CAAC,KAAK,CAAC,uCAAuC,EAAE,KAAK,CAAC,CAAC;QAC9D,MAAM,KAAK,CAAC;IACd,CAAC;AACH,CAAC,CAAC","debug_id":"f67b33f7-a1ca-56a9-ad41-9a6a6a2c1156"}